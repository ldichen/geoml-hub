import{s as Re,r as ye,u as Ne,v as rt,w as st,x as nt,y as at,f as m,l as A,a as I,e as et,g,h as v,m as S,d as h,c as V,j as d,i as q,A as i,B as ve,L as tr,F as _e,n as re,C as kt,E as _t,q as il,I as pt,J as bt,k as At,G as qe,o as Kt,K as ul,M as fr,D as cl}from"../chunks/scheduler.cc6cbc02.js";import{S as Ge,i as We,b as oe,d as ce,m as ie,a as D,t as N,e as ue,g as we,c as Ee}from"../chunks/index.cf161fb4.js";import{p as dr}from"../chunks/stores.67836202.js";import{e as je}from"../chunks/each.61c71743.js";import{a as Be}from"../chunks/api.ecdb55f2.js";import{R as lr}from"../chunks/RepositoryCard.a398c680.js";import{F as hr,S as _r,G as mr}from"../chunks/SocialButton.72205b7a.js";import{U as gr}from"../chunks/UserAvatar.7db75443.js";import{L as rr}from"../chunks/Loading.1b4bc8d5.js";import{U as sr}from"../chunks/upload.f8eea0db.js";import{X as nr}from"../chunks/x.4163c2e3.js";import{I as vr,A as pr,F as br}from"../chunks/image.8a4aa642.js";import{I as ot,g as it,a as ut}from"../chunks/Icon.46e6b690.js";import{T as ar,H as or}from"../chunks/trash-2.203bd6b4.js";import{D as kr,E as ir,C as yr,S as $r}from"../chunks/index.740a659d.js";import{G as wr}from"../chunks/globe.205fd586.js";import"../chunks/singletons.434e14c9.js";import{user as Er}from"../chunks/auth.9aaca404.js";function xr(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function Dr(n){let e,l;const t=[{name:"arrow-left"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[xr]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function Cr(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class Ir extends Ge{constructor(e){super(),We(this,e,Cr,Dr,Re,{})}}const Vr=Ir;function Fr(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function Ur(n){let e,l;const t=[{name:"code"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Fr]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function Br(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["polyline",{points:"16 18 22 12 16 6"}],["polyline",{points:"8 6 2 12 8 18"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class Nr extends Ge{constructor(e){super(),We(this,e,Br,Ur,Re,{})}}const Tr=Nr;function Mr(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function Pr(n){let e,l;const t=[{name:"eye-off"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Mr]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function Ar(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class Sr extends Ge{constructor(e){super(),We(this,e,Ar,Pr,Re,{})}}const ur=Sr;function zr(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function Lr(n){let e,l;const t=[{name:"folder-plus"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[zr]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function jr(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M12 10v6"}],["path",{d:"M9 13h6"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class Or extends Ge{constructor(e){super(),We(this,e,jr,Lr,Re,{})}}const qr=Or;function Hr(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function Rr(n){let e,l;const t=[{name:"folder"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Hr]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function Gr(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class Wr extends Ge{constructor(e){super(),We(this,e,Gr,Rr,Re,{})}}const cr=Wr;function Kr(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function Zr(n){let e,l;const t=[{name:"map-pin"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Kr]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function Jr(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}],["circle",{cx:"12",cy:"10",r:"3"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class Xr extends Ge{constructor(e){super(),We(this,e,Jr,Zr,Re,{})}}const Qr=Xr;function Yr(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function es(n){let e,l;const t=[{name:"music"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[Yr]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function ts(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M9 18V5l12-2v13"}],["circle",{cx:"6",cy:"18",r:"3"}],["circle",{cx:"18",cy:"16",r:"3"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class ls extends Ge{constructor(e){super(),We(this,e,ts,es,Re,{})}}const rs=ls;function ss(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function ns(n){let e,l;const t=[{name:"users"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[ss]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function as(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class os extends Ge{constructor(e){super(),We(this,e,as,ns,Re,{})}}const is=os;function us(n){let e;const l=n[2].default,t=rt(l,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&st(t,l,r,r[3],e?at(l,r[3],s,null):nt(r[3]),null)},i(r){e||(D(t,r),e=!0)},o(r){N(t,r),e=!1},d(r){t&&t.d(r)}}}function cs(n){let e,l;const t=[{name:"video"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[us]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=ye(r,t[s]);return e=new ot({props:r}),{c(){oe(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,[o]){const u=o&3?it(t,[t[0],o&2&&ut(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){ue(e,s)}}}function fs(n,e,l){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m22 8-6 4 6 4V8Z"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2"}]];return n.$$set=o=>{l(1,e=ye(ye({},e),Ne(o))),"$$scope"in o&&l(3,r=o.$$scope)},e=Ne(e),[s,e,t,r]}class ds extends Ge{constructor(e){super(),We(this,e,fs,cs,Re,{})}}const hs=ds,_s=!1,ms=!1;async function gs({params:n,fetch:e}){try{const l=await e(`/api/users/${n.username}`);if(!l.ok)return{user:null,error:"User not found"};const t=await l.json();return{user:t,meta:{title:`${t.username} - GeoML-Hub`,description:t.bio||`${t.username} 的模型仓库`,keywords:`${t.username},用户主页,模型仓库`}}}catch(l){return{user:null,error:l.message}}}const En=Object.freeze(Object.defineProperty({__proto__:null,load:gs,prerender:_s,ssr:ms},Symbol.toStringTag,{value:"Module"}));function fl(n,e,l){const t=n.slice();return t[21]=e[l],t[23]=l,t}function dl(n){let e,l,t,r,s="上传文件",o,u,a,c,f,_,y,E,k,F,C,U,J="拖拽文件到这里上传",B,p,b="或者点击选择文件",$,P,T,w,Y="选择文件",G,z,j,K,O,L,ne,ee,de,X,M,Q,ae;a=new nr({props:{class:"h-5 w-5"}}),F=new sr({props:{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}});let W=n[3].length>0&&hl(n),H=!n[4]&&n[6].total>0&&vl(n);function fe(x,R){return x[4]?ys:ks}let be=fe(n),me=be(n);return{c(){e=m("div"),l=m("div"),t=m("div"),r=m("h3"),r.textContent=s,o=I(),u=m("button"),oe(a.$$.fragment),c=I(),f=m("div"),_=A("上传到: "),y=A(n[0]),E=I(),k=m("div"),oe(F.$$.fragment),C=I(),U=m("p"),U.textContent=J,B=I(),p=m("p"),p.textContent=b,$=I(),P=m("input"),T=I(),w=m("label"),w.textContent=Y,z=I(),W&&W.c(),j=I(),H&&H.c(),K=I(),O=m("div"),L=m("button"),ne=A("取消"),ee=I(),de=m("button"),me.c(),this.h()},l(x){e=g(x,"DIV",{class:!0});var R=v(e);l=g(R,"DIV",{class:!0});var te=v(l);t=g(te,"DIV",{class:!0});var ke=v(t);r=g(ke,"H3",{class:!0,"data-svelte-h":!0}),_e(r)!=="svelte-hszboc"&&(r.textContent=s),o=V(ke),u=g(ke,"BUTTON",{class:!0});var xe=v(u);ce(a.$$.fragment,xe),xe.forEach(h),ke.forEach(h),c=V(te),f=g(te,"DIV",{class:!0});var Te=v(f);_=S(Te,"上传到: "),y=S(Te,n[0]),Te.forEach(h),E=V(te),k=g(te,"DIV",{class:!0});var ge=v(k);ce(F.$$.fragment,ge),C=V(ge),U=g(ge,"P",{class:!0,"data-svelte-h":!0}),_e(U)!=="svelte-14an0dg"&&(U.textContent=J),B=V(ge),p=g(ge,"P",{class:!0,"data-svelte-h":!0}),_e(p)!=="svelte-sz6hlb"&&(p.textContent=b),$=V(ge),P=g(ge,"INPUT",{type:!0,class:!0,id:!0}),T=V(ge),w=g(ge,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),_e(w)!=="svelte-w8703v"&&(w.textContent=Y),ge.forEach(h),z=V(te),W&&W.l(te),j=V(te),H&&H.l(te),K=V(te),O=g(te,"DIV",{class:!0});var se=v(O);L=g(se,"BUTTON",{class:!0});var le=v(L);ne=S(le,"取消"),le.forEach(h),ee=V(se),de=g(se,"BUTTON",{class:!0});var he=v(de);me.l(he),he.forEach(h),se.forEach(h),te.forEach(h),R.forEach(h),this.h()},h(){d(r,"class","text-lg font-semibold text-gray-900 dark:text-white"),d(u,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),d(t,"class","flex items-center justify-between mb-4"),d(f,"class","text-sm text-gray-600 dark:text-gray-400 mb-4"),d(U,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),d(p,"class","text-sm text-gray-600 dark:text-gray-400 mb-4"),d(P,"type","file"),P.multiple=!0,d(P,"class","hidden"),d(P,"id","file-upload"),d(w,"for","file-upload"),d(w,"class","inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors"),d(k,"class",G="border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(n[2]?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600")),d(L,"class","px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"),L.disabled=n[4],d(de,"class","px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),de.disabled=X=n[3].length===0||n[4],d(O,"class","flex justify-end space-x-3 mt-6"),d(l,"class","bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto"),d(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50")},m(x,R){q(x,e,R),i(e,l),i(l,t),i(t,r),i(t,o),i(t,u),ie(a,u,null),i(l,c),i(l,f),i(f,_),i(f,y),i(l,E),i(l,k),ie(F,k,null),i(k,C),i(k,U),i(k,B),i(k,p),i(k,$),i(k,P),i(k,T),i(k,w),i(l,z),W&&W.m(l,null),i(l,j),H&&H.m(l,null),i(l,K),i(l,O),i(O,L),i(L,ne),i(O,ee),i(O,de),me.m(de,null),M=!0,Q||(ae=[ve(u,"click",n[8]),ve(P,"change",n[9]),ve(k,"drop",n[10]),ve(k,"dragover",n[11]),ve(k,"dragleave",n[12]),ve(L,"click",n[8]),ve(de,"click",n[15])],Q=!0)},p(x,R){(!M||R&1)&&re(y,x[0]),(!M||R&4&&G!==(G="border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(x[2]?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600")))&&d(k,"class",G),x[3].length>0?W?(W.p(x,R),R&8&&D(W,1)):(W=hl(x),W.c(),D(W,1),W.m(l,j)):W&&(we(),N(W,1,1,()=>{W=null}),Ee()),!x[4]&&x[6].total>0?H?H.p(x,R):(H=vl(x),H.c(),H.m(l,K)):H&&(H.d(1),H=null),(!M||R&16)&&(L.disabled=x[4]),be!==(be=fe(x))&&(me.d(1),me=be(x),me&&(me.c(),me.m(de,null))),(!M||R&24&&X!==(X=x[3].length===0||x[4]))&&(de.disabled=X)},i(x){M||(D(a.$$.fragment,x),D(F.$$.fragment,x),D(W),M=!0)},o(x){N(a.$$.fragment,x),N(F.$$.fragment,x),N(W),M=!1},d(x){x&&h(e),ue(a),ue(F),W&&W.d(),H&&H.d(),me.d(),Q=!1,kt(ae)}}}function hl(n){let e,l,t,r=n[3].length+"",s,o,u,a,c,f=je(n[3]),_=[];for(let E=0;E<f.length;E+=1)_[E]=gl(fl(n,f,E));const y=E=>N(_[E],1,1,()=>{_[E]=null});return{c(){e=m("div"),l=m("h4"),t=A("待上传文件 ("),s=A(r),o=A(")"),u=I(),a=m("div");for(let E=0;E<_.length;E+=1)_[E].c();this.h()},l(E){e=g(E,"DIV",{class:!0});var k=v(e);l=g(k,"H4",{class:!0});var F=v(l);t=S(F,"待上传文件 ("),s=S(F,r),o=S(F,")"),F.forEach(h),u=V(k),a=g(k,"DIV",{class:!0});var C=v(a);for(let U=0;U<_.length;U+=1)_[U].l(C);C.forEach(h),k.forEach(h),this.h()},h(){d(l,"class","text-md font-medium text-gray-900 dark:text-white mb-3"),d(a,"class","space-y-3 max-h-60 overflow-y-auto"),d(e,"class","mt-6")},m(E,k){q(E,e,k),i(e,l),i(l,t),i(l,s),i(l,o),i(e,u),i(e,a);for(let F=0;F<_.length;F+=1)_[F]&&_[F].m(a,null);c=!0},p(E,k){if((!c||k&8)&&r!==(r=E[3].length+"")&&re(s,r),k&24632){f=je(E[3]);let F;for(F=0;F<f.length;F+=1){const C=fl(E,f,F);_[F]?(_[F].p(C,k),D(_[F],1)):(_[F]=gl(C),_[F].c(),D(_[F],1),_[F].m(a,null))}for(we(),F=f.length;F<_.length;F+=1)y(F);Ee()}},i(E){if(!c){for(let k=0;k<f.length;k+=1)D(_[k]);c=!0}},o(E){_=_.filter(Boolean);for(let k=0;k<_.length;k+=1)N(_[k]);c=!1},d(E){E&&h(e),_t(_,E)}}}function _l(n){let e;function l(s,o){return s[5][s[21].name]===-1?bs:s[5][s[21].name]===100?ps:vs}let t=l(n),r=t(n);return{c(){e=m("div"),r.c(),this.h()},l(s){e=g(s,"DIV",{class:!0});var o=v(e);r.l(o),o.forEach(h),this.h()},h(){d(e,"class","mt-2")},m(s,o){q(s,e,o),r.m(e,null)},p(s,o){t===(t=l(s))&&r?r.p(s,o):(r.d(1),r=t(s),r&&(r.c(),r.m(e,null)))},d(s){s&&h(e),r.d()}}}function vs(n){let e,l;return{c(){e=m("div"),l=m("div"),this.h()},l(t){e=g(t,"DIV",{class:!0});var r=v(e);l=g(r,"DIV",{class:!0,style:!0}),v(l).forEach(h),r.forEach(h),this.h()},h(){d(l,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),At(l,"width",n[5][n[21].name]+"%"),d(e,"class","w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2")},m(t,r){q(t,e,r),i(e,l)},p(t,r){r&40&&At(l,"width",t[5][t[21].name]+"%")},d(t){t&&h(e)}}}function ps(n){let e,l="上传完成";return{c(){e=m("div"),e.textContent=l,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-k0rqt3"&&(e.textContent=l),this.h()},h(){d(e,"class","text-sm text-green-600 dark:text-green-400")},m(t,r){q(t,e,r)},p:qe,d(t){t&&h(e)}}}function bs(n){let e,l="上传失败";return{c(){e=m("div"),e.textContent=l,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-1ss10f1"&&(e.textContent=l),this.h()},h(){d(e,"class","text-sm text-red-600 dark:text-red-400")},m(t,r){q(t,e,r)},p:qe,d(t){t&&h(e)}}}function ml(n){let e,l,t,r,s;l=new nr({props:{class:"h-4 w-4"}});function o(){return n[17](n[23])}return{c(){e=m("button"),oe(l.$$.fragment),this.h()},l(u){e=g(u,"BUTTON",{class:!0});var a=v(e);ce(l.$$.fragment,a),a.forEach(h),this.h()},h(){d(e,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 ml-2")},m(u,a){q(u,e,a),ie(l,e,null),t=!0,r||(s=ve(e,"click",o),r=!0)},p(u,a){n=u},i(u){t||(D(l.$$.fragment,u),t=!0)},o(u){N(l.$$.fragment,u),t=!1},d(u){u&&h(e),ue(l),r=!1,s()}}}function gl(n){let e,l,t,r,s,o,u=n[21].name+"",a,c,f,_=kl(n[21].size)+"",y,E,k,F,C;var U=n[14](n[21]);function J(b,$){return{props:{class:"h-5 w-5 text-gray-400 flex-shrink-0"}}}U&&(t=il(U,J()));let B=n[4]&&n[5][n[21].name]!==void 0&&_l(n),p=!n[4]&&ml(n);return{c(){e=m("div"),l=m("div"),t&&oe(t.$$.fragment),r=I(),s=m("div"),o=m("div"),a=A(u),c=I(),f=m("div"),y=A(_),E=I(),B&&B.c(),k=I(),p&&p.c(),F=I(),this.h()},l(b){e=g(b,"DIV",{class:!0});var $=v(e);l=g($,"DIV",{class:!0});var P=v(l);t&&ce(t.$$.fragment,P),r=V(P),s=g(P,"DIV",{class:!0});var T=v(s);o=g(T,"DIV",{class:!0});var w=v(o);a=S(w,u),w.forEach(h),c=V(T),f=g(T,"DIV",{class:!0});var Y=v(f);y=S(Y,_),Y.forEach(h),E=V(T),B&&B.l(T),T.forEach(h),P.forEach(h),k=V($),p&&p.l($),F=V($),$.forEach(h),this.h()},h(){d(o,"class","font-medium text-gray-900 dark:text-white truncate"),d(f,"class","text-sm text-gray-500 dark:text-gray-400"),d(s,"class","flex-1 min-w-0"),d(l,"class","flex items-center space-x-3 flex-1 min-w-0"),d(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg")},m(b,$){q(b,e,$),i(e,l),t&&ie(t,l,null),i(l,r),i(l,s),i(s,o),i(o,a),i(s,c),i(s,f),i(f,y),i(s,E),B&&B.m(s,null),i(e,k),p&&p.m(e,null),i(e,F),C=!0},p(b,$){if($&8&&U!==(U=b[14](b[21]))){if(t){we();const P=t;N(P.$$.fragment,1,0,()=>{ue(P,1)}),Ee()}U?(t=il(U,J()),oe(t.$$.fragment),D(t.$$.fragment,1),ie(t,l,r)):t=null}(!C||$&8)&&u!==(u=b[21].name+"")&&re(a,u),(!C||$&8)&&_!==(_=kl(b[21].size)+"")&&re(y,_),b[4]&&b[5][b[21].name]!==void 0?B?B.p(b,$):(B=_l(b),B.c(),B.m(s,null)):B&&(B.d(1),B=null),b[4]?p&&(we(),N(p,1,1,()=>{p=null}),Ee()):p?(p.p(b,$),$&16&&D(p,1)):(p=ml(b),p.c(),D(p,1),p.m(e,F))},i(b){C||(t&&D(t.$$.fragment,b),D(p),C=!0)},o(b){t&&N(t.$$.fragment,b),N(p),C=!1},d(b){b&&h(e),t&&ue(t),B&&B.d(),p&&p.d()}}}function vl(n){let e,l,t="上传结果",r,s,o,u=n[6].success>0&&pl(n),a=n[6].failed>0&&bl(n);return{c(){e=m("div"),l=m("h4"),l.textContent=t,r=I(),s=m("div"),u&&u.c(),o=I(),a&&a.c(),this.h()},l(c){e=g(c,"DIV",{class:!0});var f=v(e);l=g(f,"H4",{class:!0,"data-svelte-h":!0}),_e(l)!=="svelte-zdjdvg"&&(l.textContent=t),r=V(f),s=g(f,"DIV",{class:!0});var _=v(s);u&&u.l(_),o=V(_),a&&a.l(_),_.forEach(h),f.forEach(h),this.h()},h(){d(l,"class","text-md font-medium text-gray-900 dark:text-white mb-2"),d(s,"class","space-y-2"),d(e,"class","mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg")},m(c,f){q(c,e,f),i(e,l),i(e,r),i(e,s),u&&u.m(s,null),i(s,o),a&&a.m(s,null)},p(c,f){c[6].success>0?u?u.p(c,f):(u=pl(c),u.c(),u.m(s,o)):u&&(u.d(1),u=null),c[6].failed>0?a?a.p(c,f):(a=bl(c),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},d(c){c&&h(e),u&&u.d(),a&&a.d()}}}function pl(n){let e,l,t,r,s=n[6].success+"",o,u;return{c(){e=m("div"),l=pt("svg"),t=pt("path"),r=A(`
                成功上传 `),o=A(s),u=A(" 个文件"),this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);l=bt(c,"svg",{class:!0,fill:!0,viewBox:!0});var f=v(l);t=bt(f,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(t).forEach(h),f.forEach(h),r=S(c,`
                成功上传 `),o=S(c,s),u=S(c," 个文件"),c.forEach(h),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),d(t,"clip-rule","evenodd"),d(l,"class","w-4 h-4 mr-2"),d(l,"fill","currentColor"),d(l,"viewBox","0 0 20 20"),d(e,"class","flex items-center text-green-600 dark:text-green-400")},m(a,c){q(a,e,c),i(e,l),i(l,t),i(e,r),i(e,o),i(e,u)},p(a,c){c&64&&s!==(s=a[6].success+"")&&re(o,s)},d(a){a&&h(e)}}}function bl(n){let e,l,t,r,s=n[6].failed+"",o,u;return{c(){e=m("div"),l=pt("svg"),t=pt("path"),r=A(`
                上传失败 `),o=A(s),u=A(" 个文件"),this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);l=bt(c,"svg",{class:!0,fill:!0,viewBox:!0});var f=v(l);t=bt(f,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(t).forEach(h),f.forEach(h),r=S(c,`
                上传失败 `),o=S(c,s),u=S(c," 个文件"),c.forEach(h),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),d(t,"clip-rule","evenodd"),d(l,"class","w-4 h-4 mr-2"),d(l,"fill","currentColor"),d(l,"viewBox","0 0 20 20"),d(e,"class","flex items-center text-red-600 dark:text-red-400")},m(a,c){q(a,e,c),i(e,l),i(l,t),i(e,r),i(e,o),i(e,u)},p(a,c){c&64&&s!==(s=a[6].failed+"")&&re(o,s)},d(a){a&&h(e)}}}function ks(n){let e;return{c(){e=A("开始上传")},l(l){e=S(l,"开始上传")},m(l,t){q(l,e,t)},d(l){l&&h(e)}}}function ys(n){let e;return{c(){e=A("上传中...")},l(l){e=S(l,"上传中...")},m(l,t){q(l,e,t)},d(l){l&&h(e)}}}function $s(n){let e,l,t,r,s,o,u,a;l=new sr({props:{class:"h-4 w-4 mr-2"}});let c=n[1]&&dl(n);return{c(){e=m("button"),oe(l.$$.fragment),t=A(`
  上传文件`),r=I(),c&&c.c(),s=et(),this.h()},l(f){e=g(f,"BUTTON",{class:!0});var _=v(e);ce(l.$$.fragment,_),t=S(_,`
  上传文件`),_.forEach(h),r=V(f),c&&c.l(f),s=et(),this.h()},h(){d(e,"class","inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors")},m(f,_){q(f,e,_),ie(l,e,null),i(e,t),q(f,r,_),c&&c.m(f,_),q(f,s,_),o=!0,u||(a=ve(e,"click",n[7]),u=!0)},p(f,[_]){f[1]?c?(c.p(f,_),_&2&&D(c,1)):(c=dl(f),c.c(),D(c,1),c.m(s.parentNode,s)):c&&(we(),N(c,1,1,()=>{c=null}),Ee())},i(f){o||(D(l.$$.fragment,f),D(c),o=!0)},o(f){N(l.$$.fragment,f),N(c),o=!1},d(f){f&&(h(e),h(r),h(s)),ue(l),c&&c.d(f),u=!1,a()}}}function kl(n){if(n===0)return"0 B";const e=1024,l=["B","KB","MB","GB"],t=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,t)).toFixed(2))+" "+l[t]}function ws(n,e,l){let{username:t}=e,{currentPath:r="/"}=e;const s=tr();let o=!1,u=!1,a=[],c=!1,f={},_={success:0,failed:0,total:0};function y(){l(1,o=!0),l(3,a=[]),l(5,f={}),l(6,_={success:0,failed:0,total:0})}function E(){l(1,o=!1),l(4,c=!1)}function k(T){const w=T.target;w.files&&J(Array.from(w.files))}function F(T){var w;T.preventDefault(),l(2,u=!1),(w=T.dataTransfer)!=null&&w.files&&J(Array.from(T.dataTransfer.files))}function C(T){T.preventDefault(),l(2,u=!0)}function U(){l(2,u=!1)}function J(T){l(3,a=[...a,...T])}function B(T){l(3,a=a.filter((w,Y)=>Y!==T))}function p(T){const w=T.type.toLowerCase();return w.startsWith("image/")?vr:w.startsWith("video/")?hs:w.startsWith("audio/")?rs:w.includes("archive")||w.includes("zip")?pr:w.includes("text")||w.includes("json")||w.includes("xml")?Tr:w.includes("pdf")||w.includes("document")?hr:br}async function b(T,w="",Y="",G=!1){try{const z=await Be.request(`/api/personal-files/${t}/upload-url?filename=${encodeURIComponent(T.name)}&file_size=${T.size}`,{method:"POST"});if(!(await fetch(z.upload_url,{method:"PUT",body:T,headers:{"Content-Type":T.type}})).ok)throw new Error("文件上传失败");return await Be.request(`/api/personal-files/${t}/complete-upload`,{method:"POST",body:{file_key:z.file_key,filename:T.name,file_path:r,file_size:T.size,mime_type:T.type,description:w,tags:Y,is_public:G}})}catch(z){throw console.error("Upload error:",z),z}}async function $(){if(a.length===0)return;l(4,c=!0),l(6,_={success:0,failed:0,total:a.length});const T=a.map(async(w,Y)=>{try{l(5,f[w.name]=0,f),l(5,f={...f}),await b(w),l(5,f[w.name]=100,f),l(5,f={...f}),l(6,_.success++,_),l(6,_={..._})}catch(G){console.error(`Upload failed for ${w.name}:`,G),l(5,f[w.name]=-1,f),l(5,f={...f}),l(6,_.failed++,_),l(6,_={..._})}});await Promise.all(T),l(4,c=!1),s("uploadComplete",{success:_.success,failed:_.failed,total:_.total}),setTimeout(()=>{E()},_.failed>0?3e3:2e3)}const P=T=>B(T);return n.$$set=T=>{"username"in T&&l(16,t=T.username),"currentPath"in T&&l(0,r=T.currentPath)},[r,o,u,a,c,f,_,y,E,k,F,C,U,B,p,$,t,P]}class Es extends Ge{constructor(e){super(),We(this,e,ws,$s,Re,{username:16,currentPath:0})}}function yl(n,e,l){const t=n.slice();return t[43]=e[l],t}function $l(n,e,l){const t=n.slice();return t[46]=e[l],t}function wl(n,e,l){const t=n.slice();return t[49]=e[l],t[51]=l,t}function El(n){let e,l="/",t,r,s=n[49]+"",o,u,a,c;function f(){return n[27](n[51])}return{c(){e=m("span"),e.textContent=l,t=I(),r=m("button"),o=A(s),u=I(),this.h()},l(_){e=g(_,"SPAN",{"data-svelte-h":!0}),_e(e)!=="svelte-ocknwt"&&(e.textContent=l),t=V(_),r=g(_,"BUTTON",{class:!0});var y=v(r);o=S(y,s),u=V(y),y.forEach(h),this.h()},h(){d(r,"class","hover:text-blue-600 dark:hover:text-blue-400")},m(_,y){q(_,e,y),q(_,t,y),q(_,r,y),i(r,o),i(r,u),a||(c=ve(r,"click",f),a=!0)},p(_,y){n=_,y[0]&2&&s!==(s=n[49]+"")&&re(o,s)},d(_){_&&(h(e),h(t),h(r)),a=!1,c()}}}function xl(n){let e,l,t,r,s,o;return l=new Vr({props:{class:"h-4 w-4 mr-1"}}),{c(){e=m("button"),oe(l.$$.fragment),t=A(`
          返回上级`),this.h()},l(u){e=g(u,"BUTTON",{class:!0});var a=v(e);ce(l.$$.fragment,a),t=S(a,`
          返回上级`),a.forEach(h),this.h()},h(){d(e,"class","inline-flex items-center px-2 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400")},m(u,a){q(u,e,a),ie(l,e,null),i(e,t),r=!0,s||(o=ve(e,"click",n[13]),s=!0)},p:qe,i(u){r||(D(l.$$.fragment,u),r=!0)},o(u){N(l.$$.fragment,u),r=!1},d(u){u&&h(e),ue(l),s=!1,o()}}}function Dl(n){let e,l,t,r=n[8].size+"",s,o,u,a,c="批量删除",f,_,y="取消选择",E,k;return{c(){e=m("div"),l=m("span"),t=A("已选择 "),s=A(r),o=A(" 个文件"),u=I(),a=m("button"),a.textContent=c,f=I(),_=m("button"),_.textContent=y,this.h()},l(F){e=g(F,"DIV",{class:!0});var C=v(e);l=g(C,"SPAN",{class:!0});var U=v(l);t=S(U,"已选择 "),s=S(U,r),o=S(U," 个文件"),U.forEach(h),u=V(C),a=g(C,"BUTTON",{class:!0,"data-svelte-h":!0}),_e(a)!=="svelte-1vpo5yr"&&(a.textContent=c),f=V(C),_=g(C,"BUTTON",{class:!0,"data-svelte-h":!0}),_e(_)!=="svelte-g4unad"&&(_.textContent=y),C.forEach(h),this.h()},h(){d(l,"class","text-sm text-blue-700 dark:text-blue-300"),d(a,"class","text-sm text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"),d(_,"class","text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300"),d(e,"class","flex items-center space-x-2 bg-blue-50 dark:bg-blue-900/20 px-3 py-2 rounded-lg")},m(F,C){q(F,e,C),i(e,l),i(l,t),i(l,s),i(l,o),i(e,u),i(e,a),i(e,f),i(e,_),E||(k=[ve(a,"click",n[23]),ve(_,"click",n[22])],E=!0)},p(F,C){C[0]&256&&r!==(r=F[8].size+"")&&re(s,r)},d(F){F&&h(e),E=!1,kt(k)}}}function Cl(n){let e,l,t;return{c(){e=m("div"),l=m("p"),t=A(n[5]),this.h()},l(r){e=g(r,"DIV",{class:!0});var s=v(e);l=g(s,"P",{class:!0});var o=v(l);t=S(o,n[5]),o.forEach(h),s.forEach(h),this.h()},h(){d(l,"class","text-red-700 dark:text-red-300"),d(e,"class","bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4")},m(r,s){q(r,e,s),i(e,l),i(l,t)},p(r,s){s[0]&32&&re(t,r[5])},d(r){r&&h(e)}}}function Il(n){let e,l,t;return{c(){e=m("div"),l=m("p"),t=A(n[11]),this.h()},l(r){e=g(r,"DIV",{class:!0});var s=v(e);l=g(s,"P",{class:!0});var o=v(l);t=S(o,n[11]),o.forEach(h),s.forEach(h),this.h()},h(){d(l,"class","text-green-700 dark:text-green-300"),d(e,"class","bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4")},m(r,s){q(r,e,s),i(e,l),i(l,t)},p(r,s){s[0]&2048&&re(t,r[11])},d(r){r&&h(e)}}}function xs(n){let e,l,t,r,s="文件列表",o,u,a,c,f,_,y=n[2].length>0&&Vl(n),E=je(n[3]),k=[];for(let p=0;p<E.length;p+=1)k[p]=Fl($l(n,E,p));const F=p=>N(k[p],1,1,()=>{k[p]=null});let C=je(n[2]),U=[];for(let p=0;p<C.length;p+=1)U[p]=Ul(yl(n,C,p));const J=p=>N(U[p],1,1,()=>{U[p]=null});let B=n[2].length===0&&n[3].length===0&&Bl();return{c(){e=m("div"),l=m("div"),t=m("div"),r=m("h3"),r.textContent=s,o=I(),y&&y.c(),u=I(),a=m("div");for(let p=0;p<k.length;p+=1)k[p].c();c=I();for(let p=0;p<U.length;p+=1)U[p].c();f=I(),B&&B.c(),this.h()},l(p){e=g(p,"DIV",{class:!0});var b=v(e);l=g(b,"DIV",{class:!0});var $=v(l);t=g($,"DIV",{class:!0});var P=v(t);r=g(P,"H3",{class:!0,"data-svelte-h":!0}),_e(r)!=="svelte-1dme68v"&&(r.textContent=s),o=V(P),y&&y.l(P),P.forEach(h),$.forEach(h),u=V(b),a=g(b,"DIV",{class:!0});var T=v(a);for(let w=0;w<k.length;w+=1)k[w].l(T);c=V(T);for(let w=0;w<U.length;w+=1)U[w].l(T);f=V(T),B&&B.l(T),T.forEach(h),b.forEach(h),this.h()},h(){d(r,"class","text-lg font-medium text-gray-900 dark:text-white"),d(t,"class","flex items-center justify-between"),d(l,"class","p-4 border-b border-gray-200 dark:border-gray-700"),d(a,"class","divide-y divide-gray-200 dark:divide-gray-700"),d(e,"class","bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700")},m(p,b){q(p,e,b),i(e,l),i(l,t),i(t,r),i(t,o),y&&y.m(t,null),i(e,u),i(e,a);for(let $=0;$<k.length;$+=1)k[$]&&k[$].m(a,null);i(a,c);for(let $=0;$<U.length;$+=1)U[$]&&U[$].m(a,null);i(a,f),B&&B.m(a,null),_=!0},p(p,b){if(p[2].length>0?y?y.p(p,b):(y=Vl(p),y.c(),y.m(t,null)):y&&(y.d(1),y=null),b[0]&331784){E=je(p[3]);let $;for($=0;$<E.length;$+=1){const P=$l(p,E,$);k[$]?(k[$].p(P,b),D(k[$],1)):(k[$]=Fl(P),k[$].c(),D(k[$],1),k[$].m(a,c))}for(we(),$=E.length;$<k.length;$+=1)F($);Ee()}if(b[0]&1736964){C=je(p[2]);let $;for($=0;$<C.length;$+=1){const P=yl(p,C,$);U[$]?(U[$].p(P,b),D(U[$],1)):(U[$]=Ul(P),U[$].c(),D(U[$],1),U[$].m(a,f))}for(we(),$=C.length;$<U.length;$+=1)J($);Ee()}p[2].length===0&&p[3].length===0?B?b[0]&12&&D(B,1):(B=Bl(),B.c(),D(B,1),B.m(a,null)):B&&(we(),N(B,1,1,()=>{B=null}),Ee())},i(p){if(!_){for(let b=0;b<E.length;b+=1)D(k[b]);for(let b=0;b<C.length;b+=1)D(U[b]);D(B),_=!0}},o(p){k=k.filter(Boolean);for(let b=0;b<k.length;b+=1)N(k[b]);U=U.filter(Boolean);for(let b=0;b<U.length;b+=1)N(U[b]);N(B),_=!1},d(p){p&&h(e),y&&y.d(),_t(k,p),_t(U,p),B&&B.d()}}}function Ds(n){let e,l='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>';return{c(){e=m("div"),e.innerHTML=l,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-rgm7n9"&&(e.innerHTML=l),this.h()},h(){d(e,"class","flex items-center justify-center py-12")},m(t,r){q(t,e,r)},p:qe,i:qe,o:qe,d(t){t&&h(e)}}}function Vl(n){let e,l="全选",t,r;return{c(){e=m("button"),e.textContent=l,this.h()},l(s){e=g(s,"BUTTON",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-26helz"&&(e.textContent=l),this.h()},h(){d(e,"class","text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300")},m(s,o){q(s,e,o),t||(r=ve(e,"click",n[21]),t=!0)},p:qe,d(s){s&&h(e),t=!1,r()}}}function Cs(n){let e,l="私有";return{c(){e=m("span"),e.textContent=l,this.h()},l(t){e=g(t,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-frxc6q"&&(e.textContent=l),this.h()},h(){d(e,"class","ml-2 px-2 py-0.5 bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300 text-xs rounded-full")},m(t,r){q(t,e,r)},d(t){t&&h(e)}}}function Is(n){let e,l="公开";return{c(){e=m("span"),e.textContent=l,this.h()},l(t){e=g(t,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-hpsfm8"&&(e.textContent=l),this.h()},h(){d(e,"class","ml-2 px-2 py-0.5 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 text-xs rounded-full")},m(t,r){q(t,e,r)},d(t){t&&h(e)}}}function Vs(n){let e,l;return e=new ur({props:{class:"h-4 w-4"}}),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Fs(n){let e,l;return e=new ir({props:{class:"h-4 w-4"}}),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Fl(n){let e,l,t,r,s,o,u,a=n[46].name+"",c,f,_,y=(n[46].file_count||0)+"",E,k,F=St(n[46].created_at)+"",C,U,J,B,p,b,$,P,T,w,Y,G,z,j,K;r=new cr({props:{class:"h-5 w-5 text-blue-500 flex-shrink-0"}});function O(){return n[29](n[46])}function L(W,H){return W[46].is_public?Is:Cs}let ne=L(n),ee=ne(n);const de=[Fs,Vs],X=[];function M(W,H){return W[46].is_public?0:1}b=M(n),$=X[b]=de[b](n);function Q(){return n[30](n[46])}Y=new ar({props:{class:"h-4 w-4"}});function ae(){return n[31](n[46])}return{c(){e=m("div"),l=m("div"),t=m("div"),oe(r.$$.fragment),s=I(),o=m("div"),u=m("button"),c=A(a),f=I(),_=m("div"),E=A(y),k=A(" 个文件 • 创建于 "),C=A(F),U=I(),ee.c(),J=I(),B=m("div"),p=m("button"),$.c(),T=I(),w=m("button"),oe(Y.$$.fragment),G=I(),this.h()},l(W){e=g(W,"DIV",{class:!0});var H=v(e);l=g(H,"DIV",{class:!0});var fe=v(l);t=g(fe,"DIV",{class:!0});var be=v(t);ce(r.$$.fragment,be),s=V(be),o=g(be,"DIV",{class:!0});var me=v(o);u=g(me,"BUTTON",{class:!0});var x=v(u);c=S(x,a),x.forEach(h),f=V(me),_=g(me,"DIV",{class:!0});var R=v(_);E=S(R,y),k=S(R," 个文件 • 创建于 "),C=S(R,F),U=V(R),ee.l(R),R.forEach(h),me.forEach(h),be.forEach(h),J=V(fe),B=g(fe,"DIV",{class:!0});var te=v(B);p=g(te,"BUTTON",{class:!0,title:!0});var ke=v(p);$.l(ke),ke.forEach(h),T=V(te),w=g(te,"BUTTON",{class:!0,title:!0});var xe=v(w);ce(Y.$$.fragment,xe),xe.forEach(h),te.forEach(h),fe.forEach(h),G=V(H),H.forEach(h),this.h()},h(){d(u,"class","font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 truncate block"),d(_,"class","text-sm text-gray-500 dark:text-gray-400"),d(o,"class","flex-1 min-w-0"),d(t,"class","flex items-center space-x-3 flex-1 min-w-0"),d(p,"class","text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 p-1"),d(p,"title",P=n[46].is_public?"设为私有":"设为公开"),d(w,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1"),d(w,"title","删除文件夹"),d(B,"class","flex items-center space-x-2"),d(l,"class","flex items-center justify-between"),d(e,"class","p-4 hover:bg-gray-50 dark:hover:bg-gray-700")},m(W,H){q(W,e,H),i(e,l),i(l,t),ie(r,t,null),i(t,s),i(t,o),i(o,u),i(u,c),i(o,f),i(o,_),i(_,E),i(_,k),i(_,C),i(_,U),ee.m(_,null),i(l,J),i(l,B),i(B,p),X[b].m(p,null),i(B,T),i(B,w),ie(Y,w,null),i(e,G),z=!0,j||(K=[ve(u,"click",O),ve(p,"click",Q),ve(w,"click",ae)],j=!0)},p(W,H){n=W,(!z||H[0]&8)&&a!==(a=n[46].name+"")&&re(c,a),(!z||H[0]&8)&&y!==(y=(n[46].file_count||0)+"")&&re(E,y),(!z||H[0]&8)&&F!==(F=St(n[46].created_at)+"")&&re(C,F),ne!==(ne=L(n))&&(ee.d(1),ee=ne(n),ee&&(ee.c(),ee.m(_,null)));let fe=b;b=M(n),b!==fe&&(we(),N(X[fe],1,1,()=>{X[fe]=null}),Ee(),$=X[b],$||($=X[b]=de[b](n),$.c()),D($,1),$.m(p,null)),(!z||H[0]&8&&P!==(P=n[46].is_public?"设为私有":"设为公开"))&&d(p,"title",P)},i(W){z||(D(r.$$.fragment,W),D($),D(Y.$$.fragment,W),z=!0)},o(W){N(r.$$.fragment,W),N($),N(Y.$$.fragment,W),z=!1},d(W){W&&h(e),ue(r),ee.d(),X[b].d(),ue(Y),j=!1,kt(K)}}}function Us(n){let e,l="私有";return{c(){e=m("span"),e.textContent=l,this.h()},l(t){e=g(t,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-frxc6q"&&(e.textContent=l),this.h()},h(){d(e,"class","ml-2 px-2 py-0.5 bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300 text-xs rounded-full")},m(t,r){q(t,e,r)},d(t){t&&h(e)}}}function Bs(n){let e,l="公开";return{c(){e=m("span"),e.textContent=l,this.h()},l(t){e=g(t,"SPAN",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-hpsfm8"&&(e.textContent=l),this.h()},h(){d(e,"class","ml-2 px-2 py-0.5 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 text-xs rounded-full")},m(t,r){q(t,e,r)},d(t){t&&h(e)}}}function Ns(n){let e,l;return e=new ur({props:{class:"h-4 w-4"}}),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ts(n){let e,l;return e=new ir({props:{class:"h-4 w-4"}}),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ul(n){let e,l,t,r,s,o,u,a=Ml(n[43].mime_type)+"",c,f,_,y,E=n[43].filename+"",k,F,C,U=Tl(n[43].file_size)+"",J,B,p=St(n[43].created_at)+"",b,$,P=n[43].download_count+"",T,w,Y,G,z,j,K,O,L,ne,ee,de,X,M,Q,ae,W,H;function fe(){return n[32](n[43])}function be(se,le){return se[43].is_public?Bs:Us}let me=be(n),x=me(n);j=new kr({props:{class:"h-4 w-4"}});function R(){return n[33](n[43])}const te=[Ts,Ns],ke=[];function xe(se,le){return se[43].is_public?0:1}L=xe(n),ne=ke[L]=te[L](n);function Te(){return n[34](n[43])}M=new ar({props:{class:"h-4 w-4"}});function ge(){return n[35](n[43])}return{c(){e=m("div"),l=m("div"),t=m("div"),r=m("input"),o=I(),u=m("span"),c=A(a),f=I(),_=m("div"),y=m("div"),k=A(E),F=I(),C=m("div"),J=A(U),B=A(" • "),b=A(p),$=A(" • "),T=A(P),w=A(` 次下载
                    `),x.c(),Y=I(),G=m("div"),z=m("button"),oe(j.$$.fragment),K=I(),O=m("button"),ne.c(),de=I(),X=m("button"),oe(M.$$.fragment),Q=I(),this.h()},l(se){e=g(se,"DIV",{class:!0});var le=v(e);l=g(le,"DIV",{class:!0});var he=v(l);t=g(he,"DIV",{class:!0});var Pe=v(t);r=g(Pe,"INPUT",{type:!0,class:!0}),o=V(Pe),u=g(Pe,"SPAN",{class:!0});var Ke=v(u);c=S(Ke,a),Ke.forEach(h),f=V(Pe),_=g(Pe,"DIV",{class:!0});var He=v(_);y=g(He,"DIV",{class:!0});var Me=v(y);k=S(Me,E),Me.forEach(h),F=V(He),C=g(He,"DIV",{class:!0});var Ue=v(C);J=S(Ue,U),B=S(Ue," • "),b=S(Ue,p),$=S(Ue," • "),T=S(Ue,P),w=S(Ue,` 次下载
                    `),x.l(Ue),Ue.forEach(h),He.forEach(h),Pe.forEach(h),Y=V(he),G=g(he,"DIV",{class:!0});var $e=v(G);z=g($e,"BUTTON",{class:!0,title:!0});var De=v(z);ce(j.$$.fragment,De),De.forEach(h),K=V($e),O=g($e,"BUTTON",{class:!0,title:!0});var Ze=v(O);ne.l(Ze),Ze.forEach(h),de=V($e),X=g($e,"BUTTON",{class:!0,title:!0});var Je=v(X);ce(M.$$.fragment,Je),Je.forEach(h),$e.forEach(h),he.forEach(h),Q=V(le),le.forEach(h),this.h()},h(){d(r,"type","checkbox"),d(r,"class","rounded border-gray-300 dark:border-gray-600"),r.checked=s=n[8].has(n[43].id),d(u,"class","text-xl flex-shrink-0"),d(y,"class","font-medium text-gray-900 dark:text-white truncate"),d(C,"class","text-sm text-gray-500 dark:text-gray-400"),d(_,"class","flex-1 min-w-0"),d(t,"class","flex items-center space-x-3 flex-1 min-w-0"),d(z,"class","text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 p-1"),d(z,"title","下载文件"),d(O,"class","text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 p-1"),d(O,"title",ee=n[43].is_public?"设为私有":"设为公开"),d(X,"class","text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1"),d(X,"title","删除文件"),d(G,"class","flex items-center space-x-2"),d(l,"class","flex items-center justify-between"),d(e,"class","p-4 hover:bg-gray-50 dark:hover:bg-gray-700")},m(se,le){q(se,e,le),i(e,l),i(l,t),i(t,r),i(t,o),i(t,u),i(u,c),i(t,f),i(t,_),i(_,y),i(y,k),i(_,F),i(_,C),i(C,J),i(C,B),i(C,b),i(C,$),i(C,T),i(C,w),x.m(C,null),i(l,Y),i(l,G),i(G,z),ie(j,z,null),i(G,K),i(G,O),ke[L].m(O,null),i(G,de),i(G,X),ie(M,X,null),i(e,Q),ae=!0,W||(H=[ve(r,"change",fe),ve(z,"click",R),ve(O,"click",Te),ve(X,"click",ge)],W=!0)},p(se,le){n=se,(!ae||le[0]&260&&s!==(s=n[8].has(n[43].id)))&&(r.checked=s),(!ae||le[0]&4)&&a!==(a=Ml(n[43].mime_type)+"")&&re(c,a),(!ae||le[0]&4)&&E!==(E=n[43].filename+"")&&re(k,E),(!ae||le[0]&4)&&U!==(U=Tl(n[43].file_size)+"")&&re(J,U),(!ae||le[0]&4)&&p!==(p=St(n[43].created_at)+"")&&re(b,p),(!ae||le[0]&4)&&P!==(P=n[43].download_count+"")&&re(T,P),me!==(me=be(n))&&(x.d(1),x=me(n),x&&(x.c(),x.m(C,null)));let he=L;L=xe(n),L!==he&&(we(),N(ke[he],1,1,()=>{ke[he]=null}),Ee(),ne=ke[L],ne||(ne=ke[L]=te[L](n),ne.c()),D(ne,1),ne.m(O,null)),(!ae||le[0]&4&&ee!==(ee=n[43].is_public?"设为私有":"设为公开"))&&d(O,"title",ee)},i(se){ae||(D(j.$$.fragment,se),D(ne),D(M.$$.fragment,se),ae=!0)},o(se){N(j.$$.fragment,se),N(ne),N(M.$$.fragment,se),ae=!1},d(se){se&&h(e),x.d(),ue(j),ke[L].d(),ue(M),W=!1,kt(H)}}}function Bl(n){let e,l,t,r,s="这里还没有任何文件",o,u,a="开始上传文件或创建文件夹来组织您的数据",c;return l=new cr({props:{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}}),{c(){e=m("div"),oe(l.$$.fragment),t=I(),r=m("p"),r.textContent=s,o=I(),u=m("p"),u.textContent=a,this.h()},l(f){e=g(f,"DIV",{class:!0});var _=v(e);ce(l.$$.fragment,_),t=V(_),r=g(_,"P",{class:!0,"data-svelte-h":!0}),_e(r)!=="svelte-pybgs3"&&(r.textContent=s),o=V(_),u=g(_,"P",{class:!0,"data-svelte-h":!0}),_e(u)!=="svelte-17ox9dg"&&(u.textContent=a),_.forEach(h),this.h()},h(){d(r,"class","text-lg font-medium text-gray-900 dark:text-white mb-2"),d(u,"class","text-gray-600 dark:text-gray-400 mb-4"),d(e,"class","p-12 text-center")},m(f,_){q(f,e,_),ie(l,e,null),i(e,t),i(e,r),i(e,o),i(e,u),c=!0},i(f){c||(D(l.$$.fragment,f),c=!0)},o(f){N(l.$$.fragment,f),c=!1},d(f){f&&h(e),ue(l)}}}function Nl(n){let e,l,t,r="创建新文件夹",s,o,u,a,c="文件夹名称",f,_,y,E,k,F,C,U,J,B,p,b="取消",$,P,T,w,Y;function G(K,O){return K[10]?Ps:Ms}let z=G(n),j=z(n);return{c(){e=m("div"),l=m("div"),t=m("h3"),t.textContent=r,s=I(),o=m("div"),u=m("div"),a=m("label"),a.textContent=c,f=I(),_=m("input"),y=I(),E=m("div"),k=A("将在 "),F=m("span"),C=A(n[1]),U=A(" 下创建文件夹"),J=I(),B=m("div"),p=m("button"),p.textContent=b,$=I(),P=m("button"),j.c(),this.h()},l(K){e=g(K,"DIV",{class:!0});var O=v(e);l=g(O,"DIV",{class:!0});var L=v(l);t=g(L,"H3",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-50cm4u"&&(t.textContent=r),s=V(L),o=g(L,"DIV",{class:!0});var ne=v(o);u=g(ne,"DIV",{});var ee=v(u);a=g(ee,"LABEL",{class:!0,"data-svelte-h":!0}),_e(a)!=="svelte-mol0mi"&&(a.textContent=c),f=V(ee),_=g(ee,"INPUT",{type:!0,class:!0,placeholder:!0}),ee.forEach(h),y=V(ne),E=g(ne,"DIV",{class:!0});var de=v(E);k=S(de,"将在 "),F=g(de,"SPAN",{class:!0});var X=v(F);C=S(X,n[1]),X.forEach(h),U=S(de," 下创建文件夹"),de.forEach(h),ne.forEach(h),J=V(L),B=g(L,"DIV",{class:!0});var M=v(B);p=g(M,"BUTTON",{class:!0,"data-svelte-h":!0}),_e(p)!=="svelte-1dofls"&&(p.textContent=b),$=V(M),P=g(M,"BUTTON",{class:!0});var Q=v(P);j.l(Q),Q.forEach(h),M.forEach(h),L.forEach(h),O.forEach(h),this.h()},h(){d(t,"class","text-lg font-semibold text-gray-900 dark:text-white mb-4"),d(a,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),d(_,"type","text"),d(_,"class","w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"),d(_,"placeholder","输入文件夹名称"),_.disabled=n[10],_.autofocus=!0,d(F,"class","font-mono"),d(E,"class","text-sm text-gray-600 dark:text-gray-400"),d(o,"class","space-y-4"),d(p,"class","px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"),d(P,"class","px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"),P.disabled=T=!n[7].trim()||n[10],d(B,"class","flex justify-end space-x-3 mt-6"),d(l,"class","bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4"),d(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50")},m(K,O){q(K,e,O),i(e,l),i(l,t),i(l,s),i(l,o),i(o,u),i(u,a),i(u,f),i(u,_),ul(_,n[7]),i(o,y),i(o,E),i(E,k),i(E,F),i(F,C),i(E,U),i(l,J),i(l,B),i(B,p),i(B,$),i(B,P),j.m(P,null),_.focus(),w||(Y=[ve(_,"input",n[36]),ve(_,"keypress",n[37]),ve(_,"keydown",n[38]),ve(p,"click",n[39]),ve(P,"click",n[14])],w=!0)},p(K,O){O[0]&1024&&(_.disabled=K[10]),O[0]&128&&_.value!==K[7]&&ul(_,K[7]),O[0]&2&&re(C,K[1]),z!==(z=G(K))&&(j.d(1),j=z(K),j&&(j.c(),j.m(P,null))),O[0]&1152&&T!==(T=!K[7].trim()||K[10])&&(P.disabled=T)},d(K){K&&h(e),j.d(),w=!1,kt(Y)}}}function Ms(n){let e;return{c(){e=A("创建")},l(l){e=S(l,"创建")},m(l,t){q(l,e,t)},d(l){l&&h(e)}}}function Ps(n){let e,l,t,r;return{c(){e=pt("svg"),l=pt("circle"),t=pt("path"),r=A(`
            创建中...`),this.h()},l(s){e=bt(s,"svg",{class:!0,fill:!0,viewBox:!0});var o=v(e);l=bt(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),v(l).forEach(h),t=bt(o,"path",{class:!0,fill:!0,d:!0}),v(t).forEach(h),o.forEach(h),r=S(s,`
            创建中...`),this.h()},h(){d(l,"class","opacity-25"),d(l,"cx","12"),d(l,"cy","12"),d(l,"r","10"),d(l,"stroke","currentColor"),d(l,"stroke-width","4"),d(t,"class","opacity-75"),d(t,"fill","currentColor"),d(t,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),d(e,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24")},m(s,o){q(s,e,o),i(e,l),i(e,t),q(s,r,o)},d(s){s&&(h(e),h(r))}}}function As(n){let e,l,t,r,s,o="个人文件",u,a,c,f,_,y,E,k,F,C,U,J,B,p,b,$,P,T,w,Y,G=je(n[1].split("/").filter(Pl)),z=[];for(let M=0;M<G.length;M+=1)z[M]=El(wl(n,G,M));let j=n[1]!=="/"&&xl(n),K=n[9]&&Dl(n);E=new qr({props:{class:"h-4 w-4 mr-2"}}),C=new Es({props:{username:n[0],currentPath:n[1]}}),C.$on("uploadComplete",n[24]);let O=n[5]&&Cl(n),L=n[11]&&Il(n);const ne=[Ds,xs],ee=[];function de(M,Q){return M[4]?0:1}p=de(n),b=ee[p]=ne[p](n);let X=n[6]&&Nl(n);return{c(){e=m("div"),l=m("div"),t=m("div"),r=m("div"),s=m("button"),s.textContent=o,u=I();for(let M=0;M<z.length;M+=1)z[M].c();a=I(),j&&j.c(),c=I(),f=m("div"),K&&K.c(),_=I(),y=m("button"),oe(E.$$.fragment),k=A(`
        新建文件夹`),F=I(),oe(C.$$.fragment),U=I(),O&&O.c(),J=I(),L&&L.c(),B=I(),b.c(),$=I(),X&&X.c(),P=et(),this.h()},l(M){e=g(M,"DIV",{class:!0});var Q=v(e);l=g(Q,"DIV",{class:!0});var ae=v(l);t=g(ae,"DIV",{class:!0});var W=v(t);r=g(W,"DIV",{class:!0});var H=v(r);s=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),_e(s)!=="svelte-8qexem"&&(s.textContent=o),u=V(H);for(let me=0;me<z.length;me+=1)z[me].l(H);H.forEach(h),a=V(W),j&&j.l(W),W.forEach(h),c=V(ae),f=g(ae,"DIV",{class:!0});var fe=v(f);K&&K.l(fe),_=V(fe),y=g(fe,"BUTTON",{class:!0});var be=v(y);ce(E.$$.fragment,be),k=S(be,`
        新建文件夹`),be.forEach(h),F=V(fe),ce(C.$$.fragment,fe),fe.forEach(h),ae.forEach(h),U=V(Q),O&&O.l(Q),J=V(Q),L&&L.l(Q),B=V(Q),b.l(Q),Q.forEach(h),$=V(M),X&&X.l(M),P=et(),this.h()},h(){d(s,"class","hover:text-blue-600 dark:hover:text-blue-400"),d(r,"class","flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400"),d(t,"class","flex items-center space-x-4"),d(y,"class","inline-flex items-center px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"),d(f,"class","flex items-center space-x-3"),d(l,"class","flex items-center justify-between"),d(e,"class","space-y-6")},m(M,Q){q(M,e,Q),i(e,l),i(l,t),i(t,r),i(r,s),i(r,u);for(let ae=0;ae<z.length;ae+=1)z[ae]&&z[ae].m(r,null);i(t,a),j&&j.m(t,null),i(l,c),i(l,f),K&&K.m(f,null),i(f,_),i(f,y),ie(E,y,null),i(y,k),i(f,F),ie(C,f,null),i(e,U),O&&O.m(e,null),i(e,J),L&&L.m(e,null),i(e,B),ee[p].m(e,null),q(M,$,Q),X&&X.m(M,Q),q(M,P,Q),T=!0,w||(Y=[ve(s,"click",n[26]),ve(y,"click",n[28])],w=!0)},p(M,Q){if(Q[0]&4098){G=je(M[1].split("/").filter(Pl));let H;for(H=0;H<G.length;H+=1){const fe=wl(M,G,H);z[H]?z[H].p(fe,Q):(z[H]=El(fe),z[H].c(),z[H].m(r,null))}for(;H<z.length;H+=1)z[H].d(1);z.length=G.length}M[1]!=="/"?j?(j.p(M,Q),Q[0]&2&&D(j,1)):(j=xl(M),j.c(),D(j,1),j.m(t,null)):j&&(we(),N(j,1,1,()=>{j=null}),Ee()),M[9]?K?K.p(M,Q):(K=Dl(M),K.c(),K.m(f,_)):K&&(K.d(1),K=null);const ae={};Q[0]&1&&(ae.username=M[0]),Q[0]&2&&(ae.currentPath=M[1]),C.$set(ae),M[5]?O?O.p(M,Q):(O=Cl(M),O.c(),O.m(e,J)):O&&(O.d(1),O=null),M[11]?L?L.p(M,Q):(L=Il(M),L.c(),L.m(e,B)):L&&(L.d(1),L=null);let W=p;p=de(M),p===W?ee[p].p(M,Q):(we(),N(ee[W],1,1,()=>{ee[W]=null}),Ee(),b=ee[p],b?b.p(M,Q):(b=ee[p]=ne[p](M),b.c()),D(b,1),b.m(e,null)),M[6]?X?X.p(M,Q):(X=Nl(M),X.c(),X.m(P.parentNode,P)):X&&(X.d(1),X=null)},i(M){T||(D(j),D(E.$$.fragment,M),D(C.$$.fragment,M),D(b),T=!0)},o(M){N(j),N(E.$$.fragment,M),N(C.$$.fragment,M),N(b),T=!1},d(M){M&&(h(e),h($),h(P)),_t(z,M),j&&j.d(),K&&K.d(),ue(E),ue(C),O&&O.d(),L&&L.d(),ee[p].d(),X&&X.d(M),w=!1,kt(Y)}}}function Tl(n){if(n===0)return"0 B";const e=1024,l=["B","KB","MB","GB"],t=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,t)).toFixed(2))+" "+l[t]}function St(n){return new Date(n).toLocaleDateString("zh-CN")}function Ml(n){return n.startsWith("image/")?"🖼️":n.startsWith("video/")?"🎥":n.startsWith("audio/")?"🎵":n.includes("pdf")?"📄":n.includes("text")?"📝":n.includes("json")?"📋":n.includes("csv")?"📊":n.includes("archive")||n.includes("zip")?"📦":n.includes("python")?"🐍":n.includes("javascript")?"📜":"📄"}const Pl=n=>n;function Ss(n,e,l){let{username:t}=e,{currentUser:r}=e;tr();let s="/",o=[],u=[],a=!1,c="",f=!1,_="",y=new Set,E=!1,k=!1,F=!1,C="";Kt(()=>{U()});async function U(){l(4,a=!0),l(5,c="");try{const x=await Be.request(`/api/personal-files/${t}/browse?path=${encodeURIComponent(s)}`);l(2,o=x.files||[]),l(3,u=x.folders||[])}catch(x){l(5,c=x instanceof Error?x.message:"加载文件失败"),console.error("Load files error:",x)}finally{l(4,a=!1)}}async function J(x){l(1,s=x),await U()}async function B(){if(s==="/")return;const x=s.split("/").filter(R=>R);x.pop(),l(1,s=x.length>0?"/"+x.join("/"):"/"),await U()}async function p(){if(!_.trim()||k)return;const x={name:_.trim(),parent_path:s,is_public:!1};l(10,k=!0),l(5,c="");try{await Be.request(`/api/personal-files/${t}/folders`,{method:"POST",body:x}),l(7,_=""),l(6,f=!1),await U(),l(11,C="文件夹创建成功"),setTimeout(()=>l(11,C=""),3e3)}catch(R){l(5,c=R instanceof Error?R.message:"创建文件夹失败"),console.error("Create folder error:",R)}finally{l(10,k=!1)}}async function b(x){if(!(!confirm("确定要删除这个文件吗？")||F)){F=!0,l(5,c="");try{await Be.request(`/api/personal-files/${t}/files/${x}`,{method:"DELETE"}),await U()}catch(R){l(5,c=R instanceof Error?R.message:"删除文件失败"),console.error("Delete file error:",R)}finally{F=!1}}}async function $(x){if(confirm("确定要删除这个文件夹吗？文件夹内的所有文件也会被删除。"))try{await Be.request(`/api/personal-files/${t}/folders/${x}`,{method:"DELETE"}),await U()}catch(R){l(5,c=R instanceof Error?R.message:"删除文件夹失败"),console.error("Delete folder error:",R)}}async function P(x,R){try{await Be.request(`/api/personal-files/${t}/files/${x}`,{method:"PUT",body:{is_public:!R}}),await U()}catch(te){l(5,c=te instanceof Error?te.message:"更新文件设置失败"),console.error("Toggle visibility error:",te)}}async function T(x,R){try{await Be.request(`/api/personal-files/${t}/folders/${x}`,{method:"PUT",body:{is_public:!R}}),await U(),l(11,C="文件夹可见性更新成功"),setTimeout(()=>l(11,C=""),3e3)}catch(te){l(5,c=te instanceof Error?te.message:"更新文件夹设置失败"),console.error("Toggle folder visibility error:",te)}}async function w(x,R){try{const te=await Be.request(`/api/personal-files/${t}/files/${x}/download`),ke=document.createElement("a");ke.href=te.download_url,ke.download=R,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke)}catch(te){l(5,c=te instanceof Error?te.message:"下载文件失败"),console.error("Download file error:",te)}}function Y(x){y.has(x)?y.delete(x):y.add(x),l(8,y=new Set(y)),l(9,E=y.size>0)}function G(){l(8,y=new Set(o.map(x=>x.id))),l(9,E=!0)}function z(){y.clear(),l(8,y=new Set),l(9,E=!1)}async function j(){if(y.size===0||!confirm(`确定要删除选中的 ${y.size} 个文件吗？`))return;const x=Array.from(y).map(R=>Be.request(`/api/personal-files/${t}/files/${R}`,{method:"DELETE"}));try{await Promise.all(x),z(),await U()}catch(R){l(5,c="批量删除失败"),console.error("Bulk delete error:",R)}}function K(x){const{success:R,failed:te,total:ke}=x.detail||{success:0,failed:0,total:0};U(),R>0?(l(11,C=`成功上传 ${R} 个文件${te>0?`，${te} 个失败`:""}`),setTimeout(()=>l(11,C=""),4e3)):te>0&&(l(5,c=`上传失败 ${te} 个文件`),setTimeout(()=>l(5,c=""),4e3))}const O=()=>J("/"),L=x=>J("/"+s.split("/").filter(R=>R).slice(0,x+1).join("/")),ne=()=>l(6,f=!0),ee=x=>J(x.path),de=x=>T(x.id,x.is_public),X=x=>$(x.id),M=x=>Y(x.id),Q=x=>w(x.id,x.filename),ae=x=>P(x.id,x.is_public),W=x=>b(x.id);function H(){_=this.value,l(7,_)}const fe=x=>x.key==="Enter"&&!k&&p(),be=x=>x.key==="Escape"&&l(6,f=!1),me=()=>{l(6,f=!1),l(7,_="")};return n.$$set=x=>{"username"in x&&l(0,t=x.username),"currentUser"in x&&l(25,r=x.currentUser)},[t,s,o,u,a,c,f,_,y,E,k,C,J,B,p,b,$,P,T,w,Y,G,z,j,K,r,O,L,ne,ee,de,X,M,Q,ae,W,H,fe,be,me]}class zs extends Ge{constructor(e){super(),We(this,e,Ss,As,Re,{username:0,currentUser:25},null,[-1,-1])}}function Al(n,e,l){const t=n.slice();return t[22]=e[l],t}function Sl(n,e,l){const t=n.slice();return t[29]=e[l][0],t[30]=e[l][1],t}function zl(n,e,l){const t=n.slice();return t[22]=e[l],t}function Ll(n,e,l){const t=n.slice();return t[22]=e[l],t}function Ls(n){var Qt,Yt;let e,l,t,r,s,o,u,a,c,f=(n[2].full_name||n[2].username)+"",_,y,E,k,F=n[2].username+"",C,U,J,B,p,b,$,P,T,w,Y,G,z,j=er(n[2].created_at)+"",K,O,L,ne,ee,de=n[2].public_repos_count+"",X,M,Q,ae="仓库",W,H,fe,be=n[2].followers_count+"",me,x,R,te="关注者",ke,xe,Te,ge=n[2].following_count+"",se,le,he,Pe="关注中",Ke,He,Me,Ue,$e,De,Ze,Je=n[2].public_repos_count+"",tt,yt,lt,$t,ct,zt,Ct,Lt,Xe,jt,xt=n[2].following_count+"",It,Ot,Vt,qt,Ht,mt,Ae,Se,Oe,Rt,Zt;o=new gr({props:{user:n[2],size:"xl"}});let ze=n[2].bio&&jl(n),Ce=n[1]&&n[1].username!==n[2].username&&Ol(n),Ie=n[2].location&&ql(n),Ve=n[2].website&&Hl(n);w=new yr({props:{class:"h-4 w-4"}});let Le=n[3]&&n[3].repositories&&Rl(n),Fe=(((Qt=n[1])==null?void 0:Qt.username)===n[0]||((Yt=n[1])==null?void 0:Yt.is_admin))&&Gl(n);const Jt=[Ws,Gs,Rs,Hs,qs],ft=[];function Xt(Z,pe){return Z[9]==="repositories"?0:Z[9]==="stars"?1:Z[9]==="following"?2:Z[9]==="personal-files"?3:Z[9]==="storage"&&Z[6]?4:-1}return~(Ae=Xt(n))&&(Se=ft[Ae]=Jt[Ae](n)),{c(){e=m("div"),l=m("div"),t=m("div"),r=m("div"),s=m("div"),oe(o.$$.fragment),u=I(),a=m("div"),c=m("h1"),_=A(f),y=I(),E=m("p"),k=A("@"),C=A(F),U=I(),ze&&ze.c(),J=I(),B=m("div"),Ce&&Ce.c(),p=I(),b=m("div"),Ie&&Ie.c(),$=I(),Ve&&Ve.c(),P=I(),T=m("div"),oe(w.$$.fragment),Y=I(),G=m("span"),z=A("加入于 "),K=A(j),O=I(),L=m("div"),ne=m("div"),ee=m("div"),X=A(de),M=I(),Q=m("div"),Q.textContent=ae,W=I(),H=m("div"),fe=m("div"),me=A(be),x=I(),R=m("div"),R.textContent=te,ke=I(),xe=m("div"),Te=m("div"),se=A(ge),le=I(),he=m("div"),he.textContent=Pe,Ke=I(),Le&&Le.c(),He=I(),Me=m("div"),Ue=m("div"),$e=m("nav"),De=m("button"),Ze=A("仓库 ("),tt=A(Je),yt=A(")"),$t=I(),ct=m("button"),zt=A("星标仓库"),Lt=I(),Xe=m("button"),jt=A("关注中 ("),It=A(xt),Ot=A(")"),qt=I(),Fe&&Fe.c(),Ht=I(),mt=m("div"),Se&&Se.c(),this.h()},l(Z){e=g(Z,"DIV",{class:!0});var pe=v(e);l=g(pe,"DIV",{class:!0});var Dt=v(l);t=g(Dt,"DIV",{class:!0});var Qe=v(t);r=g(Qe,"DIV",{class:!0});var gt=v(r);s=g(gt,"DIV",{class:!0});var vt=v(s);ce(o.$$.fragment,vt),u=V(vt),a=g(vt,"DIV",{});var wt=v(a);c=g(wt,"H1",{class:!0});var el=v(c);_=S(el,f),el.forEach(h),y=V(wt),E=g(wt,"P",{class:!0});var Gt=v(E);k=S(Gt,"@"),C=S(Gt,F),Gt.forEach(h),U=V(wt),ze&&ze.l(wt),wt.forEach(h),vt.forEach(h),J=V(gt),B=g(gt,"DIV",{class:!0});var tl=v(B);Ce&&Ce.l(tl),tl.forEach(h),gt.forEach(h),p=V(Qe),b=g(Qe,"DIV",{class:!0});var Et=v(b);Ie&&Ie.l(Et),$=V(Et),Ve&&Ve.l(Et),P=V(Et),T=g(Et,"DIV",{class:!0});var Ft=v(T);ce(w.$$.fragment,Ft),Y=V(Ft),G=g(Ft,"SPAN",{});var Wt=v(G);z=S(Wt,"加入于 "),K=S(Wt,j),Wt.forEach(h),Ft.forEach(h),Et.forEach(h),O=V(Qe),L=g(Qe,"DIV",{class:!0});var dt=v(L);ne=g(dt,"DIV",{class:!0});var Ut=v(ne);ee=g(Ut,"DIV",{class:!0});var ll=v(ee);X=S(ll,de),ll.forEach(h),M=V(Ut),Q=g(Ut,"DIV",{class:!0,"data-svelte-h":!0}),_e(Q)!=="svelte-eyuuj7"&&(Q.textContent=ae),Ut.forEach(h),W=V(dt),H=g(dt,"DIV",{class:!0});var Bt=v(H);fe=g(Bt,"DIV",{class:!0});var rl=v(fe);me=S(rl,be),rl.forEach(h),x=V(Bt),R=g(Bt,"DIV",{class:!0,"data-svelte-h":!0}),_e(R)!=="svelte-1fruwt"&&(R.textContent=te),Bt.forEach(h),ke=V(dt),xe=g(dt,"DIV",{class:!0});var Nt=v(xe);Te=g(Nt,"DIV",{class:!0});var sl=v(Te);se=S(sl,ge),sl.forEach(h),le=V(Nt),he=g(Nt,"DIV",{class:!0,"data-svelte-h":!0}),_e(he)!=="svelte-cco891"&&(he.textContent=Pe),Nt.forEach(h),Ke=V(dt),Le&&Le.l(dt),dt.forEach(h),Qe.forEach(h),Dt.forEach(h),He=V(pe),Me=g(pe,"DIV",{class:!0});var Tt=v(Me);Ue=g(Tt,"DIV",{class:!0});var nl=v(Ue);$e=g(nl,"NAV",{class:!0,"aria-label":!0});var ht=v($e);De=g(ht,"BUTTON",{class:!0});var Mt=v(De);Ze=S(Mt,"仓库 ("),tt=S(Mt,Je),yt=S(Mt,")"),Mt.forEach(h),$t=V(ht),ct=g(ht,"BUTTON",{class:!0});var al=v(ct);zt=S(al,"星标仓库"),al.forEach(h),Lt=V(ht),Xe=g(ht,"BUTTON",{class:!0});var Pt=v(Xe);jt=S(Pt,"关注中 ("),It=S(Pt,xt),Ot=S(Pt,")"),Pt.forEach(h),qt=V(ht),Fe&&Fe.l(ht),ht.forEach(h),nl.forEach(h),Ht=V(Tt),mt=g(Tt,"DIV",{class:!0});var ol=v(mt);Se&&Se.l(ol),ol.forEach(h),Tt.forEach(h),pe.forEach(h),this.h()},h(){d(c,"class","text-2xl font-bold text-gray-900 dark:text-white"),d(E,"class","text-gray-600 dark:text-gray-300"),d(s,"class","flex items-center space-x-4"),d(B,"class","mt-4 sm:mt-0 flex items-center space-x-3"),d(r,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between"),d(T,"class","flex items-center space-x-1"),d(b,"class","mt-4 flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400"),d(ee,"class","text-2xl font-bold text-gray-900 dark:text-white"),d(Q,"class","text-sm text-gray-600 dark:text-gray-400"),d(ne,"class","text-center"),d(fe,"class","text-2xl font-bold text-gray-900 dark:text-white"),d(R,"class","text-sm text-gray-600 dark:text-gray-400"),d(H,"class","text-center"),d(Te,"class","text-2xl font-bold text-gray-900 dark:text-white"),d(he,"class","text-sm text-gray-600 dark:text-gray-400"),d(xe,"class","text-center"),d(L,"class","mt-6 grid grid-cols-2 sm:grid-cols-4 gap-4"),d(t,"class","p-6"),d(l,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6"),d(De,"class",lt="py-4 px-1 border-b-2 font-medium text-sm "+(n[9]==="repositories"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")),d(ct,"class",Ct="py-4 px-1 border-b-2 font-medium text-sm "+(n[9]==="stars"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")),d(Xe,"class",Vt="py-4 px-1 border-b-2 font-medium text-sm "+(n[9]==="following"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")),d($e,"class","flex space-x-8 px-6"),d($e,"aria-label","Tabs"),d(Ue,"class","border-b border-gray-200 dark:border-gray-700"),d(mt,"class","p-6"),d(Me,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"),d(e,"class","max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(Z,pe){q(Z,e,pe),i(e,l),i(l,t),i(t,r),i(r,s),ie(o,s,null),i(s,u),i(s,a),i(a,c),i(c,_),i(a,y),i(a,E),i(E,k),i(E,C),i(a,U),ze&&ze.m(a,null),i(r,J),i(r,B),Ce&&Ce.m(B,null),i(t,p),i(t,b),Ie&&Ie.m(b,null),i(b,$),Ve&&Ve.m(b,null),i(b,P),i(b,T),ie(w,T,null),i(T,Y),i(T,G),i(G,z),i(G,K),i(t,O),i(t,L),i(L,ne),i(ne,ee),i(ee,X),i(ne,M),i(ne,Q),i(L,W),i(L,H),i(H,fe),i(fe,me),i(H,x),i(H,R),i(L,ke),i(L,xe),i(xe,Te),i(Te,se),i(xe,le),i(xe,he),i(L,Ke),Le&&Le.m(L,null),i(e,He),i(e,Me),i(Me,Ue),i(Ue,$e),i($e,De),i(De,Ze),i(De,tt),i(De,yt),i($e,$t),i($e,ct),i(ct,zt),i($e,Lt),i($e,Xe),i(Xe,jt),i(Xe,It),i(Xe,Ot),i($e,qt),Fe&&Fe.m($e,null),i(Me,Ht),i(Me,mt),~Ae&&ft[Ae].m(mt,null),Oe=!0,Rt||(Zt=[ve(De,"click",n[14]),ve(ct,"click",n[15]),ve(Xe,"click",n[16])],Rt=!0)},p(Z,pe){var gt,vt;const Dt={};pe[0]&4&&(Dt.user=Z[2]),o.$set(Dt),(!Oe||pe[0]&4)&&f!==(f=(Z[2].full_name||Z[2].username)+"")&&re(_,f),(!Oe||pe[0]&4)&&F!==(F=Z[2].username+"")&&re(C,F),Z[2].bio?ze?ze.p(Z,pe):(ze=jl(Z),ze.c(),ze.m(a,null)):ze&&(ze.d(1),ze=null),Z[1]&&Z[1].username!==Z[2].username?Ce?(Ce.p(Z,pe),pe[0]&6&&D(Ce,1)):(Ce=Ol(Z),Ce.c(),D(Ce,1),Ce.m(B,null)):Ce&&(we(),N(Ce,1,1,()=>{Ce=null}),Ee()),Z[2].location?Ie?(Ie.p(Z,pe),pe[0]&4&&D(Ie,1)):(Ie=ql(Z),Ie.c(),D(Ie,1),Ie.m(b,$)):Ie&&(we(),N(Ie,1,1,()=>{Ie=null}),Ee()),Z[2].website?Ve?(Ve.p(Z,pe),pe[0]&4&&D(Ve,1)):(Ve=Hl(Z),Ve.c(),D(Ve,1),Ve.m(b,P)):Ve&&(we(),N(Ve,1,1,()=>{Ve=null}),Ee()),(!Oe||pe[0]&4)&&j!==(j=er(Z[2].created_at)+"")&&re(K,j),(!Oe||pe[0]&4)&&de!==(de=Z[2].public_repos_count+"")&&re(X,de),(!Oe||pe[0]&4)&&be!==(be=Z[2].followers_count+"")&&re(me,be),(!Oe||pe[0]&4)&&ge!==(ge=Z[2].following_count+"")&&re(se,ge),Z[3]&&Z[3].repositories?Le?Le.p(Z,pe):(Le=Rl(Z),Le.c(),Le.m(L,null)):Le&&(Le.d(1),Le=null),(!Oe||pe[0]&4)&&Je!==(Je=Z[2].public_repos_count+"")&&re(tt,Je),(!Oe||pe[0]&512&&lt!==(lt="py-4 px-1 border-b-2 font-medium text-sm "+(Z[9]==="repositories"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")))&&d(De,"class",lt),(!Oe||pe[0]&512&&Ct!==(Ct="py-4 px-1 border-b-2 font-medium text-sm "+(Z[9]==="stars"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")))&&d(ct,"class",Ct),(!Oe||pe[0]&4)&&xt!==(xt=Z[2].following_count+"")&&re(It,xt),(!Oe||pe[0]&512&&Vt!==(Vt="py-4 px-1 border-b-2 font-medium text-sm "+(Z[9]==="following"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")))&&d(Xe,"class",Vt),((gt=Z[1])==null?void 0:gt.username)===Z[0]||(vt=Z[1])!=null&&vt.is_admin?Fe?(Fe.p(Z,pe),pe[0]&3&&D(Fe,1)):(Fe=Gl(Z),Fe.c(),D(Fe,1),Fe.m($e,null)):Fe&&(we(),N(Fe,1,1,()=>{Fe=null}),Ee());let Qe=Ae;Ae=Xt(Z),Ae===Qe?~Ae&&ft[Ae].p(Z,pe):(Se&&(we(),N(ft[Qe],1,1,()=>{ft[Qe]=null}),Ee()),~Ae?(Se=ft[Ae],Se?Se.p(Z,pe):(Se=ft[Ae]=Jt[Ae](Z),Se.c()),D(Se,1),Se.m(mt,null)):Se=null)},i(Z){Oe||(D(o.$$.fragment,Z),D(Ce),D(Ie),D(Ve),D(w.$$.fragment,Z),D(Fe),D(Se),Oe=!0)},o(Z){N(o.$$.fragment,Z),N(Ce),N(Ie),N(Ve),N(w.$$.fragment,Z),N(Fe),N(Se),Oe=!1},d(Z){Z&&h(e),ue(o),ze&&ze.d(),Ce&&Ce.d(),Ie&&Ie.d(),Ve&&Ve.d(),ue(w),Le&&Le.d(),Fe&&Fe.d(),~Ae&&ft[Ae].d(),Rt=!1,kt(Zt)}}}function js(n){let e,l,t,r,s='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',o,u,a,c="加载失败",f,_,y;return{c(){e=m("div"),l=m("div"),t=m("div"),r=m("div"),r.innerHTML=s,o=I(),u=m("div"),a=m("h3"),a.textContent=c,f=I(),_=m("p"),y=A(n[8]),this.h()},l(E){e=g(E,"DIV",{class:!0});var k=v(e);l=g(k,"DIV",{class:!0});var F=v(l);t=g(F,"DIV",{class:!0});var C=v(t);r=g(C,"DIV",{class:!0,"data-svelte-h":!0}),_e(r)!=="svelte-5qo1j1"&&(r.innerHTML=s),o=V(C),u=g(C,"DIV",{class:!0});var U=v(u);a=g(U,"H3",{class:!0,"data-svelte-h":!0}),_e(a)!=="svelte-k8likp"&&(a.textContent=c),f=V(U),_=g(U,"P",{class:!0});var J=v(_);y=S(J,n[8]),J.forEach(h),U.forEach(h),C.forEach(h),F.forEach(h),k.forEach(h),this.h()},h(){d(r,"class","flex-shrink-0"),d(a,"class","text-sm font-medium text-red-800 dark:text-red-200"),d(_,"class","mt-1 text-sm text-red-700 dark:text-red-300"),d(u,"class","ml-3"),d(t,"class","flex"),d(l,"class","bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6"),d(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(E,k){q(E,e,k),i(e,l),i(l,t),i(t,r),i(t,o),i(t,u),i(u,a),i(u,f),i(u,_),i(_,y)},p(E,k){k[0]&256&&re(y,E[8])},i:qe,o:qe,d(E){E&&h(e)}}}function Os(n){let e,l,t;return l=new rr({props:{size:"lg"}}),{c(){e=m("div"),oe(l.$$.fragment),this.h()},l(r){e=g(r,"DIV",{class:!0});var s=v(e);ce(l.$$.fragment,s),s.forEach(h),this.h()},h(){d(e,"class","flex items-center justify-center py-12")},m(r,s){q(r,e,s),ie(l,e,null),t=!0},p:qe,i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){N(l.$$.fragment,r),t=!1},d(r){r&&h(e),ue(l)}}}function jl(n){let e,l=n[2].bio+"",t;return{c(){e=m("p"),t=A(l),this.h()},l(r){e=g(r,"P",{class:!0});var s=v(e);t=S(s,l),s.forEach(h),this.h()},h(){d(e,"class","mt-2 text-gray-700 dark:text-gray-300")},m(r,s){q(r,e,s),i(e,t)},p(r,s){s[0]&4&&l!==(l=r[2].bio+"")&&re(t,l)},d(r){r&&h(e)}}}function Ol(n){let e,l;return e=new _r({props:{type:"follow",active:n[10]}}),e.$on("click",n[13]),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},p(t,r){const s={};r[0]&1024&&(s.active=t[10]),e.$set(s)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ql(n){let e,l,t,r,s=n[2].location+"",o,u;return l=new Qr({props:{class:"h-4 w-4"}}),{c(){e=m("div"),oe(l.$$.fragment),t=I(),r=m("span"),o=A(s),this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);ce(l.$$.fragment,c),t=V(c),r=g(c,"SPAN",{});var f=v(r);o=S(f,s),f.forEach(h),c.forEach(h),this.h()},h(){d(e,"class","flex items-center space-x-1")},m(a,c){q(a,e,c),ie(l,e,null),i(e,t),i(e,r),i(r,o),u=!0},p(a,c){(!u||c[0]&4)&&s!==(s=a[2].location+"")&&re(o,s)},i(a){u||(D(l.$$.fragment,a),u=!0)},o(a){N(l.$$.fragment,a),u=!1},d(a){a&&h(e),ue(l)}}}function Hl(n){let e,l,t,r,s=n[2].website+"",o,u,a;return l=new wr({props:{class:"h-4 w-4"}}),{c(){e=m("div"),oe(l.$$.fragment),t=I(),r=m("a"),o=A(s),this.h()},l(c){e=g(c,"DIV",{class:!0});var f=v(e);ce(l.$$.fragment,f),t=V(f),r=g(f,"A",{href:!0,target:!0,rel:!0,class:!0});var _=v(r);o=S(_,s),_.forEach(h),f.forEach(h),this.h()},h(){d(r,"href",u=n[2].website),d(r,"target","_blank"),d(r,"rel","noopener noreferrer"),d(r,"class","text-blue-600 dark:text-blue-400 hover:underline"),d(e,"class","flex items-center space-x-1")},m(c,f){q(c,e,f),ie(l,e,null),i(e,t),i(e,r),i(r,o),a=!0},p(c,f){(!a||f[0]&4)&&s!==(s=c[2].website+"")&&re(o,s),(!a||f[0]&4&&u!==(u=c[2].website))&&d(r,"href",u)},i(c){a||(D(l.$$.fragment,c),a=!0)},o(c){N(l.$$.fragment,c),a=!1},d(c){c&&h(e),ue(l)}}}function Rl(n){let e,l,t=(n[3].repositories.total_stars||0)+"",r,s,o,u="获得星标";return{c(){e=m("div"),l=m("div"),r=A(t),s=I(),o=m("div"),o.textContent=u,this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);l=g(c,"DIV",{class:!0});var f=v(l);r=S(f,t),f.forEach(h),s=V(c),o=g(c,"DIV",{class:!0,"data-svelte-h":!0}),_e(o)!=="svelte-ibhx41"&&(o.textContent=u),c.forEach(h),this.h()},h(){d(l,"class","text-2xl font-bold text-gray-900 dark:text-white"),d(o,"class","text-sm text-gray-600 dark:text-gray-400"),d(e,"class","text-center")},m(a,c){q(a,e,c),i(e,l),i(l,r),i(e,s),i(e,o)},p(a,c){c[0]&8&&t!==(t=(a[3].repositories.total_stars||0)+"")&&re(r,t)},d(a){a&&h(e)}}}function Gl(n){let e,l,t,r,s,o,u,a,c;l=new or({props:{class:"h-4 w-4 inline mr-1"}});let f=n[6]&&Wl(n);return{c(){e=m("button"),oe(l.$$.fragment),t=A(`
                个人文件`),s=I(),f&&f.c(),o=et(),this.h()},l(_){e=g(_,"BUTTON",{class:!0});var y=v(e);ce(l.$$.fragment,y),t=S(y,`
                个人文件`),y.forEach(h),s=V(_),f&&f.l(_),o=et(),this.h()},h(){d(e,"class",r="py-4 px-1 border-b-2 font-medium text-sm "+(n[9]==="personal-files"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"))},m(_,y){q(_,e,y),ie(l,e,null),i(e,t),q(_,s,y),f&&f.m(_,y),q(_,o,y),u=!0,a||(c=ve(e,"click",n[17]),a=!0)},p(_,y){(!u||y[0]&512&&r!==(r="py-4 px-1 border-b-2 font-medium text-sm "+(_[9]==="personal-files"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")))&&d(e,"class",r),_[6]?f?(f.p(_,y),y[0]&64&&D(f,1)):(f=Wl(_),f.c(),D(f,1),f.m(o.parentNode,o)):f&&(we(),N(f,1,1,()=>{f=null}),Ee())},i(_){u||(D(l.$$.fragment,_),D(f),u=!0)},o(_){N(l.$$.fragment,_),N(f),u=!1},d(_){_&&(h(e),h(s),h(o)),ue(l),f&&f.d(_),a=!1,c()}}}function Wl(n){let e,l,t,r,s,o,u;return l=new or({props:{class:"h-4 w-4 inline mr-1"}}),{c(){e=m("button"),oe(l.$$.fragment),t=A(`
                  存储空间`),this.h()},l(a){e=g(a,"BUTTON",{class:!0});var c=v(e);ce(l.$$.fragment,c),t=S(c,`
                  存储空间`),c.forEach(h),this.h()},h(){d(e,"class",r="py-4 px-1 border-b-2 font-medium text-sm "+(n[9]==="storage"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"))},m(a,c){q(a,e,c),ie(l,e,null),i(e,t),s=!0,o||(u=ve(e,"click",n[18]),o=!0)},p(a,c){(!s||c[0]&512&&r!==(r="py-4 px-1 border-b-2 font-medium text-sm "+(a[9]==="storage"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300")))&&d(e,"class",r)},i(a){s||(D(l.$$.fragment,a),s=!0)},o(a){N(l.$$.fragment,a),s=!1},d(a){a&&h(e),ue(l),o=!1,u()}}}function qs(n){let e,l,t,r="存储概览",s,o,u,a,c,f=Ye(n[6].storage_used)+"",_,y,E=Ye(n[6].storage_quota)+"",k,F,C,U=n[6].storage_usage_percentage.toFixed(1)+"",J,B,p,b,$,P,T,w,Y,G,z=(n[6].total_repositories||0)+"",j,K,O,L="仓库数量",ne,ee,de,X=(n[6].total_files||0)+"",M,Q,ae,W="文件数量",H,fe,be,me=Ye(n[6].storage_quota-n[6].storage_used)+"",x,R,te,ke="剩余空间",xe,Te,ge=n[6].storage_breakdown&&Kl(n),se=n[6].largest_repositories&&n[6].largest_repositories.length>0&&Jl(n);return{c(){e=m("div"),l=m("div"),t=m("h3"),t.textContent=r,s=I(),o=m("div"),u=m("div"),a=m("span"),c=A("已使用: "),_=A(f),y=A(" / "),k=A(E),F=I(),C=m("span"),J=A(U),B=A("%"),p=I(),b=m("div"),$=m("div"),T=I(),w=m("div"),Y=m("div"),G=m("div"),j=A(z),K=I(),O=m("div"),O.textContent=L,ne=I(),ee=m("div"),de=m("div"),M=A(X),Q=I(),ae=m("div"),ae.textContent=W,H=I(),fe=m("div"),be=m("div"),x=A(me),R=I(),te=m("div"),te.textContent=ke,xe=I(),ge&&ge.c(),Te=I(),se&&se.c(),this.h()},l(le){e=g(le,"DIV",{class:!0});var he=v(e);l=g(he,"DIV",{class:!0});var Pe=v(l);t=g(Pe,"H3",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-10f6oqb"&&(t.textContent=r),s=V(Pe),o=g(Pe,"DIV",{class:!0});var Ke=v(o);u=g(Ke,"DIV",{class:!0});var He=v(u);a=g(He,"SPAN",{class:!0});var Me=v(a);c=S(Me,"已使用: "),_=S(Me,f),y=S(Me," / "),k=S(Me,E),Me.forEach(h),F=V(He),C=g(He,"SPAN",{class:!0});var Ue=v(C);J=S(Ue,U),B=S(Ue,"%"),Ue.forEach(h),He.forEach(h),p=V(Ke),b=g(Ke,"DIV",{class:!0});var $e=v(b);$=g($e,"DIV",{class:!0,style:!0}),v($).forEach(h),$e.forEach(h),Ke.forEach(h),T=V(Pe),w=g(Pe,"DIV",{class:!0});var De=v(w);Y=g(De,"DIV",{class:!0});var Ze=v(Y);G=g(Ze,"DIV",{class:!0});var Je=v(G);j=S(Je,z),Je.forEach(h),K=V(Ze),O=g(Ze,"DIV",{class:!0,"data-svelte-h":!0}),_e(O)!=="svelte-yw8pie"&&(O.textContent=L),Ze.forEach(h),ne=V(De),ee=g(De,"DIV",{class:!0});var tt=v(ee);de=g(tt,"DIV",{class:!0});var yt=v(de);M=S(yt,X),yt.forEach(h),Q=V(tt),ae=g(tt,"DIV",{class:!0,"data-svelte-h":!0}),_e(ae)!=="svelte-ojicqd"&&(ae.textContent=W),tt.forEach(h),H=V(De),fe=g(De,"DIV",{class:!0});var lt=v(fe);be=g(lt,"DIV",{class:!0});var $t=v(be);x=S($t,me),$t.forEach(h),R=V(lt),te=g(lt,"DIV",{class:!0,"data-svelte-h":!0}),_e(te)!=="svelte-1jp0qvt"&&(te.textContent=ke),lt.forEach(h),De.forEach(h),Pe.forEach(h),xe=V(he),ge&&ge.l(he),Te=V(he),se&&se.l(he),he.forEach(h),this.h()},h(){d(t,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),d(a,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),d(C,"class","text-sm text-gray-500 dark:text-gray-400"),d(u,"class","flex items-center justify-between mb-2"),d($,"class",P="h-2 rounded-full "+(n[6].storage_usage_percentage>90?"bg-red-600":n[6].storage_usage_percentage>70?"bg-yellow-500":"bg-blue-600")),At($,"width",Math.min(n[6].storage_usage_percentage,100)+"%"),d(b,"class","w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"),d(o,"class","mb-4"),d(G,"class","text-xl font-bold text-gray-900 dark:text-white"),d(O,"class","text-sm text-gray-600 dark:text-gray-400"),d(Y,"class","text-center"),d(de,"class","text-xl font-bold text-gray-900 dark:text-white"),d(ae,"class","text-sm text-gray-600 dark:text-gray-400"),d(ee,"class","text-center"),d(be,"class","text-xl font-bold text-gray-900 dark:text-white"),d(te,"class","text-sm text-gray-600 dark:text-gray-400"),d(fe,"class","text-center"),d(w,"class","grid grid-cols-1 sm:grid-cols-3 gap-4"),d(l,"class","bg-gray-50 dark:bg-gray-900 rounded-lg p-6 svelte-1v5vq1c"),d(e,"class","space-y-6")},m(le,he){q(le,e,he),i(e,l),i(l,t),i(l,s),i(l,o),i(o,u),i(u,a),i(a,c),i(a,_),i(a,y),i(a,k),i(u,F),i(u,C),i(C,J),i(C,B),i(o,p),i(o,b),i(b,$),i(l,T),i(l,w),i(w,Y),i(Y,G),i(G,j),i(Y,K),i(Y,O),i(w,ne),i(w,ee),i(ee,de),i(de,M),i(ee,Q),i(ee,ae),i(w,H),i(w,fe),i(fe,be),i(be,x),i(fe,R),i(fe,te),i(e,xe),ge&&ge.m(e,null),i(e,Te),se&&se.m(e,null)},p(le,he){he[0]&64&&f!==(f=Ye(le[6].storage_used)+"")&&re(_,f),he[0]&64&&E!==(E=Ye(le[6].storage_quota)+"")&&re(k,E),he[0]&64&&U!==(U=le[6].storage_usage_percentage.toFixed(1)+"")&&re(J,U),he[0]&64&&P!==(P="h-2 rounded-full "+(le[6].storage_usage_percentage>90?"bg-red-600":le[6].storage_usage_percentage>70?"bg-yellow-500":"bg-blue-600"))&&d($,"class",P),he[0]&64&&At($,"width",Math.min(le[6].storage_usage_percentage,100)+"%"),he[0]&64&&z!==(z=(le[6].total_repositories||0)+"")&&re(j,z),he[0]&64&&X!==(X=(le[6].total_files||0)+"")&&re(M,X),he[0]&64&&me!==(me=Ye(le[6].storage_quota-le[6].storage_used)+"")&&re(x,me),le[6].storage_breakdown?ge?ge.p(le,he):(ge=Kl(le),ge.c(),ge.m(e,Te)):ge&&(ge.d(1),ge=null),le[6].largest_repositories&&le[6].largest_repositories.length>0?se?se.p(le,he):(se=Jl(le),se.c(),se.m(e,null)):se&&(se.d(1),se=null)},i:qe,o:qe,d(le){le&&h(e),ge&&ge.d(),se&&se.d()}}}function Hs(n){let e,l;return e=new zs({props:{username:n[0],currentUser:n[1]}}),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},p(t,r){const s={};r[0]&1&&(s.username=t[0]),r[0]&2&&(s.currentUser=t[1]),e.$set(s)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Rs(n){let e,l,t,r,s,o="关注列表功能开发中...",u;return t=new is({props:{class:"h-12 w-12 mx-auto mb-4"}}),{c(){e=m("div"),l=m("div"),oe(t.$$.fragment),r=I(),s=m("p"),s.textContent=o,this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);l=g(c,"DIV",{class:!0});var f=v(l);ce(t.$$.fragment,f),r=V(f),s=g(f,"P",{"data-svelte-h":!0}),_e(s)!=="svelte-1v1cxns"&&(s.textContent=o),f.forEach(h),c.forEach(h),this.h()},h(){d(l,"class","text-gray-500 dark:text-gray-400"),d(e,"class","text-center py-12")},m(a,c){q(a,e,c),i(e,l),ie(t,l,null),i(l,r),i(l,s),u=!0},p:qe,i(a){u||(D(t.$$.fragment,a),u=!0)},o(a){N(t.$$.fragment,a),u=!1},d(a){a&&h(e),ue(t)}}}function Gs(n){let e,l,t,r;const s=[Js,Zs,Ks],o=[];function u(a,c){return a[11]?0:a[5].length>0?1:2}return e=u(n),l=o[e]=s[e](n),{c(){l.c(),t=et()},l(a){l.l(a),t=et()},m(a,c){o[e].m(a,c),q(a,t,c),r=!0},p(a,c){let f=e;e=u(a),e===f?o[e].p(a,c):(we(),N(o[f],1,1,()=>{o[f]=null}),Ee(),l=o[e],l?l.p(a,c):(l=o[e]=s[e](a),l.c()),D(l,1),l.m(t.parentNode,t))},i(a){r||(D(l),r=!0)},o(a){N(l),r=!1},d(a){a&&h(t),o[e].d(a)}}}function Ws(n){let e,l,t,r;const s=[Qs,Xs],o=[];function u(a,c){return a[4].length>0?0:1}return e=u(n),l=o[e]=s[e](n),{c(){l.c(),t=et()},l(a){l.l(a),t=et()},m(a,c){o[e].m(a,c),q(a,t,c),r=!0},p(a,c){let f=e;e=u(a),e===f?o[e].p(a,c):(we(),N(o[f],1,1,()=>{o[f]=null}),Ee(),l=o[e],l?l.p(a,c):(l=o[e]=s[e](a),l.c()),D(l,1),l.m(t.parentNode,t))},i(a){r||(D(l),r=!0)},o(a){N(l),r=!1},d(a){a&&h(t),o[e].d(a)}}}function Kl(n){let e,l,t="按文件类型统计",r,s,o=je(Object.entries(n[6].storage_breakdown)),u=[];for(let a=0;a<o.length;a+=1)u[a]=Zl(Sl(n,o,a));return{c(){e=m("div"),l=m("h3"),l.textContent=t,r=I(),s=m("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);l=g(c,"H3",{class:!0,"data-svelte-h":!0}),_e(l)!=="svelte-74sywv"&&(l.textContent=t),r=V(c),s=g(c,"DIV",{class:!0});var f=v(s);for(let _=0;_<u.length;_+=1)u[_].l(f);f.forEach(h),c.forEach(h),this.h()},h(){d(l,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),d(s,"class","space-y-3"),d(e,"class","bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6")},m(a,c){q(a,e,c),i(e,l),i(e,r),i(e,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(s,null)},p(a,c){if(c[0]&64){o=je(Object.entries(a[6].storage_breakdown));let f;for(f=0;f<o.length;f+=1){const _=Sl(a,o,f);u[f]?u[f].p(_,c):(u[f]=Zl(_),u[f].c(),u[f].m(s,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}},d(a){a&&h(e),_t(u,a)}}}function Zl(n){var B,p;let e,l,t,r,s,o=(n[29]==="other"?"其他":n[29].toUpperCase())+"",u,a,c,f,_=Ye(((B=n[30])==null?void 0:B.total_size)||0)+"",y,E,k,F=(((p=n[30])==null?void 0:p.count)||0)+"",C,U,J;return{c(){e=m("div"),l=m("div"),t=m("div"),r=I(),s=m("span"),u=A(o),a=I(),c=m("div"),f=m("div"),y=A(_),E=I(),k=m("div"),C=A(F),U=A(" 个文件"),J=I(),this.h()},l(b){e=g(b,"DIV",{class:!0});var $=v(e);l=g($,"DIV",{class:!0});var P=v(l);t=g(P,"DIV",{class:!0}),v(t).forEach(h),r=V(P),s=g(P,"SPAN",{class:!0});var T=v(s);u=S(T,o),T.forEach(h),P.forEach(h),a=V($),c=g($,"DIV",{class:!0});var w=v(c);f=g(w,"DIV",{class:!0});var Y=v(f);y=S(Y,_),Y.forEach(h),E=V(w),k=g(w,"DIV",{class:!0});var G=v(k);C=S(G,F),U=S(G," 个文件"),G.forEach(h),w.forEach(h),J=V($),$.forEach(h),this.h()},h(){d(t,"class","w-3 h-3 bg-blue-500 rounded-full"),d(s,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),d(l,"class","flex items-center space-x-2"),d(f,"class","text-sm font-medium text-gray-900 dark:text-white"),d(k,"class","text-xs text-gray-500 dark:text-gray-400"),d(c,"class","text-right"),d(e,"class","flex items-center justify-between")},m(b,$){q(b,e,$),i(e,l),i(l,t),i(l,r),i(l,s),i(s,u),i(e,a),i(e,c),i(c,f),i(f,y),i(c,E),i(c,k),i(k,C),i(k,U),i(e,J)},p(b,$){var P,T;$[0]&64&&o!==(o=(b[29]==="other"?"其他":b[29].toUpperCase())+"")&&re(u,o),$[0]&64&&_!==(_=Ye(((P=b[30])==null?void 0:P.total_size)||0)+"")&&re(y,_),$[0]&64&&F!==(F=(((T=b[30])==null?void 0:T.count)||0)+"")&&re(C,F)},d(b){b&&h(e)}}}function Jl(n){let e,l,t="占用空间最大的仓库",r,s,o=je(n[6].largest_repositories),u=[];for(let a=0;a<o.length;a+=1)u[a]=Xl(Al(n,o,a));return{c(){e=m("div"),l=m("h3"),l.textContent=t,r=I(),s=m("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);l=g(c,"H3",{class:!0,"data-svelte-h":!0}),_e(l)!=="svelte-8h4ykk"&&(l.textContent=t),r=V(c),s=g(c,"DIV",{class:!0});var f=v(s);for(let _=0;_<u.length;_+=1)u[_].l(f);f.forEach(h),c.forEach(h),this.h()},h(){d(l,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),d(s,"class","space-y-3"),d(e,"class","bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6")},m(a,c){q(a,e,c),i(e,l),i(e,r),i(e,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(s,null)},p(a,c){if(c[0]&64){o=je(a[6].largest_repositories);let f;for(f=0;f<o.length;f+=1){const _=Al(a,o,f);u[f]?u[f].p(_,c):(u[f]=Xl(_),u[f].c(),u[f].m(s,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}},d(a){a&&h(e),_t(u,a)}}}function Xl(n){let e,l,t,r=n[22].name+"",s,o,u,a=n[22].type+"",c,f,_=n[22].files+"",y,E,k,F,C=Ye(n[22].size)+"",U,J;return{c(){e=m("div"),l=m("div"),t=m("div"),s=A(r),o=I(),u=m("div"),c=A(a),f=A(" • "),y=A(_),E=A(" 个文件"),k=I(),F=m("div"),U=A(C),J=I(),this.h()},l(B){e=g(B,"DIV",{class:!0});var p=v(e);l=g(p,"DIV",{});var b=v(l);t=g(b,"DIV",{class:!0});var $=v(t);s=S($,r),$.forEach(h),o=V(b),u=g(b,"DIV",{class:!0});var P=v(u);c=S(P,a),f=S(P," • "),y=S(P,_),E=S(P," 个文件"),P.forEach(h),b.forEach(h),k=V(p),F=g(p,"DIV",{class:!0});var T=v(F);U=S(T,C),T.forEach(h),J=V(p),p.forEach(h),this.h()},h(){d(t,"class","font-medium text-gray-900 dark:text-white"),d(u,"class","text-sm text-gray-600 dark:text-gray-400"),d(F,"class","text-sm font-medium text-gray-900 dark:text-white"),d(e,"class","flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg svelte-1v5vq1c")},m(B,p){q(B,e,p),i(e,l),i(l,t),i(t,s),i(l,o),i(l,u),i(u,c),i(u,f),i(u,y),i(u,E),i(e,k),i(e,F),i(F,U),i(e,J)},p(B,p){p[0]&64&&r!==(r=B[22].name+"")&&re(s,r),p[0]&64&&a!==(a=B[22].type+"")&&re(c,a),p[0]&64&&_!==(_=B[22].files+"")&&re(y,_),p[0]&64&&C!==(C=Ye(B[22].size)+"")&&re(U,C)},d(B){B&&h(e)}}}function Ks(n){let e,l,t,r,s,o=n[1]&&n[1].username===n[0]?"你还没有星标任何仓库":"该用户还没有星标任何仓库",u,a;return t=new $r({props:{class:"h-12 w-12 mx-auto mb-4"}}),{c(){e=m("div"),l=m("div"),oe(t.$$.fragment),r=I(),s=m("p"),u=A(o),this.h()},l(c){e=g(c,"DIV",{class:!0});var f=v(e);l=g(f,"DIV",{class:!0});var _=v(l);ce(t.$$.fragment,_),r=V(_),s=g(_,"P",{});var y=v(s);u=S(y,o),y.forEach(h),_.forEach(h),f.forEach(h),this.h()},h(){d(l,"class","text-gray-500 dark:text-gray-400"),d(e,"class","text-center py-12")},m(c,f){q(c,e,f),i(e,l),ie(t,l,null),i(l,r),i(l,s),i(s,u),a=!0},p(c,f){(!a||f[0]&3)&&o!==(o=c[1]&&c[1].username===c[0]?"你还没有星标任何仓库":"该用户还没有星标任何仓库")&&re(u,o)},i(c){a||(D(t.$$.fragment,c),a=!0)},o(c){N(t.$$.fragment,c),a=!1},d(c){c&&h(e),ue(t)}}}function Zs(n){let e,l,t=je(n[5]),r=[];for(let o=0;o<t.length;o+=1)r[o]=Ql(zl(n,t,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){e=m("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var u=v(e);for(let a=0;a<r.length;a+=1)r[a].l(u);u.forEach(h),this.h()},h(){d(e,"class","grid gap-4")},m(o,u){q(o,e,u);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);l=!0},p(o,u){if(u[0]&34){t=je(o[5]);let a;for(a=0;a<t.length;a+=1){const c=zl(o,t,a);r[a]?(r[a].p(c,u),D(r[a],1)):(r[a]=Ql(c),r[a].c(),D(r[a],1),r[a].m(e,null))}for(we(),a=t.length;a<r.length;a+=1)s(a);Ee()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)D(r[u]);l=!0}},o(o){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)N(r[u]);l=!1},d(o){o&&h(e),_t(r,o)}}}function Js(n){let e,l,t;return l=new rr({props:{size:"lg"}}),{c(){e=m("div"),oe(l.$$.fragment),this.h()},l(r){e=g(r,"DIV",{class:!0});var s=v(e);ce(l.$$.fragment,s),s.forEach(h),this.h()},h(){d(e,"class","flex items-center justify-center py-12")},m(r,s){q(r,e,s),ie(l,e,null),t=!0},p:qe,i(r){t||(D(l.$$.fragment,r),t=!0)},o(r){N(l.$$.fragment,r),t=!1},d(r){r&&h(e),ue(l)}}}function Ql(n){let e,l;return e=new lr({props:{repo:n[22],currentUser:n[1]}}),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},p(t,r){const s={};r[0]&32&&(s.repo=t[22]),r[0]&2&&(s.currentUser=t[1]),e.$set(s)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Xs(n){let e,l,t,r,s,o="该用户还没有公开仓库",u;return t=new mr({props:{class:"h-12 w-12 mx-auto mb-4"}}),{c(){e=m("div"),l=m("div"),oe(t.$$.fragment),r=I(),s=m("p"),s.textContent=o,this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);l=g(c,"DIV",{class:!0});var f=v(l);ce(t.$$.fragment,f),r=V(f),s=g(f,"P",{"data-svelte-h":!0}),_e(s)!=="svelte-31scd6"&&(s.textContent=o),f.forEach(h),c.forEach(h),this.h()},h(){d(l,"class","text-gray-500 dark:text-gray-400"),d(e,"class","text-center py-12")},m(a,c){q(a,e,c),i(e,l),ie(t,l,null),i(l,r),i(l,s),u=!0},p:qe,i(a){u||(D(t.$$.fragment,a),u=!0)},o(a){N(t.$$.fragment,a),u=!1},d(a){a&&h(e),ue(t)}}}function Qs(n){let e,l,t=je(n[4]),r=[];for(let o=0;o<t.length;o+=1)r[o]=Yl(Ll(n,t,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){e=m("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var u=v(e);for(let a=0;a<r.length;a+=1)r[a].l(u);u.forEach(h),this.h()},h(){d(e,"class","grid gap-4")},m(o,u){q(o,e,u);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);l=!0},p(o,u){if(u[0]&18){t=je(o[4]);let a;for(a=0;a<t.length;a+=1){const c=Ll(o,t,a);r[a]?(r[a].p(c,u),D(r[a],1)):(r[a]=Yl(c),r[a].c(),D(r[a],1),r[a].m(e,null))}for(we(),a=t.length;a<r.length;a+=1)s(a);Ee()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)D(r[u]);l=!0}},o(o){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)N(r[u]);l=!1},d(o){o&&h(e),_t(r,o)}}}function Yl(n){let e,l;return e=new lr({props:{repo:n[22],currentUser:n[1]}}),{c(){oe(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,r){ie(e,t,r),l=!0},p(t,r){const s={};r[0]&16&&(s.repo=t[22]),r[0]&2&&(s.currentUser=t[1]),e.$set(s)},i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ys(n){let e,l,t,r;const s=[Os,js,Ls],o=[];function u(a,c){return a[7]?0:a[8]?1:a[2]?2:-1}return~(l=u(n))&&(t=o[l]=s[l](n)),{c(){e=m("div"),t&&t.c(),this.h()},l(a){e=g(a,"DIV",{class:!0});var c=v(e);t&&t.l(c),c.forEach(h),this.h()},h(){d(e,"class","min-h-screen bg-gray-50 dark:bg-gray-900 svelte-1v5vq1c")},m(a,c){q(a,e,c),~l&&o[l].m(e,null),r=!0},p(a,c){let f=l;l=u(a),l===f?~l&&o[l].p(a,c):(t&&(we(),N(o[f],1,1,()=>{o[f]=null}),Ee()),~l?(t=o[l],t?t.p(a,c):(t=o[l]=s[l](a),t.c()),D(t,1),t.m(e,null)):t=null)},i(a){r||(D(t),r=!0)},o(a){N(t),r=!1},d(a){a&&h(e),~l&&o[l].d()}}}async function en(n){try{const e=await fetch(`/api/personal-files/${n}/stats`,{credentials:"include"});if(e.ok)return await e.json()}catch(e){console.error("Error loading personal space stats:",e)}return null}function er(n){return new Date(n).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}function Ye(n){if(n===0)return"0 B";const e=1024,l=["B","KB","MB","GB","TB"],t=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,t)).toFixed(2))+" "+l[t]}function tn(n,e,l){let{username:t}=e,{currentUser:r=null}=e,s=null,o=null,u=[],a=[],c=null,f=null,_=!0,y=null,E="repositories",k=!1,F=!1;Kt(async()=>{await C()});async function C(){try{l(7,_=!0),l(8,y=null);const w=[Be.getUserByUsername(t),Be.getUserStatsByUsername(t),Be.getUserRepositoriesByUsername(t,{per_page:20})];r&&(r.username===t||r.is_admin)&&(w.push(Be.getUserStorage(t)),w.push(en(t)));const Y=await Promise.all(w);let G,z,j,K,O;r&&(r.username===t||r.is_admin)?([G,z,j,K,O]=Y,l(6,c=K||null),f=O||null):[G,z,j]=Y,l(2,s=G),l(3,o=z),l(4,u=j.items||j),r&&r.username!==t&&await U()}catch(w){l(8,y=w instanceof Error?w.message:"Failed to load user data"),console.error("Error loading user data:",w)}finally{l(7,_=!1)}}async function U(){if(r)try{const w=await Be.getUserFollowing(r.username,{per_page:1e3}),Y=w.items||w;l(10,k=Y.some(G=>{var z;return((z=G.following)==null?void 0:z.username)===t||G.username===t}))}catch(w){console.error("Error checking follow status:",w),l(10,k=!1)}}async function J(){if(!(a.length>0))try{l(11,F=!0);const w=await Be.getUserStarredRepositories(t,{per_page:20});l(5,a=w.items||w)}catch(w){console.error("Error loading starred repositories:",w),l(5,a=[])}finally{l(11,F=!1)}}async function B(){if(!(!s||!r))try{k?(await Be.unfollowUserByUsername(t),l(10,k=!1),l(2,s.followers_count-=1,s)):(await Be.followUserByUsername(t),l(10,k=!0),l(2,s.followers_count+=1,s))}catch(w){console.error("Error following/unfollowing user:",w)}}const p=()=>l(9,E="repositories"),b=()=>{l(9,E="stars"),J()},$=()=>l(9,E="following"),P=()=>l(9,E="personal-files"),T=()=>l(9,E="storage");return n.$$set=w=>{"username"in w&&l(0,t=w.username),"currentUser"in w&&l(1,r=w.currentUser)},[t,r,s,o,u,a,c,_,y,E,k,F,J,B,p,b,$,P,T]}class ln extends Ge{constructor(e){super(),We(this,e,tn,Ys,Re,{username:0,currentUser:1},null,[-1,-1])}}function rn(n){let e,l,t,r,s,o;return document.title=e="@"+n[1]+" - GeoML Hub",s=new ln({props:{username:n[1],currentUser:n[0]}}),{c(){l=m("meta"),r=I(),oe(s.$$.fragment),this.h()},l(u){const a=fr("svelte-ehn6az",document.head);l=g(a,"META",{name:!0,content:!0}),a.forEach(h),r=V(u),ce(s.$$.fragment,u),this.h()},h(){d(l,"name","description"),d(l,"content",t="查看 @"+n[1]+" 在 GeoML Hub 上的个人资料和仓库")},m(u,a){i(document.head,l),q(u,r,a),ie(s,u,a),o=!0},p(u,[a]){(!o||a&2)&&e!==(e="@"+u[1]+" - GeoML Hub")&&(document.title=e),(!o||a&2&&t!==(t="查看 @"+u[1]+" 在 GeoML Hub 上的个人资料和仓库"))&&d(l,"content",t);const c={};a&2&&(c.username=u[1]),a&1&&(c.currentUser=u[0]),s.$set(c)},i(u){o||(D(s.$$.fragment,u),o=!0)},o(u){N(s.$$.fragment,u),o=!1},d(u){u&&h(r),h(l),ue(s,u)}}}function sn(n,e,l){let t,r;cl(n,Er,u=>l(2,t=u)),cl(n,dr,u=>l(3,r=u));let s=null,o;return Kt(async()=>{}),n.$$.update=()=>{n.$$.dirty&8&&l(1,o=r.params.username),n.$$.dirty&4&&l(0,s=t)},[s,o,t,r]}class xn extends Ge{constructor(e){super(),We(this,e,sn,rn,Re,{})}}export{xn as component,En as universal};
