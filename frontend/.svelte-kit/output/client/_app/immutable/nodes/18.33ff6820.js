import{s as Pt,f as r,a as b,e as _t,g as n,h as c,F as K,c as g,d,j as a,K as Be,Q as ht,i as Pe,A as e,R as Ye,B as _e,G as et,C as tt,o as St,l as I,m as D,n as xe,T as vt,E as pt,z as mt}from"../chunks/scheduler.cc6cbc02.js";import{e as Je}from"../chunks/each.61c71743.js";import{S as At,i as Ut}from"../chunks/index.cf161fb4.js";import{a as bt}from"../chunks/api.ecdb55f2.js";function gt(t,l,s){const o=t.slice();return o[38]=l[s],o}function xt(t,l,s){const o=t.slice();return o[41]=l[s],o}function Mt(t){let l,s,o,i,u,C,ne,x,_,k="邮箱",m,L,P="状态",U,N,w,oe,T,ee,ie,O,q,Q,X,V="操作",Z,te,S,F,H,Y,B,ge,$,G,J,he,de,j,M,v,E,h,z=(t[8]-1)*qe+1+"",ye,W,p,le=Math.min(t[8]*qe,t[0])+"",ke,se,Te,ue,Se,Ne,Oe,ve,we,Me,Ae,je,Ee,R,A,ae,Le,Ge,re=t[6]==="username"&&yt(t),pe=t[6]==="repositories"&&Ct(t),me=t[6]==="storage"&&wt(t),be=t[6]==="created"&&Et(t),Ie=Je(t[1]),ce=[];for(let f=0;f<Ie.length;f+=1)ce[f]=kt(xt(t,Ie,f));let Ve=Je(Array.from({length:Math.min(10,t[12])},Bt)),Ce=[];for(let f=0;f<Ve.length;f+=1)Ce[f]=Tt(gt(t,Ve,f));return{c(){l=r("div"),s=r("div"),o=r("table"),i=r("thead"),u=r("tr"),C=r("th"),ne=I(`用户名
                                `),re&&re.c(),x=b(),_=r("th"),_.textContent=k,m=b(),L=r("th"),L.textContent=P,U=b(),N=r("th"),w=I(`仓库数
                                `),pe&&pe.c(),oe=b(),T=r("th"),ee=I(`存储使用
                                `),me&&me.c(),ie=b(),O=r("th"),q=I(`创建时间
                                `),be&&be.c(),Q=b(),X=r("th"),X.textContent=V,Z=b(),te=r("tbody");for(let f=0;f<ce.length;f+=1)ce[f].c();S=b(),F=r("div"),H=r("div"),Y=r("button"),B=I("上一页"),$=b(),G=r("button"),J=I("下一页"),de=b(),j=r("div"),M=r("div"),v=r("p"),E=I("显示 "),h=r("span"),ye=I(z),W=I(` 到 
                            `),p=r("span"),ke=I(le),se=I(` 项，
                            共 `),Te=r("span"),ue=I(t[0]),Se=I(" 项"),Ne=b(),Oe=r("div"),ve=r("nav"),we=r("button"),Me=I("上一页"),je=b();for(let f=0;f<Ce.length;f+=1)Ce[f].c();Ee=b(),R=r("button"),A=I("下一页"),this.h()},l(f){l=n(f,"DIV",{class:!0});var fe=c(l);s=n(fe,"DIV",{class:!0});var y=c(s);o=n(y,"TABLE",{class:!0});var Ue=c(o);i=n(Ue,"THEAD",{class:!0});var lt=c(i);u=n(lt,"TR",{});var De=c(u);C=n(De,"TH",{class:!0});var We=c(C);ne=D(We,`用户名
                                `),re&&re.l(We),We.forEach(d),x=g(De),_=n(De,"TH",{class:!0,"data-svelte-h":!0}),K(_)!=="svelte-1yl9wn"&&(_.textContent=k),m=g(De),L=n(De,"TH",{class:!0,"data-svelte-h":!0}),K(L)!=="svelte-mket67"&&(L.textContent=P),U=g(De),N=n(De,"TH",{class:!0});var Xe=c(N);w=D(Xe,`仓库数
                                `),pe&&pe.l(Xe),Xe.forEach(d),oe=g(De),T=n(De,"TH",{class:!0});var Ze=c(T);ee=D(Ze,`存储使用
                                `),me&&me.l(Ze),Ze.forEach(d),ie=g(De),O=n(De,"TH",{class:!0});var $e=c(O);q=D($e,`创建时间
                                `),be&&be.l($e),$e.forEach(d),Q=g(De),X=n(De,"TH",{class:!0,"data-svelte-h":!0}),K(X)!=="svelte-8atyrf"&&(X.textContent=V),De.forEach(d),lt.forEach(d),Z=g(Ue),te=n(Ue,"TBODY",{class:!0});var st=c(te);for(let ze=0;ze<ce.length;ze+=1)ce[ze].l(st);st.forEach(d),Ue.forEach(d),y.forEach(d),S=g(fe),F=n(fe,"DIV",{class:!0});var Re=c(F);H=n(Re,"DIV",{class:!0});var Ke=c(H);Y=n(Ke,"BUTTON",{class:!0});var at=c(Y);B=D(at,"上一页"),at.forEach(d),$=g(Ke),G=n(Ke,"BUTTON",{class:!0});var rt=c(G);J=D(rt,"下一页"),rt.forEach(d),Ke.forEach(d),de=g(Re),j=n(Re,"DIV",{class:!0});var Qe=c(j);M=n(Qe,"DIV",{});var nt=c(M);v=n(nt,"P",{class:!0});var He=c(v);E=D(He,"显示 "),h=n(He,"SPAN",{class:!0});var ot=c(h);ye=D(ot,z),ot.forEach(d),W=D(He,` 到 
                            `),p=n(He,"SPAN",{class:!0});var it=c(p);ke=D(it,le),it.forEach(d),se=D(He,` 项，
                            共 `),Te=n(He,"SPAN",{class:!0});var dt=c(Te);ue=D(dt,t[0]),dt.forEach(d),Se=D(He," 项"),He.forEach(d),nt.forEach(d),Ne=g(Qe),Oe=n(Qe,"DIV",{});var ut=c(Oe);ve=n(ut,"NAV",{class:!0});var Fe=c(ve);we=n(Fe,"BUTTON",{class:!0});var ct=c(we);Me=D(ct,"上一页"),ct.forEach(d),je=g(Fe);for(let ze=0;ze<Ce.length;ze+=1)Ce[ze].l(Fe);Ee=g(Fe),R=n(Fe,"BUTTON",{class:!0});var ft=c(R);A=D(ft,"下一页"),ft.forEach(d),Fe.forEach(d),ut.forEach(d),Qe.forEach(d),Re.forEach(d),fe.forEach(d),this.h()},h(){a(C,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"),a(_,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(L,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(N,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"),a(T,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"),a(O,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"),a(X,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),a(i,"class","bg-gray-50"),a(te,"class","bg-white divide-y divide-gray-200"),a(o,"class","min-w-full divide-y divide-gray-200"),a(s,"class","overflow-x-auto"),Y.disabled=ge=t[8]===1,a(Y,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"),G.disabled=he=t[8]===t[12],a(G,"class","ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"),a(H,"class","flex-1 flex justify-between sm:hidden"),a(h,"class","font-medium"),a(p,"class","font-medium"),a(Te,"class","font-medium"),a(v,"class","text-sm text-gray-700"),we.disabled=Ae=t[8]===1,a(we,"class","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"),R.disabled=ae=t[8]===t[12],a(R,"class","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"),a(ve,"class","relative z-0 inline-flex rounded-md shadow-sm -space-x-px"),a(j,"class","hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"),a(F,"class","bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200"),a(l,"class","bg-white rounded-lg shadow overflow-hidden")},m(f,fe){Pe(f,l,fe),e(l,s),e(s,o),e(o,i),e(i,u),e(u,C),e(C,ne),re&&re.m(C,null),e(u,x),e(u,_),e(u,m),e(u,L),e(u,U),e(u,N),e(N,w),pe&&pe.m(N,null),e(u,oe),e(u,T),e(T,ee),me&&me.m(T,null),e(u,ie),e(u,O),e(O,q),be&&be.m(O,null),e(u,Q),e(u,X),e(o,Z),e(o,te);for(let y=0;y<ce.length;y+=1)ce[y]&&ce[y].m(te,null);e(l,S),e(l,F),e(F,H),e(H,Y),e(Y,B),e(H,$),e(H,G),e(G,J),e(F,de),e(F,j),e(j,M),e(M,v),e(v,E),e(v,h),e(h,ye),e(v,W),e(v,p),e(p,ke),e(v,se),e(v,Te),e(Te,ue),e(v,Se),e(j,Ne),e(j,Oe),e(Oe,ve),e(ve,we),e(we,Me),e(ve,je);for(let y=0;y<Ce.length;y+=1)Ce[y]&&Ce[y].m(ve,null);e(ve,Ee),e(ve,R),e(R,A),Le||(Ge=[_e(C,"click",t[24]),_e(N,"click",t[25]),_e(T,"click",t[26]),_e(O,"click",t[27]),_e(Y,"click",t[29]),_e(G,"click",t[30]),_e(we,"click",t[31]),_e(R,"click",t[33])],Le=!0)},p(f,fe){if(f[6]==="username"?re?re.p(f,fe):(re=yt(f),re.c(),re.m(C,null)):re&&(re.d(1),re=null),f[6]==="repositories"?pe?pe.p(f,fe):(pe=Ct(f),pe.c(),pe.m(N,null)):pe&&(pe.d(1),pe=null),f[6]==="storage"?me?me.p(f,fe):(me=wt(f),me.c(),me.m(T,null)):me&&(me.d(1),me=null),f[6]==="created"?be?be.p(f,fe):(be=Et(f),be.c(),be.m(O,null)):be&&(be.d(1),be=null),fe[0]&131074){Ie=Je(f[1]);let y;for(y=0;y<Ie.length;y+=1){const Ue=xt(f,Ie,y);ce[y]?ce[y].p(Ue,fe):(ce[y]=kt(Ue),ce[y].c(),ce[y].m(te,null))}for(;y<ce.length;y+=1)ce[y].d(1);ce.length=Ie.length}if(fe[0]&256&&ge!==(ge=f[8]===1)&&(Y.disabled=ge),fe[0]&4352&&he!==(he=f[8]===f[12])&&(G.disabled=he),fe[0]&256&&z!==(z=(f[8]-1)*qe+1+"")&&xe(ye,z),fe[0]&257&&le!==(le=Math.min(f[8]*qe,f[0])+"")&&xe(ke,le),fe[0]&1&&xe(ue,f[0]),fe[0]&256&&Ae!==(Ae=f[8]===1)&&(we.disabled=Ae),fe[0]&12544){Ve=Je(Array.from({length:Math.min(10,f[12])},Bt));let y;for(y=0;y<Ve.length;y+=1){const Ue=gt(f,Ve,y);Ce[y]?Ce[y].p(Ue,fe):(Ce[y]=Tt(Ue),Ce[y].c(),Ce[y].m(ve,Ee))}for(;y<Ce.length;y+=1)Ce[y].d(1);Ce.length=Ve.length}fe[0]&4352&&ae!==(ae=f[8]===f[12])&&(R.disabled=ae)},d(f){f&&d(l),re&&re.d(),pe&&pe.d(),me&&me.d(),be&&be.d(),pt(ce,f),pt(Ce,f),Le=!1,tt(Ge)}}}function jt(t){let l,s,o;return{c(){l=r("div"),s=I("错误: "),o=I(t[3]),this.h()},l(i){l=n(i,"DIV",{class:!0});var u=c(l);s=D(u,"错误: "),o=D(u,t[3]),u.forEach(d),this.h()},h(){a(l,"class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded")},m(i,u){Pe(i,l,u),e(l,s),e(l,o)},p(i,u){u[0]&8&&xe(o,i[3])},d(i){i&&d(l)}}}function Lt(t){let l,s='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>';return{c(){l=r("div"),l.innerHTML=s,this.h()},l(o){l=n(o,"DIV",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-2x2oyq"&&(l.innerHTML=s),this.h()},h(){a(l,"class","flex justify-center items-center h-64")},m(o,i){Pe(o,l,i)},p:et,d(o){o&&d(l)}}}function yt(t){let l,s=t[7]==="asc"?"↑":"↓",o;return{c(){l=r("span"),o=I(s),this.h()},l(i){l=n(i,"SPAN",{class:!0});var u=c(l);o=D(u,s),u.forEach(d),this.h()},h(){a(l,"class","ml-1")},m(i,u){Pe(i,l,u),e(l,o)},p(i,u){u[0]&128&&s!==(s=i[7]==="asc"?"↑":"↓")&&xe(o,s)},d(i){i&&d(l)}}}function Ct(t){let l,s=t[7]==="asc"?"↑":"↓",o;return{c(){l=r("span"),o=I(s),this.h()},l(i){l=n(i,"SPAN",{class:!0});var u=c(l);o=D(u,s),u.forEach(d),this.h()},h(){a(l,"class","ml-1")},m(i,u){Pe(i,l,u),e(l,o)},p(i,u){u[0]&128&&s!==(s=i[7]==="asc"?"↑":"↓")&&xe(o,s)},d(i){i&&d(l)}}}function wt(t){let l,s=t[7]==="asc"?"↑":"↓",o;return{c(){l=r("span"),o=I(s),this.h()},l(i){l=n(i,"SPAN",{class:!0});var u=c(l);o=D(u,s),u.forEach(d),this.h()},h(){a(l,"class","ml-1")},m(i,u){Pe(i,l,u),e(l,o)},p(i,u){u[0]&128&&s!==(s=i[7]==="asc"?"↑":"↓")&&xe(o,s)},d(i){i&&d(l)}}}function Et(t){let l,s=t[7]==="asc"?"↑":"↓",o;return{c(){l=r("span"),o=I(s),this.h()},l(i){l=n(i,"SPAN",{class:!0});var u=c(l);o=D(u,s),u.forEach(d),this.h()},h(){a(l,"class","ml-1")},m(i,u){Pe(i,l,u),e(l,o)},p(i,u){u[0]&128&&s!==(s=i[7]==="asc"?"↑":"↓")&&xe(o,s)},d(i){i&&d(l)}}}function kt(t){let l,s,o,i,u,C,ne,x,_,k=t[41].username+"",m,L,P,U=(t[41].full_name||"")+"",N,w,oe,T=t[41].email+"",ee,ie,O,q,Q=Vt(t[41])+"",X,V,Z,te,S=(t[41].public_repos_count||0)+"",F,H,Y,B=Nt(t[41].storage_used||0)+"",ge,$,G,J=Dt(t[41].created_at)+"",he,de,j,M,v="管理",E,h,z;function ye(){return t[28](t[41])}return{c(){l=r("tr"),s=r("td"),o=r("div"),i=r("img"),ne=b(),x=r("div"),_=r("div"),m=I(k),L=b(),P=r("div"),N=I(U),w=b(),oe=r("td"),ee=I(T),ie=b(),O=r("td"),q=r("span"),X=I(Q),Z=b(),te=r("td"),F=I(S),H=b(),Y=r("td"),ge=I(B),$=b(),G=r("td"),he=I(J),de=b(),j=r("td"),M=r("button"),M.textContent=v,E=b(),this.h()},l(W){l=n(W,"TR",{class:!0});var p=c(l);s=n(p,"TD",{class:!0});var le=c(s);o=n(le,"DIV",{class:!0});var ke=c(o);i=n(ke,"IMG",{src:!0,alt:!0,class:!0}),ne=g(ke),x=n(ke,"DIV",{class:!0});var se=c(x);_=n(se,"DIV",{class:!0});var Te=c(_);m=D(Te,k),Te.forEach(d),L=g(se),P=n(se,"DIV",{class:!0});var ue=c(P);N=D(ue,U),ue.forEach(d),se.forEach(d),ke.forEach(d),le.forEach(d),w=g(p),oe=n(p,"TD",{class:!0});var Se=c(oe);ee=D(Se,T),Se.forEach(d),ie=g(p),O=n(p,"TD",{class:!0});var Ne=c(O);q=n(Ne,"SPAN",{class:!0});var Oe=c(q);X=D(Oe,Q),Oe.forEach(d),Ne.forEach(d),Z=g(p),te=n(p,"TD",{class:!0});var ve=c(te);F=D(ve,S),ve.forEach(d),H=g(p),Y=n(p,"TD",{class:!0});var we=c(Y);ge=D(we,B),we.forEach(d),$=g(p),G=n(p,"TD",{class:!0});var Me=c(G);he=D(Me,J),Me.forEach(d),de=g(p),j=n(p,"TD",{class:!0});var Ae=c(j);M=n(Ae,"BUTTON",{class:!0,"data-svelte-h":!0}),K(M)!=="svelte-g8xcbq"&&(M.textContent=v),Ae.forEach(d),E=g(p),p.forEach(d),this.h()},h(){mt(i.src,u=t[41].avatar_url||"/default-avatar.png")||a(i,"src",u),a(i,"alt",C=t[41].username),a(i,"class","h-10 w-10 rounded-full"),a(_,"class","text-sm font-medium text-gray-900"),a(P,"class","text-sm text-gray-500"),a(x,"class","ml-4"),a(o,"class","flex items-center"),a(s,"class","px-6 py-4 whitespace-nowrap"),a(oe,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),a(q,"class",V="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Ot(t[41])),a(O,"class","px-6 py-4 whitespace-nowrap"),a(te,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),a(Y,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),a(G,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),a(M,"class","text-blue-600 hover:text-blue-900 mr-3"),a(j,"class","px-6 py-4 whitespace-nowrap text-sm font-medium"),a(l,"class","hover:bg-gray-50")},m(W,p){Pe(W,l,p),e(l,s),e(s,o),e(o,i),e(o,ne),e(o,x),e(x,_),e(_,m),e(x,L),e(x,P),e(P,N),e(l,w),e(l,oe),e(oe,ee),e(l,ie),e(l,O),e(O,q),e(q,X),e(l,Z),e(l,te),e(te,F),e(l,H),e(l,Y),e(Y,ge),e(l,$),e(l,G),e(G,he),e(l,de),e(l,j),e(j,M),e(l,E),h||(z=_e(M,"click",ye),h=!0)},p(W,p){t=W,p[0]&2&&!mt(i.src,u=t[41].avatar_url||"/default-avatar.png")&&a(i,"src",u),p[0]&2&&C!==(C=t[41].username)&&a(i,"alt",C),p[0]&2&&k!==(k=t[41].username+"")&&xe(m,k),p[0]&2&&U!==(U=(t[41].full_name||"")+"")&&xe(N,U),p[0]&2&&T!==(T=t[41].email+"")&&xe(ee,T),p[0]&2&&Q!==(Q=Vt(t[41])+"")&&xe(X,Q),p[0]&2&&V!==(V="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+Ot(t[41]))&&a(q,"class",V),p[0]&2&&S!==(S=(t[41].public_repos_count||0)+"")&&xe(F,S),p[0]&2&&B!==(B=Nt(t[41].storage_used||0)+"")&&xe(ge,B),p[0]&2&&J!==(J=Dt(t[41].created_at)+"")&&xe(he,J)},d(W){W&&d(l),h=!1,z()}}}function Tt(t){let l,s=t[38]+"",o,i,u,C;function ne(){return t[32](t[38])}return{c(){l=r("button"),o=I(s),this.h()},l(x){l=n(x,"BUTTON",{class:!0});var _=c(l);o=D(_,s),_.forEach(d),this.h()},h(){a(l,"class",i="relative inline-flex items-center px-4 py-2 border text-sm font-medium "+(t[8]===t[38]?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"))},m(x,_){Pe(x,l,_),e(l,o),u||(C=_e(l,"click",ne),u=!0)},p(x,_){t=x,_[0]&4096&&s!==(s=t[38]+"")&&xe(o,s),_[0]&4352&&i!==(i="relative inline-flex items-center px-4 py-2 border text-sm font-medium "+(t[8]===t[38]?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"))&&a(l,"class",i)},d(x){x&&d(l),u=!1,C()}}}function It(t){let l,s,o,i,u,C=t[9].username+"",ne,x,_,k,m,L="账户状态",P,U,N=t[9].is_active?"禁用":"启用",w,oe,T,ee,ie,O="邮箱验证",q,Q,X=t[9].is_verified?"取消验证":"验证",V,Z,te,S,F,H="管理员权限",Y,B,ge=t[9].is_admin?"撤销管理员":"授予管理员",$,G,J,he,de,j="关闭",M,v;return{c(){l=r("div"),s=r("div"),o=r("div"),i=r("h3"),u=I("管理用户: "),ne=I(C),x=b(),_=r("div"),k=r("div"),m=r("span"),m.textContent=L,P=b(),U=r("button"),w=I(N),T=b(),ee=r("div"),ie=r("span"),ie.textContent=O,q=b(),Q=r("button"),V=I(X),te=b(),S=r("div"),F=r("span"),F.textContent=H,Y=b(),B=r("button"),$=I(ge),J=b(),he=r("div"),de=r("button"),de.textContent=j,this.h()},l(E){l=n(E,"DIV",{class:!0});var h=c(l);s=n(h,"DIV",{class:!0});var z=c(s);o=n(z,"DIV",{class:!0});var ye=c(o);i=n(ye,"H3",{class:!0});var W=c(i);u=D(W,"管理用户: "),ne=D(W,C),W.forEach(d),x=g(ye),_=n(ye,"DIV",{class:!0});var p=c(_);k=n(p,"DIV",{class:!0});var le=c(k);m=n(le,"SPAN",{class:!0,"data-svelte-h":!0}),K(m)!=="svelte-197h3vv"&&(m.textContent=L),P=g(le),U=n(le,"BUTTON",{class:!0});var ke=c(U);w=D(ke,N),ke.forEach(d),le.forEach(d),T=g(p),ee=n(p,"DIV",{class:!0});var se=c(ee);ie=n(se,"SPAN",{class:!0,"data-svelte-h":!0}),K(ie)!=="svelte-1ohlwhb"&&(ie.textContent=O),q=g(se),Q=n(se,"BUTTON",{class:!0});var Te=c(Q);V=D(Te,X),Te.forEach(d),se.forEach(d),te=g(p),S=n(p,"DIV",{class:!0});var ue=c(S);F=n(ue,"SPAN",{class:!0,"data-svelte-h":!0}),K(F)!=="svelte-5itjef"&&(F.textContent=H),Y=g(ue),B=n(ue,"BUTTON",{class:!0});var Se=c(B);$=D(Se,ge),Se.forEach(d),ue.forEach(d),p.forEach(d),J=g(ye),he=n(ye,"DIV",{class:!0});var Ne=c(he);de=n(Ne,"BUTTON",{class:!0,"data-svelte-h":!0}),K(de)!=="svelte-jtp59m"&&(de.textContent=j),Ne.forEach(d),ye.forEach(d),z.forEach(d),h.forEach(d),this.h()},h(){a(i,"class","text-lg font-medium text-gray-900 mb-4"),a(m,"class","text-sm font-medium text-gray-700"),U.disabled=t[11],a(U,"class",oe="px-3 py-1 rounded text-sm font-medium "+(t[9].is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200")+" disabled:opacity-50"),a(k,"class","flex items-center justify-between"),a(ie,"class","text-sm font-medium text-gray-700"),Q.disabled=t[11],a(Q,"class",Z="px-3 py-1 rounded text-sm font-medium "+(t[9].is_verified?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200")+" disabled:opacity-50"),a(ee,"class","flex items-center justify-between"),a(F,"class","text-sm font-medium text-gray-700"),B.disabled=t[11],a(B,"class",G="px-3 py-1 rounded text-sm font-medium "+(t[9].is_admin?"bg-purple-100 text-purple-700 hover:bg-purple-200":"bg-gray-100 text-gray-700 hover:bg-gray-200")+" disabled:opacity-50"),a(S,"class","flex items-center justify-between"),a(_,"class","space-y-4"),a(de,"class","px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors"),a(he,"class","mt-6 flex justify-center"),a(o,"class","mt-3 text-center"),a(s,"class","relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"),a(l,"class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50")},m(E,h){Pe(E,l,h),e(l,s),e(s,o),e(o,i),e(i,u),e(i,ne),e(o,x),e(o,_),e(_,k),e(k,m),e(k,P),e(k,U),e(U,w),e(_,T),e(_,ee),e(ee,ie),e(ee,q),e(ee,Q),e(Q,V),e(_,te),e(_,S),e(S,F),e(S,Y),e(S,B),e(B,$),e(o,J),e(o,he),e(he,de),M||(v=[_e(U,"click",t[34]),_e(Q,"click",t[35]),_e(B,"click",t[36]),_e(de,"click",t[37])],M=!0)},p(E,h){h[0]&512&&C!==(C=E[9].username+"")&&xe(ne,C),h[0]&512&&N!==(N=E[9].is_active?"禁用":"启用")&&xe(w,N),h[0]&2048&&(U.disabled=E[11]),h[0]&512&&oe!==(oe="px-3 py-1 rounded text-sm font-medium "+(E[9].is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200")+" disabled:opacity-50")&&a(U,"class",oe),h[0]&512&&X!==(X=E[9].is_verified?"取消验证":"验证")&&xe(V,X),h[0]&2048&&(Q.disabled=E[11]),h[0]&512&&Z!==(Z="px-3 py-1 rounded text-sm font-medium "+(E[9].is_verified?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200")+" disabled:opacity-50")&&a(Q,"class",Z),h[0]&512&&ge!==(ge=E[9].is_admin?"撤销管理员":"授予管理员")&&xe($,ge),h[0]&2048&&(B.disabled=E[11]),h[0]&512&&G!==(G="px-3 py-1 rounded text-sm font-medium "+(E[9].is_admin?"bg-purple-100 text-purple-700 hover:bg-purple-200":"bg-gray-100 text-gray-700 hover:bg-gray-200")+" disabled:opacity-50")&&a(B,"class",G)},d(E){E&&d(l),M=!1,tt(v)}}}function Ht(t){let l,s,o,i="用户管理",u,C,ne="刷新",x,_,k,m,L,P="搜索用户",U,N,w,oe,T,ee="搜索",ie,O,q,Q="状态过滤",X,V,Z,te="全部状态",S,F="活跃用户",H,Y="禁用用户",B,ge="已验证",$,G="未验证",J,he="管理员",de,j,M,v="排序方式",E,h,z,ye="创建时间",W,p="更新时间",le,ke="用户名",se,Te="仓库数量",ue,Se="存储使用",Ne,Oe,ve,we,Me;function Ae(A,ae){return A[2]?Lt:A[3]?jt:Mt}let je=Ae(t),Ee=je(t),R=t[10]&&t[9]&&It(t);return{c(){l=r("div"),s=r("div"),o=r("h1"),o.textContent=i,u=b(),C=r("button"),C.textContent=ne,x=b(),_=r("div"),k=r("div"),m=r("div"),L=r("label"),L.textContent=P,U=b(),N=r("div"),w=r("input"),oe=b(),T=r("button"),T.textContent=ee,ie=b(),O=r("div"),q=r("label"),q.textContent=Q,X=b(),V=r("select"),Z=r("option"),Z.textContent=te,S=r("option"),S.textContent=F,H=r("option"),H.textContent=Y,B=r("option"),B.textContent=ge,$=r("option"),$.textContent=G,J=r("option"),J.textContent=he,de=b(),j=r("div"),M=r("label"),M.textContent=v,E=b(),h=r("select"),z=r("option"),z.textContent=ye,W=r("option"),W.textContent=p,le=r("option"),le.textContent=ke,se=r("option"),se.textContent=Te,ue=r("option"),ue.textContent=Se,Ne=b(),Ee.c(),Oe=b(),R&&R.c(),ve=_t(),this.h()},l(A){l=n(A,"DIV",{class:!0});var ae=c(l);s=n(ae,"DIV",{class:!0});var Le=c(s);o=n(Le,"H1",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-7pcrd6"&&(o.textContent=i),u=g(Le),C=n(Le,"BUTTON",{class:!0,"data-svelte-h":!0}),K(C)!=="svelte-1vqeqay"&&(C.textContent=ne),Le.forEach(d),x=g(ae),_=n(ae,"DIV",{class:!0});var Ge=c(_);k=n(Ge,"DIV",{class:!0});var re=c(k);m=n(re,"DIV",{class:!0});var pe=c(m);L=n(pe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(L)!=="svelte-19ku3ep"&&(L.textContent=P),U=g(pe),N=n(pe,"DIV",{class:!0});var me=c(N);w=n(me,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),oe=g(me),T=n(me,"BUTTON",{class:!0,"data-svelte-h":!0}),K(T)!=="svelte-14q8aja"&&(T.textContent=ee),me.forEach(d),pe.forEach(d),ie=g(re),O=n(re,"DIV",{});var be=c(O);q=n(be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(q)!=="svelte-158oxgf"&&(q.textContent=Q),X=g(be),V=n(be,"SELECT",{id:!0,class:!0});var Ie=c(V);Z=n(Ie,"OPTION",{"data-svelte-h":!0}),K(Z)!=="svelte-sa0fi"&&(Z.textContent=te),S=n(Ie,"OPTION",{"data-svelte-h":!0}),K(S)!=="svelte-1ja01y5"&&(S.textContent=F),H=n(Ie,"OPTION",{"data-svelte-h":!0}),K(H)!=="svelte-1nn7w5h"&&(H.textContent=Y),B=n(Ie,"OPTION",{"data-svelte-h":!0}),K(B)!=="svelte-xkginp"&&(B.textContent=ge),$=n(Ie,"OPTION",{"data-svelte-h":!0}),K($)!=="svelte-mv0cw8"&&($.textContent=G),J=n(Ie,"OPTION",{"data-svelte-h":!0}),K(J)!=="svelte-y3sg7a"&&(J.textContent=he),Ie.forEach(d),be.forEach(d),de=g(re),j=n(re,"DIV",{});var ce=c(j);M=n(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(M)!=="svelte-7sa6fp"&&(M.textContent=v),E=g(ce),h=n(ce,"SELECT",{id:!0,class:!0});var Ve=c(h);z=n(Ve,"OPTION",{"data-svelte-h":!0}),K(z)!=="svelte-19f04yj"&&(z.textContent=ye),W=n(Ve,"OPTION",{"data-svelte-h":!0}),K(W)!=="svelte-13940vh"&&(W.textContent=p),le=n(Ve,"OPTION",{"data-svelte-h":!0}),K(le)!=="svelte-19awxzk"&&(le.textContent=ke),se=n(Ve,"OPTION",{"data-svelte-h":!0}),K(se)!=="svelte-k6pdjf"&&(se.textContent=Te),ue=n(Ve,"OPTION",{"data-svelte-h":!0}),K(ue)!=="svelte-s4d6j6"&&(ue.textContent=Se),Ve.forEach(d),ce.forEach(d),re.forEach(d),Ge.forEach(d),Ne=g(ae),Ee.l(ae),ae.forEach(d),Oe=g(A),R&&R.l(A),ve=_t(),this.h()},h(){a(o,"class","text-3xl font-bold text-gray-900"),a(C,"class","bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"),a(s,"class","flex justify-between items-center"),a(L,"for","user-search"),a(L,"class","block text-sm font-medium text-gray-700 mb-2"),a(w,"id","user-search"),a(w,"type","text"),a(w,"placeholder","搜索用户名、邮箱或姓名..."),a(w,"class","flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"),a(T,"class","bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600 transition-colors"),a(N,"class","flex"),a(m,"class","md:col-span-2"),a(q,"for","status-filter"),a(q,"class","block text-sm font-medium text-gray-700 mb-2"),Z.__value="all",Be(Z,Z.__value),S.__value="active",Be(S,S.__value),H.__value="inactive",Be(H,H.__value),B.__value="verified",Be(B,B.__value),$.__value="unverified",Be($,$.__value),J.__value="admin",Be(J,J.__value),a(V,"id","status-filter"),a(V,"class","w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"),t[5]===void 0&&ht(()=>t[21].call(V)),a(M,"for","sort-by"),a(M,"class","block text-sm font-medium text-gray-700 mb-2"),z.__value="created",Be(z,z.__value),W.__value="updated",Be(W,W.__value),le.__value="username",Be(le,le.__value),se.__value="repositories",Be(se,se.__value),ue.__value="storage",Be(ue,ue.__value),a(h,"id","sort-by"),a(h,"class","w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"),t[6]===void 0&&ht(()=>t[23].call(h)),a(k,"class","grid grid-cols-1 md:grid-cols-4 gap-4"),a(_,"class","bg-white rounded-lg shadow p-6"),a(l,"class","space-y-6")},m(A,ae){Pe(A,l,ae),e(l,s),e(s,o),e(s,u),e(s,C),e(l,x),e(l,_),e(_,k),e(k,m),e(m,L),e(m,U),e(m,N),e(N,w),Be(w,t[4]),e(N,oe),e(N,T),e(k,ie),e(k,O),e(O,q),e(O,X),e(O,V),e(V,Z),e(V,S),e(V,H),e(V,B),e(V,$),e(V,J),Ye(V,t[5],!0),e(k,de),e(k,j),e(j,M),e(j,E),e(j,h),e(h,z),e(h,W),e(h,le),e(h,se),e(h,ue),Ye(h,t[6],!0),e(l,Ne),Ee.m(l,null),Pe(A,Oe,ae),R&&R.m(A,ae),Pe(A,ve,ae),we||(Me=[_e(C,"click",t[13]),_e(w,"input",t[19]),_e(w,"keydown",t[20]),_e(T,"click",t[14]),_e(V,"change",t[21]),_e(V,"change",t[22]),_e(h,"change",t[23]),_e(h,"change",t[13])],we=!0)},p(A,ae){ae[0]&16&&w.value!==A[4]&&Be(w,A[4]),ae[0]&32&&Ye(V,A[5]),ae[0]&64&&Ye(h,A[6]),je===(je=Ae(A))&&Ee?Ee.p(A,ae):(Ee.d(1),Ee=je(A),Ee&&(Ee.c(),Ee.m(l,null))),A[10]&&A[9]?R?R.p(A,ae):(R=It(A),R.c(),R.m(ve.parentNode,ve)):R&&(R.d(1),R=null)},i:et,o:et,d(A){A&&(d(l),d(Oe),d(ve)),Ee.d(),R&&R.d(A),we=!1,tt(Me)}}}let qe=20;function Dt(t){return new Date(t).toLocaleString()}function Nt(t){if(t===0)return"0 Bytes";const l=1024,s=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(l));return parseFloat((t/Math.pow(l,o)).toFixed(2))+" "+s[o]}function Ot(t){return t.is_active?t.is_verified?t.is_admin?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}function Vt(t){return t.is_active?t.is_verified?t.is_admin?"管理员":"正常":"未验证":"已禁用"}const Bt=(t,l)=>l+1;function zt(t,l,s){let o,i=[],u=!0,C=null,ne="",x="all",_="created",k="desc",m=1,L=0,P=null,U=!1,N=!1;St(async()=>{await w()});async function w(){try{s(2,u=!0);const v={skip:(m-1)*qe,limit:qe,search:ne||void 0,sort_by:_,order:k};x==="active"?v.is_active=!0:x==="inactive"?v.is_active=!1:x==="verified"?v.is_verified=!0:x==="unverified"&&(v.is_verified=!1);const E=await bt.getAdminUsers(v);s(1,i=E.users||[]),s(0,L=E.total||0)}catch(v){s(3,C=v.message)}finally{s(2,u=!1)}}async function oe(){s(8,m=1),await w()}async function T(v){_===v?s(7,k=k==="asc"?"desc":"asc"):(s(6,_=v),s(7,k="desc")),s(8,m=1),await w()}async function ee(v){s(5,x=v),s(8,m=1),await w()}async function ie(v){s(9,P=v),s(10,U=!0)}async function O(v,E,h){try{s(11,N=!0),await bt.updateAdminUserStatus(v,{[E]:h});const z=i.findIndex(ye=>ye.id===v);z!==-1&&s(1,i[z]={...i[z],[E]:h},i),P&&P.id===v&&s(9,P={...P,[E]:h}),s(10,U=!1)}catch(z){s(3,C=z.message)}finally{s(11,N=!1)}}function q(){ne=this.value,s(4,ne)}const Q=v=>v.key==="Enter"&&oe();function X(){x=vt(this),s(5,x)}const V=()=>ee(x);function Z(){_=vt(this),s(6,_)}const te=()=>T("username"),S=()=>T("repositories"),F=()=>T("storage"),H=()=>T("created"),Y=v=>ie(v),B=()=>{s(8,m=Math.max(1,m-1)),w()},ge=()=>{s(8,m=Math.min(o,m+1)),w()},$=()=>{s(8,m=Math.max(1,m-1)),w()},G=v=>{s(8,m=v),w()},J=()=>{s(8,m=Math.min(o,m+1)),w()},he=()=>O(P.id,"is_active",!P.is_active),de=()=>O(P.id,"is_verified",!P.is_verified),j=()=>O(P.id,"is_admin",!P.is_admin),M=()=>{s(10,U=!1),s(9,P=null)};return t.$$.update=()=>{t.$$.dirty[0]&1&&s(12,o=Math.ceil(L/qe))},[L,i,u,C,ne,x,_,k,m,P,U,N,o,w,oe,T,ee,ie,O,q,Q,X,V,Z,te,S,F,H,Y,B,ge,$,G,J,he,de,j,M]}class Kt extends At{constructor(l){super(),Ut(this,l,zt,Ht,Pt,{},null,[-1,-1])}}export{Kt as component};
