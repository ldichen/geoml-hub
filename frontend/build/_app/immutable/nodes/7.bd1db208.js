import{s as zt,f as p,a as D,l as E,g,h as b,F as Pe,c as y,m as V,d as c,j as $,i as C,A as a,n as U,L as Al,o as Ht,e as qe,E as at,G as ge,_ as de,B as jt,C as Sl,M as Tl,D as zl}from"../chunks/scheduler.cc6cbc02.js";import{S as Lt,i as Mt,b as Y,d as Z,m as x,a as A,g as He,t as M,c as Le,e as ee}from"../chunks/index.cf161fb4.js";import{e as we}from"../chunks/each.61c71743.js";import{p as Hl}from"../chunks/stores.67836202.js";import{e as lt}from"../chunks/singletons.434e14c9.js";import{g as Tt}from"../chunks/paths.f059e082.js";import{a as Et}from"../chunks/api.ecdb55f2.js";import{R as Ll}from"../chunks/RepositoryHeader.23a10d36.js";import{B as Ee}from"../chunks/Button.a5ffc84f.js";import{B as Nt}from"../chunks/Badge.e927eb00.js";import{L as Rt}from"../chunks/Loading.1b4bc8d5.js";import{T as Ml}from"../chunks/Toast.7c8dc121.js";const Rl=!1,Bl=!1,Xs=Object.freeze(Object.defineProperty({__proto__:null,prerender:Rl,ssr:Bl},Symbol.toStringTag,{value:"Module"}));function Ft(n,e,t){const l=n.slice();return l[22]=e[t],l[24]=t,l}function jl(n){let e;return{c(){e=E("ğŸ”„ åˆ·æ–°")},l(t){e=V(t,"ğŸ”„ åˆ·æ–°")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Ot(n){let e,t;return e=new Ee({props:{variant:"primary",size:"sm",$$slots:{default:[Fl]},$$scope:{ctx:n}}}),e.$on("click",n[11]),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const r={};s&33554432&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Fl(n){let e;return{c(){e=E("ğŸ“Š å¯¹æ¯”ç‰ˆæœ¬")},l(t){e=V(t,"ğŸ“Š å¯¹æ¯”ç‰ˆæœ¬")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Ol(n){let e,t,l,s,r,o=(n[5].from||n[5].to)&&Ut(n),i=we(n[2]),f=[];for(let d=0;d<i.length;d+=1)f[d]=Zt(Ft(n,i,d));const u=d=>M(f[d],1,1,()=>{f[d]=null});let h=n[2].length>=50&&xt(n);return{c(){o&&o.c(),e=D(),t=p("div");for(let d=0;d<f.length;d+=1)f[d].c();l=D(),h&&h.c(),s=qe(),this.h()},l(d){o&&o.l(d),e=y(d),t=g(d,"DIV",{class:!0});var m=b(t);for(let _=0;_<f.length;_+=1)f[_].l(m);m.forEach(c),l=y(d),h&&h.l(d),s=qe(),this.h()},h(){$(t,"class","space-y-4")},m(d,m){o&&o.m(d,m),C(d,e,m),C(d,t,m);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(t,null);C(d,l,m),h&&h.m(d,m),C(d,s,m),r=!0},p(d,m){if(d[5].from||d[5].to?o?(o.p(d,m),m&32&&A(o,1)):(o=Ut(d),o.c(),A(o,1),o.m(e.parentNode,e)):o&&(He(),M(o,1,1,()=>{o=null}),Le()),m&5926){i=we(d[2]);let _;for(_=0;_<i.length;_+=1){const P=Ft(d,i,_);f[_]?(f[_].p(P,m),A(f[_],1)):(f[_]=Zt(P),f[_].c(),A(f[_],1),f[_].m(t,null))}for(He(),_=i.length;_<f.length;_+=1)u(_);Le()}d[2].length>=50?h?(h.p(d,m),m&4&&A(h,1)):(h=xt(d),h.c(),A(h,1),h.m(s.parentNode,s)):h&&(He(),M(h,1,1,()=>{h=null}),Le())},i(d){if(!r){A(o);for(let m=0;m<i.length;m+=1)A(f[m]);A(h),r=!0}},o(d){M(o),f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)M(f[m]);M(h),r=!1},d(d){d&&(c(e),c(t),c(l),c(s)),o&&o.d(d),at(f,d),h&&h.d(d)}}}function Ul(n){let e,t='<div class="text-gray-400 text-4xl mb-4">ğŸ“œ</div> <p class="text-gray-600">æš‚æ— ç‰ˆæœ¬å†å²</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),Pe(e)!=="svelte-1hf7w2e"&&(e.innerHTML=t),this.h()},h(){$(e,"class","text-center py-12")},m(l,s){C(l,e,s)},p:ge,i:ge,o:ge,d(l){l&&c(e)}}}function Gl(n){let e,t,l,s,r,o,i;return o=new Ee({props:{$$slots:{default:[ls]},$$scope:{ctx:n}}}),o.$on("click",n[7]),{c(){e=p("div"),t=p("div"),l=E("âŒ "),s=E(n[4]),r=D(),Y(o.$$.fragment),this.h()},l(f){e=g(f,"DIV",{class:!0});var u=b(e);t=g(u,"DIV",{class:!0});var h=b(t);l=V(h,"âŒ "),s=V(h,n[4]),h.forEach(c),r=y(u),Z(o.$$.fragment,u),u.forEach(c),this.h()},h(){$(t,"class","text-red-500 text-lg mb-4"),$(e,"class","text-center py-12")},m(f,u){C(f,e,u),a(e,t),a(t,l),a(t,s),a(e,r),x(o,e,null),i=!0},p(f,u){(!i||u&16)&&U(s,f[4]);const h={};u&33554432&&(h.$$scope={dirty:u,ctx:f}),o.$set(h)},i(f){i||(A(o.$$.fragment,f),i=!0)},o(f){M(o.$$.fragment,f),i=!1},d(f){f&&c(e),ee(o)}}}function Wl(n){let e,t;return e=new Rt({props:{message:"åŠ è½½ç‰ˆæœ¬å†å²ä¸­..."}}),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:ge,i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ut(n){let e,t,l,s,r="ğŸ“Š",o,i,f,u,h,d,m,_=n[5].from&&Gt(n),P=n[5].to&&Wt(n);return d=new Ee({props:{variant:"ghost",size:"sm",$$slots:{default:[ql]},$$scope:{ctx:n}}}),d.$on("click",n[15]),{c(){e=p("div"),t=p("div"),l=p("div"),s=p("span"),s.textContent=r,o=D(),i=p("span"),f=E(`é€‰æ‹©ç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”
							`),_&&_.c(),u=D(),P&&P.c(),h=D(),Y(d.$$.fragment),this.h()},l(w){e=g(w,"DIV",{class:!0});var I=b(e);t=g(I,"DIV",{class:!0});var W=b(t);l=g(W,"DIV",{class:!0});var H=b(l);s=g(H,"SPAN",{class:!0,"data-svelte-h":!0}),Pe(s)!=="svelte-o9lfnb"&&(s.textContent=r),o=y(H),i=g(H,"SPAN",{class:!0});var F=b(i);f=V(F,`é€‰æ‹©ç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”
							`),_&&_.l(F),u=y(F),P&&P.l(F),F.forEach(c),H.forEach(c),h=y(W),Z(d.$$.fragment,W),W.forEach(c),I.forEach(c),this.h()},h(){$(s,"class","text-blue-600"),$(i,"class","text-sm text-blue-800"),$(l,"class","flex items-center space-x-2"),$(t,"class","flex items-center justify-between"),$(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6")},m(w,I){C(w,e,I),a(e,t),a(t,l),a(l,s),a(l,o),a(l,i),a(i,f),_&&_.m(i,null),a(i,u),P&&P.m(i,null),a(t,h),x(d,t,null),m=!0},p(w,I){w[5].from?_?_.p(w,I):(_=Gt(w),_.c(),_.m(i,u)):_&&(_.d(1),_=null),w[5].to?P?P.p(w,I):(P=Wt(w),P.c(),P.m(i,null)):P&&(P.d(1),P=null);const W={};I&33554432&&(W.$$scope={dirty:I,ctx:w}),d.$set(W)},i(w){m||(A(d.$$.fragment,w),m=!0)},o(w){M(d.$$.fragment,w),m=!1},d(w){w&&c(e),_&&_.d(),P&&P.d(),ee(d)}}}function Gt(n){let e,t=n[5].from.version_number+"",l;return{c(){e=E("- å·²é€‰æ‹©èµ·å§‹ç‰ˆæœ¬: v"),l=E(t)},l(s){e=V(s,"- å·²é€‰æ‹©èµ·å§‹ç‰ˆæœ¬: v"),l=V(s,t)},m(s,r){C(s,e,r),C(s,l,r)},p(s,r){r&32&&t!==(t=s[5].from.version_number+"")&&U(l,t)},d(s){s&&(c(e),c(l))}}}function Wt(n){let e,t=n[5].to.version_number+"",l;return{c(){e=E("- å·²é€‰æ‹©ç»“æŸç‰ˆæœ¬: v"),l=E(t)},l(s){e=V(s,"- å·²é€‰æ‹©ç»“æŸç‰ˆæœ¬: v"),l=V(s,t)},m(s,r){C(s,e,r),C(s,l,r)},p(s,r){r&32&&t!==(t=s[5].to.version_number+"")&&U(l,t)},d(s){s&&(c(e),c(l))}}}function ql(n){let e;return{c(){e=E("å–æ¶ˆ")},l(t){e=V(t,"å–æ¶ˆ")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Kl(n){let e=n[22].version_hash+"",t;return{c(){t=E(e)},l(l){t=V(l,e)},m(l,s){C(l,t,s)},p(l,s){s&4&&e!==(e=l[22].version_hash+"")&&U(t,e)},d(l){l&&c(t)}}}function qt(n){let e,t;return e=new Nt({props:{variant:"success",size:"sm",$$slots:{default:[Jl]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Jl(n){let e;return{c(){e=E("å½“å‰ç‰ˆæœ¬")},l(t){e=V(t,"å½“å‰ç‰ˆæœ¬")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Ql(n){let e=sl(n[22].version_type)+"",t;return{c(){t=E(e)},l(l){t=V(l,e)},m(l,s){C(l,t,s)},p(l,s){s&4&&e!==(e=sl(l[22].version_type)+"")&&U(t,e)},d(l){l&&c(t)}}}function Kt(n){let e,t,l,s=n[22].diff_summary.lines_added>0&&Jt(n),r=n[22].diff_summary.lines_removed>0&&Qt(n),o=n[22].diff_summary.lines_changed>0&&Xt(n);return{c(){e=p("div"),s&&s.c(),t=D(),r&&r.c(),l=D(),o&&o.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var f=b(e);s&&s.l(f),t=y(f),r&&r.l(f),l=y(f),o&&o.l(f),f.forEach(c),this.h()},h(){$(e,"class","flex items-center space-x-4 text-sm mb-3")},m(i,f){C(i,e,f),s&&s.m(e,null),a(e,t),r&&r.m(e,null),a(e,l),o&&o.m(e,null)},p(i,f){i[22].diff_summary.lines_added>0?s?s.p(i,f):(s=Jt(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[22].diff_summary.lines_removed>0?r?r.p(i,f):(r=Qt(i),r.c(),r.m(e,l)):r&&(r.d(1),r=null),i[22].diff_summary.lines_changed>0?o?o.p(i,f):(o=Xt(i),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(i){i&&c(e),s&&s.d(),r&&r.d(),o&&o.d()}}}function Jt(n){let e,t,l=n[22].diff_summary.lines_added+"",s,r;return{c(){e=p("span"),t=E("+"),s=E(l),r=E(" è¡Œæ·»åŠ "),this.h()},l(o){e=g(o,"SPAN",{class:!0});var i=b(e);t=V(i,"+"),s=V(i,l),r=V(i," è¡Œæ·»åŠ "),i.forEach(c),this.h()},h(){$(e,"class","text-green-600")},m(o,i){C(o,e,i),a(e,t),a(e,s),a(e,r)},p(o,i){i&4&&l!==(l=o[22].diff_summary.lines_added+"")&&U(s,l)},d(o){o&&c(e)}}}function Qt(n){let e,t,l=n[22].diff_summary.lines_removed+"",s,r;return{c(){e=p("span"),t=E("-"),s=E(l),r=E(" è¡Œåˆ é™¤"),this.h()},l(o){e=g(o,"SPAN",{class:!0});var i=b(e);t=V(i,"-"),s=V(i,l),r=V(i," è¡Œåˆ é™¤"),i.forEach(c),this.h()},h(){$(e,"class","text-red-600")},m(o,i){C(o,e,i),a(e,t),a(e,s),a(e,r)},p(o,i){i&4&&l!==(l=o[22].diff_summary.lines_removed+"")&&U(s,l)},d(o){o&&c(e)}}}function Xt(n){let e,t,l=n[22].diff_summary.lines_changed+"",s,r;return{c(){e=p("span"),t=E("~"),s=E(l),r=E(" è¡Œä¿®æ”¹"),this.h()},l(o){e=g(o,"SPAN",{class:!0});var i=b(e);t=V(i,"~"),s=V(i,l),r=V(i," è¡Œä¿®æ”¹"),i.forEach(c),this.h()},h(){$(e,"class","text-blue-600")},m(o,i){C(o,e,i),a(e,t),a(e,s),a(e,r)},p(o,i){i&4&&l!==(l=o[22].diff_summary.lines_changed+"")&&U(s,l)},d(o){o&&c(e)}}}function Xl(n){let e;return{c(){e=E("ğŸ‘ æŸ¥çœ‹")},l(t){e=V(t,"ğŸ‘ æŸ¥çœ‹")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Yt(n){let e,t;function l(){return n[17](n[22])}return e=new Ee({props:{variant:"outline",size:"sm",$$slots:{default:[Yl]},$$scope:{ctx:n}}}),e.$on("click",l),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,r){x(e,s,r),t=!0},p(s,r){n=s;const o={};r&33554432&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function Yl(n){let e;return{c(){e=E("â®Œ æ¢å¤")},l(t){e=V(t,"â®Œ æ¢å¤")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Zl(n){let e;return{c(){e=E("ğŸ“¥ ä¸‹è½½")},l(t){e=V(t,"ğŸ“¥ ä¸‹è½½")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function xl(n){let e;return{c(){e=E("A")},l(t){e=V(t,"A")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function es(n){let e;return{c(){e=E("B")},l(t){e=V(t,"B")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Zt(n){var ye,oe,$t;let e,t,l,s,r,o,i=ll(n[22].version_type)+"",f,u,h,d,m,_,P=n[22].version_number+"",w,I,W,H,F,S,G,N,k=(n[22].commit_message||"æ— æäº¤ä¿¡æ¯")+"",T,v,z,L,K,O="ğŸ‘¤",le,ce,X=(((ye=n[22].author)==null?void 0:ye.username)||"Unknown")+"",_e,De,J,Q,j="ğŸ•’",te,se,ne=el(n[22].created_at)+"",re,Me,$e,Ce,Re="ğŸ“¦",me,Ve,Oe=tl(n[22].file_size)+"",st,Ue,nt,he,Ne,ct,Be,je,Ge,Ae,Se,ut,ve,Ke,be;W=new Nt({props:{variant:"secondary",size:"sm",$$slots:{default:[Kl]},$$scope:{ctx:n}}});let ae=n[22].id===n[1]&&qt(n);S=new Nt({props:{variant:"outline",size:"sm",$$slots:{default:[Ql]},$$scope:{ctx:n}}});let ue=n[22].diff_summary&&Kt(n);function gt(){return n[16](n[22])}Ne=new Ee({props:{variant:"outline",size:"sm",$$slots:{default:[Xl]},$$scope:{ctx:n}}}),Ne.$on("click",gt);let ie=n[22].id!==n[1]&&Yt(n);function It(){return n[18](n[22])}je=new Ee({props:{variant:"outline",size:"sm",$$slots:{default:[Zl]},$$scope:{ctx:n}}}),je.$on("click",It);function Je(){return n[19](n[22])}Se=new Ee({props:{variant:((oe=n[5].from)==null?void 0:oe.id)===n[22].id?"primary":"ghost",size:"sm",$$slots:{default:[xl]},$$scope:{ctx:n}}}),Se.$on("click",Je);function Te(){return n[20](n[22])}return ve=new Ee({props:{variant:(($t=n[5].to)==null?void 0:$t.id)===n[22].id?"primary":"ghost",size:"sm",$$slots:{default:[es]},$$scope:{ctx:n}}}),ve.$on("click",Te),{c(){e=p("div"),t=p("div"),l=p("div"),s=p("div"),r=p("div"),o=p("span"),f=E(i),u=D(),h=p("div"),d=p("div"),m=p("h3"),_=E("ç‰ˆæœ¬ "),w=E(P),I=D(),Y(W.$$.fragment),H=D(),ae&&ae.c(),F=D(),Y(S.$$.fragment),G=D(),N=p("p"),T=E(k),v=D(),z=p("div"),L=p("span"),K=p("span"),K.textContent=O,le=D(),ce=p("span"),_e=E(X),De=D(),J=p("span"),Q=p("span"),Q.textContent=j,te=D(),se=p("span"),re=E(ne),Me=D(),$e=p("span"),Ce=p("span"),Ce.textContent=Re,me=D(),Ve=p("span"),st=E(Oe),Ue=D(),ue&&ue.c(),nt=D(),he=p("div"),Y(Ne.$$.fragment),ct=D(),ie&&ie.c(),Be=D(),Y(je.$$.fragment),Ge=D(),Ae=p("div"),Y(Se.$$.fragment),ut=D(),Y(ve.$$.fragment),Ke=D(),this.h()},l(fe){e=g(fe,"DIV",{class:!0});var B=b(e);t=g(B,"DIV",{class:!0});var rt=b(t);l=g(rt,"DIV",{class:!0});var Ie=b(l);s=g(Ie,"DIV",{class:!0});var it=b(s);r=g(it,"DIV",{class:!0});var ot=b(r);o=g(ot,"SPAN",{class:!0});var Qe=b(o);f=V(Qe,i),Qe.forEach(c),ot.forEach(c),it.forEach(c),u=y(Ie),h=g(Ie,"DIV",{class:!0});var ke=b(h);d=g(ke,"DIV",{class:!0});var ze=b(d);m=g(ze,"H3",{class:!0});var Xe=b(m);_=V(Xe,"ç‰ˆæœ¬ "),w=V(Xe,P),Xe.forEach(c),I=y(ze),Z(W.$$.fragment,ze),H=y(ze),ae&&ae.l(ze),F=y(ze),Z(S.$$.fragment,ze),ze.forEach(c),G=y(ke),N=g(ke,"P",{class:!0});var ft=b(N);T=V(ft,k),ft.forEach(c),v=y(ke),z=g(ke,"DIV",{class:!0});var Ye=b(z);L=g(Ye,"SPAN",{class:!0});var dt=b(L);K=g(dt,"SPAN",{"data-svelte-h":!0}),Pe(K)!=="svelte-4ldczv"&&(K.textContent=O),le=y(dt),ce=g(dt,"SPAN",{});var wt=b(ce);_e=V(wt,X),wt.forEach(c),dt.forEach(c),De=y(Ye),J=g(Ye,"SPAN",{class:!0});var _t=b(J);Q=g(_t,"SPAN",{"data-svelte-h":!0}),Pe(Q)!=="svelte-16te4x"&&(Q.textContent=j),te=y(_t),se=g(_t,"SPAN",{});var Dt=b(se);re=V(Dt,ne),Dt.forEach(c),_t.forEach(c),Me=y(Ye),$e=g(Ye,"SPAN",{class:!0});var R=b($e);Ce=g(R,"SPAN",{"data-svelte-h":!0}),Pe(Ce)!=="svelte-h7zb5x"&&(Ce.textContent=Re),me=y(R),Ve=g(R,"SPAN",{});var q=b(Ve);st=V(q,Oe),q.forEach(c),R.forEach(c),Ye.forEach(c),Ue=y(ke),ue&&ue.l(ke),nt=y(ke),he=g(ke,"DIV",{class:!0});var pe=b(he);Z(Ne.$$.fragment,pe),ct=y(pe),ie&&ie.l(pe),Be=y(pe),Z(je.$$.fragment,pe),Ge=y(pe),Ae=g(pe,"DIV",{class:!0});var Fe=b(Ae);Z(Se.$$.fragment,Fe),ut=y(Fe),Z(ve.$$.fragment,Fe),Fe.forEach(c),pe.forEach(c),ke.forEach(c),Ie.forEach(c),rt.forEach(c),Ke=y(B),B.forEach(c),this.h()},h(){$(o,"class","text-lg"),$(r,"class","w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center"),$(s,"class","flex-shrink-0"),$(m,"class","text-lg font-medium text-gray-900"),$(d,"class","flex items-center space-x-2 mb-2"),$(N,"class","text-gray-700 mb-3"),$(L,"class","flex items-center space-x-1"),$(J,"class","flex items-center space-x-1"),$($e,"class","flex items-center space-x-1"),$(z,"class","flex items-center space-x-4 text-sm text-gray-600 mb-3"),$(Ae,"class","flex items-center space-x-1"),$(he,"class","flex items-center space-x-2"),$(h,"class","flex-1 min-w-0"),$(l,"class","flex items-start space-x-4"),$(t,"class","p-6"),$(e,"class","bg-white rounded-lg border border-gray-200 hover:border-gray-300 transition-colors"),de(e,"border-blue-300",n[22].id===n[1]),de(e,"bg-blue-50",n[22].id===n[1])},m(fe,B){C(fe,e,B),a(e,t),a(t,l),a(l,s),a(s,r),a(r,o),a(o,f),a(l,u),a(l,h),a(h,d),a(d,m),a(m,_),a(m,w),a(d,I),x(W,d,null),a(d,H),ae&&ae.m(d,null),a(d,F),x(S,d,null),a(h,G),a(h,N),a(N,T),a(h,v),a(h,z),a(z,L),a(L,K),a(L,le),a(L,ce),a(ce,_e),a(z,De),a(z,J),a(J,Q),a(J,te),a(J,se),a(se,re),a(z,Me),a(z,$e),a($e,Ce),a($e,me),a($e,Ve),a(Ve,st),a(h,Ue),ue&&ue.m(h,null),a(h,nt),a(h,he),x(Ne,he,null),a(he,ct),ie&&ie.m(he,null),a(he,Be),x(je,he,null),a(he,Ge),a(he,Ae),x(Se,Ae,null),a(Ae,ut),x(ve,Ae,null),a(e,Ke),be=!0},p(fe,B){var ze,Xe,ft;n=fe,(!be||B&4)&&i!==(i=ll(n[22].version_type)+"")&&U(f,i),(!be||B&4)&&P!==(P=n[22].version_number+"")&&U(w,P);const rt={};B&33554436&&(rt.$$scope={dirty:B,ctx:n}),W.$set(rt),n[22].id===n[1]?ae?B&6&&A(ae,1):(ae=qt(n),ae.c(),A(ae,1),ae.m(d,F)):ae&&(He(),M(ae,1,1,()=>{ae=null}),Le());const Ie={};B&33554436&&(Ie.$$scope={dirty:B,ctx:n}),S.$set(Ie),(!be||B&4)&&k!==(k=(n[22].commit_message||"æ— æäº¤ä¿¡æ¯")+"")&&U(T,k),(!be||B&4)&&X!==(X=(((ze=n[22].author)==null?void 0:ze.username)||"Unknown")+"")&&U(_e,X),(!be||B&4)&&ne!==(ne=el(n[22].created_at)+"")&&U(re,ne),(!be||B&4)&&Oe!==(Oe=tl(n[22].file_size)+"")&&U(st,Oe),n[22].diff_summary?ue?ue.p(n,B):(ue=Kt(n),ue.c(),ue.m(h,nt)):ue&&(ue.d(1),ue=null);const it={};B&33554432&&(it.$$scope={dirty:B,ctx:n}),Ne.$set(it),n[22].id!==n[1]?ie?(ie.p(n,B),B&6&&A(ie,1)):(ie=Yt(n),ie.c(),A(ie,1),ie.m(he,Be)):ie&&(He(),M(ie,1,1,()=>{ie=null}),Le());const ot={};B&33554432&&(ot.$$scope={dirty:B,ctx:n}),je.$set(ot);const Qe={};B&36&&(Qe.variant=((Xe=n[5].from)==null?void 0:Xe.id)===n[22].id?"primary":"ghost"),B&33554432&&(Qe.$$scope={dirty:B,ctx:n}),Se.$set(Qe);const ke={};B&36&&(ke.variant=((ft=n[5].to)==null?void 0:ft.id)===n[22].id?"primary":"ghost"),B&33554432&&(ke.$$scope={dirty:B,ctx:n}),ve.$set(ke),(!be||B&6)&&de(e,"border-blue-300",n[22].id===n[1]),(!be||B&6)&&de(e,"bg-blue-50",n[22].id===n[1])},i(fe){be||(A(W.$$.fragment,fe),A(ae),A(S.$$.fragment,fe),A(Ne.$$.fragment,fe),A(ie),A(je.$$.fragment,fe),A(Se.$$.fragment,fe),A(ve.$$.fragment,fe),be=!0)},o(fe){M(W.$$.fragment,fe),M(ae),M(S.$$.fragment,fe),M(Ne.$$.fragment,fe),M(ie),M(je.$$.fragment,fe),M(Se.$$.fragment,fe),M(ve.$$.fragment,fe),be=!1},d(fe){fe&&c(e),ee(W),ae&&ae.d(),ee(S),ue&&ue.d(),ee(Ne),ie&&ie.d(),ee(je),ee(Se),ee(ve)}}}function xt(n){let e,t,l;return t=new Ee({props:{variant:"outline",$$slots:{default:[ts]},$$scope:{ctx:n}}}),t.$on("click",n[21]),{c(){e=p("div"),Y(t.$$.fragment),this.h()},l(s){e=g(s,"DIV",{class:!0});var r=b(e);Z(t.$$.fragment,r),r.forEach(c),this.h()},h(){$(e,"class","text-center mt-6")},m(s,r){C(s,e,r),x(t,e,null),l=!0},p(s,r){const o={};r&33554432&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){l||(A(t.$$.fragment,s),l=!0)},o(s){M(t.$$.fragment,s),l=!1},d(s){s&&c(e),ee(t)}}}function ts(n){let e;return{c(){e=E("åŠ è½½æ›´å¤šç‰ˆæœ¬")},l(t){e=V(t,"åŠ è½½æ›´å¤šç‰ˆæœ¬")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function ls(n){let e;return{c(){e=E("é‡è¯•")},l(t){e=V(t,"é‡è¯•")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function ss(n){let e,t,l,s,r="ç‰ˆæœ¬å†å²",o,i,f,u,h,d,m,_,P,w,I,W;m=new Ee({props:{variant:"outline",size:"sm",disabled:n[3],$$slots:{default:[jl]},$$scope:{ctx:n}}}),m.$on("click",n[7]);let H=n[5].from&&n[5].to&&Ot(n);const F=[Wl,Gl,Ul,Ol],S=[];function G(N,k){return N[3]?0:N[4]?1:N[2].length===0?2:3}return w=G(n),I=S[w]=F[w](n),{c(){e=p("div"),t=p("div"),l=p("div"),s=p("h2"),s.textContent=r,o=D(),i=p("p"),f=E(n[0]),u=E(" çš„æ‰€æœ‰ç‰ˆæœ¬è®°å½•"),h=D(),d=p("div"),Y(m.$$.fragment),_=D(),H&&H.c(),P=D(),I.c(),this.h()},l(N){e=g(N,"DIV",{class:!0});var k=b(e);t=g(k,"DIV",{class:!0});var T=b(t);l=g(T,"DIV",{});var v=b(l);s=g(v,"H2",{class:!0,"data-svelte-h":!0}),Pe(s)!=="svelte-1ttthc1"&&(s.textContent=r),o=y(v),i=g(v,"P",{class:!0});var z=b(i);f=V(z,n[0]),u=V(z," çš„æ‰€æœ‰ç‰ˆæœ¬è®°å½•"),z.forEach(c),v.forEach(c),h=y(T),d=g(T,"DIV",{class:!0});var L=b(d);Z(m.$$.fragment,L),_=y(L),H&&H.l(L),L.forEach(c),T.forEach(c),P=y(k),I.l(k),k.forEach(c),this.h()},h(){$(s,"class","text-xl font-semibold text-gray-900"),$(i,"class","text-sm text-gray-600 mt-1"),$(d,"class","flex items-center space-x-2"),$(t,"class","flex items-center justify-between mb-6"),$(e,"class","version-history svelte-p8co6s")},m(N,k){C(N,e,k),a(e,t),a(t,l),a(l,s),a(l,o),a(l,i),a(i,f),a(i,u),a(t,h),a(t,d),x(m,d,null),a(d,_),H&&H.m(d,null),a(e,P),S[w].m(e,null),W=!0},p(N,[k]){(!W||k&1)&&U(f,N[0]);const T={};k&8&&(T.disabled=N[3]),k&33554432&&(T.$$scope={dirty:k,ctx:N}),m.$set(T),N[5].from&&N[5].to?H?(H.p(N,k),k&32&&A(H,1)):(H=Ot(N),H.c(),A(H,1),H.m(d,null)):H&&(He(),M(H,1,1,()=>{H=null}),Le());let v=w;w=G(N),w===v?S[w].p(N,k):(He(),M(S[v],1,1,()=>{S[v]=null}),Le(),I=S[w],I?I.p(N,k):(I=S[w]=F[w](N),I.c()),A(I,1),I.m(e,null))},i(N){W||(A(m.$$.fragment,N),A(H),A(I),W=!0)},o(N){M(m.$$.fragment,N),M(H),M(I),W=!1},d(N){N&&c(e),ee(m),H&&H.d(),S[w].d()}}}function el(n){const e=new Date(n),l=new Date-e,s=Math.floor(l/(1e3*60*60*24));return s===0?new Intl.DateTimeFormat("zh-CN",{hour:"2-digit",minute:"2-digit"}).format(e)+" (ä»Šå¤©)":s===1?"æ˜¨å¤© "+new Intl.DateTimeFormat("zh-CN",{hour:"2-digit",minute:"2-digit"}).format(e):s<7?`${s}å¤©å‰`:new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function tl(n){if(!n)return"0 B";const e=["B","KB","MB","GB"],t=Math.floor(Math.log(n)/Math.log(1024));return Math.round(n/Math.pow(1024,t)*100)/100+" "+e[t]}function ll(n){return{INITIAL:"ğŸ‰",EDIT:"âœï¸",MERGE:"ğŸ”€",RESTORE:"â®Œ"}[n]||"ğŸ“„"}function sl(n){return{INITIAL:"åˆå§‹ç‰ˆæœ¬",EDIT:"ç¼–è¾‘",MERGE:"åˆå¹¶",RESTORE:"æ¢å¤"}[n]||"æœªçŸ¥"}function ns(n,e,t){let{fileId:l=null}=e,{filePath:s=""}=e,{repository:r=null}=e,{currentVersionId:o=null}=e;const i=Al();let f=[],u=!0,h=null,d={from:null,to:null};Ht(async()=>{await m()});async function m(){var v,z;if(l){t(3,u=!0),t(4,h=null);try{const L=await Et.get(`/api/file-editor/files/${l}/versions?limit=50`);t(2,f=L.data.versions||[])}catch(L){console.error("åŠ è½½ç‰ˆæœ¬å†å²å¤±è´¥:",L),t(4,h=((z=(v=L.response)==null?void 0:v.data)==null?void 0:z.detail)||"åŠ è½½ç‰ˆæœ¬å†å²å¤±è´¥")}finally{t(3,u=!1)}}}function _(v){i("viewVersion",{versionId:v.id,versionNumber:v.version_number,versionHash:v.version_hash})}async function P(v){var z,L;if(confirm(`ç¡®å®šè¦æ¢å¤åˆ°ç‰ˆæœ¬ ${v.version_number} å—ï¼Ÿ`))try{const K=await Et.post(`/api/file-editor/files/${l}/restore/${v.id}`,{message:`æ¢å¤åˆ°ç‰ˆæœ¬ ${v.version_number}: ${v.commit_message}`});i("versionRestored",{newVersionId:K.data.id,restoredFromVersion:v.version_number}),await m()}catch(K){console.error("æ¢å¤ç‰ˆæœ¬å¤±è´¥:",K),i("error",{message:((L=(z=K.response)==null?void 0:z.data)==null?void 0:L.detail)||"æ¢å¤ç‰ˆæœ¬å¤±è´¥"})}}function w(v,z){t(5,d[z]=v,d),d.from&&d.to&&I()}function I(){!d.from||!d.to||(i("showDiff",{fromVersion:d.from,toVersion:d.to}),t(5,d={from:null,to:null}))}async function W(v){try{const z=await Et.get(`/api/file-editor/files/${l}/versions/${v.id}/content`,{responseType:"blob"}),L=window.URL.createObjectURL(new Blob([z.data])),K=document.createElement("a");K.href=L,K.setAttribute("download",`${s.split("/").pop()}_v${v.version_number}`),document.body.appendChild(K),K.click(),K.remove(),window.URL.revokeObjectURL(L)}catch(z){console.error("ä¸‹è½½ç‰ˆæœ¬å¤±è´¥:",z),i("error",{message:"ä¸‹è½½ç‰ˆæœ¬å¤±è´¥"})}}const H=()=>t(5,d={from:null,to:null}),F=v=>_(v),S=v=>P(v),G=v=>W(v),N=v=>w(v,"from"),k=v=>w(v,"to"),T=()=>i("loadMore");return n.$$set=v=>{"fileId"in v&&t(13,l=v.fileId),"filePath"in v&&t(0,s=v.filePath),"repository"in v&&t(14,r=v.repository),"currentVersionId"in v&&t(1,o=v.currentVersionId)},[s,o,f,u,h,d,i,m,_,P,w,I,W,l,r,H,F,S,G,N,k,T]}class rs extends Lt{constructor(e){super(),Mt(this,e,ns,ss,zt,{fileId:13,filePath:0,repository:14,currentVersionId:1})}}function nl(n,e,t){const l=n.slice();return l[17]=e[t],l}function rl(n,e,t){const l=n.slice();return l[20]=e[t],l[22]=t,l}function il(n,e,t){const l=n.slice();return l[17]=e[t],l}function ol(n,e,t){const l=n.slice();return l[20]=e[t],l[22]=t,l}function fl(n,e,t){const l=n.slice();return l[17]=e[t],l}function al(n,e,t){const l=n.slice();return l[20]=e[t],l[22]=t,l}function is(n){let e=n[9]?"éšè—":"æ˜¾ç¤º",t,l;return{c(){t=E(e),l=E("è¡Œå·")},l(s){t=V(s,e),l=V(s,"è¡Œå·")},m(s,r){C(s,t,r),C(s,l,r)},p(s,r){r&512&&e!==(e=s[9]?"éšè—":"æ˜¾ç¤º")&&U(t,e)},d(s){s&&(c(t),c(l))}}}function os(n){let e=n[8]?"éšè—":"æ˜¾ç¤º",t,l;return{c(){t=E(e),l=E("ç©ºç™½å­—ç¬¦")},l(s){t=V(s,e),l=V(s,"ç©ºç™½å­—ç¬¦")},m(s,r){C(s,t,r),C(s,l,r)},p(s,r){r&256&&e!==(e=s[8]?"éšè—":"æ˜¾ç¤º")&&U(t,e)},d(s){s&&(c(t),c(l))}}}function fs(n){var l;let e=((l=n[0])==null?void 0:l.version_hash)+"",t;return{c(){t=E(e)},l(s){t=V(s,e)},m(s,r){C(s,t,r)},p(s,r){var o;r&1&&e!==(e=((o=s[0])==null?void 0:o.version_hash)+"")&&U(t,e)},d(s){s&&c(t)}}}function as(n){var l;let e=((l=n[1])==null?void 0:l.version_hash)+"",t;return{c(){t=E(e)},l(s){t=V(s,e)},m(s,r){C(s,t,r)},p(s,r){var o;r&2&&e!==(e=((o=s[1])==null?void 0:o.version_hash)+"")&&U(t,e)},d(s){s&&c(t)}}}function cl(n){let e,t,l,s=n[3].diff_summary.lines_added>0&&ul(n),r=n[3].diff_summary.lines_removed>0&&dl(n),o=n[3].diff_summary.lines_changed>0&&_l(n);return{c(){e=p("div"),s&&s.c(),t=D(),r&&r.c(),l=D(),o&&o.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var f=b(e);s&&s.l(f),t=y(f),r&&r.l(f),l=y(f),o&&o.l(f),f.forEach(c),this.h()},h(){$(e,"class","mt-4 flex items-center space-x-6 text-sm")},m(i,f){C(i,e,f),s&&s.m(e,null),a(e,t),r&&r.m(e,null),a(e,l),o&&o.m(e,null)},p(i,f){i[3].diff_summary.lines_added>0?s?s.p(i,f):(s=ul(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[3].diff_summary.lines_removed>0?r?r.p(i,f):(r=dl(i),r.c(),r.m(e,l)):r&&(r.d(1),r=null),i[3].diff_summary.lines_changed>0?o?o.p(i,f):(o=_l(i),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(i){i&&c(e),s&&s.d(),r&&r.d(),o&&o.d()}}}function ul(n){let e,t,l,s=n[3].diff_summary.lines_added+"",r,o;return{c(){e=p("span"),t=p("span"),l=E("+"),r=E(s),o=E(" æ·»åŠ "),this.h()},l(i){e=g(i,"SPAN",{class:!0});var f=b(e);t=g(f,"SPAN",{class:!0});var u=b(t);l=V(u,"+"),r=V(u,s),u.forEach(c),o=V(f," æ·»åŠ "),f.forEach(c),this.h()},h(){$(t,"class","font-medium"),$(e,"class","text-green-600")},m(i,f){C(i,e,f),a(e,t),a(t,l),a(t,r),a(e,o)},p(i,f){f&8&&s!==(s=i[3].diff_summary.lines_added+"")&&U(r,s)},d(i){i&&c(e)}}}function dl(n){let e,t,l,s=n[3].diff_summary.lines_removed+"",r,o;return{c(){e=p("span"),t=p("span"),l=E("-"),r=E(s),o=E(" åˆ é™¤"),this.h()},l(i){e=g(i,"SPAN",{class:!0});var f=b(e);t=g(f,"SPAN",{class:!0});var u=b(t);l=V(u,"-"),r=V(u,s),u.forEach(c),o=V(f," åˆ é™¤"),f.forEach(c),this.h()},h(){$(t,"class","font-medium"),$(e,"class","text-red-600")},m(i,f){C(i,e,f),a(e,t),a(t,l),a(t,r),a(e,o)},p(i,f){f&8&&s!==(s=i[3].diff_summary.lines_removed+"")&&U(r,s)},d(i){i&&c(e)}}}function _l(n){let e,t,l,s=n[3].diff_summary.lines_changed+"",r,o;return{c(){e=p("span"),t=p("span"),l=E("~"),r=E(s),o=E(" ä¿®æ”¹"),this.h()},l(i){e=g(i,"SPAN",{class:!0});var f=b(e);t=g(f,"SPAN",{class:!0});var u=b(t);l=V(u,"~"),r=V(u,s),u.forEach(c),o=V(f," ä¿®æ”¹"),f.forEach(c),this.h()},h(){$(t,"class","font-medium"),$(e,"class","text-blue-600")},m(i,f){C(i,e,f),a(e,t),a(t,l),a(t,r),a(e,o)},p(i,f){f&8&&s!==(s=i[3].diff_summary.lines_changed+"")&&U(r,s)},d(i){i&&c(e)}}}function cs(n){var k,T;let e,t,l,s,r,o=((k=n[0])==null?void 0:k.version_number)+"",i,f,u,h,d,m,_,P,w=((T=n[1])==null?void 0:T.version_number)+"",I,W,H,F=we(n[4]),S=[];for(let v=0;v<F.length;v+=1)S[v]=pl(il(n,F,v));let G=we(n[4]),N=[];for(let v=0;v<G.length;v+=1)N[v]=kl(nl(n,G,v));return{c(){e=p("div"),t=p("div"),l=p("div"),s=p("h4"),r=E("ç‰ˆæœ¬ "),i=E(o),f=D(),u=p("div");for(let v=0;v<S.length;v+=1)S[v].c();h=D(),d=p("div"),m=p("div"),_=p("h4"),P=E("ç‰ˆæœ¬ "),I=E(w),W=D(),H=p("div");for(let v=0;v<N.length;v+=1)N[v].c();this.h()},l(v){e=g(v,"DIV",{class:!0});var z=b(e);t=g(z,"DIV",{class:!0});var L=b(t);l=g(L,"DIV",{class:!0});var K=b(l);s=g(K,"H4",{class:!0});var O=b(s);r=V(O,"ç‰ˆæœ¬ "),i=V(O,o),O.forEach(c),K.forEach(c),f=y(L),u=g(L,"DIV",{class:!0});var le=b(u);for(let J=0;J<S.length;J+=1)S[J].l(le);le.forEach(c),L.forEach(c),h=y(z),d=g(z,"DIV",{class:!0});var ce=b(d);m=g(ce,"DIV",{class:!0});var X=b(m);_=g(X,"H4",{class:!0});var _e=b(_);P=V(_e,"ç‰ˆæœ¬ "),I=V(_e,w),_e.forEach(c),X.forEach(c),W=y(ce),H=g(ce,"DIV",{class:!0});var De=b(H);for(let J=0;J<N.length;J+=1)N[J].l(De);De.forEach(c),ce.forEach(c),z.forEach(c),this.h()},h(){$(s,"class","text-sm font-medium text-red-900"),$(l,"class","diff-side-header bg-red-50 px-4 py-2 border-b border-red-200 svelte-bosl88"),$(u,"class","diff-side-content"),$(t,"class","diff-side bg-white"),$(_,"class","text-sm font-medium text-green-900"),$(m,"class","diff-side-header bg-green-50 px-4 py-2 border-b border-green-200 svelte-bosl88"),$(H,"class","diff-side-content"),$(d,"class","diff-side bg-white"),$(e,"class","diff-split grid grid-cols-2 gap-px bg-gray-200 svelte-bosl88")},m(v,z){C(v,e,z),a(e,t),a(t,l),a(l,s),a(s,r),a(s,i),a(t,f),a(t,u);for(let L=0;L<S.length;L+=1)S[L]&&S[L].m(u,null);a(e,h),a(e,d),a(d,m),a(m,_),a(_,P),a(_,I),a(d,W),a(d,H);for(let L=0;L<N.length;L+=1)N[L]&&N[L].m(H,null)},p(v,z){var L,K;if(z&1&&o!==(o=((L=v[0])==null?void 0:L.version_number)+"")&&U(i,o),z&528){F=we(v[4]);let O;for(O=0;O<F.length;O+=1){const le=il(v,F,O);S[O]?S[O].p(le,z):(S[O]=pl(le),S[O].c(),S[O].m(u,null))}for(;O<S.length;O+=1)S[O].d(1);S.length=F.length}if(z&2&&w!==(w=((K=v[1])==null?void 0:K.version_number)+"")&&U(I,w),z&528){G=we(v[4]);let O;for(O=0;O<G.length;O+=1){const le=nl(v,G,O);N[O]?N[O].p(le,z):(N[O]=kl(le),N[O].c(),N[O].m(H,null))}for(;O<N.length;O+=1)N[O].d(1);N.length=G.length}},i:ge,o:ge,d(v){v&&c(e),at(S,v),at(N,v)}}}function us(n){let e,t=we(n[4]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Il(fl(n,t,s));return{c(){e=p("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=g(s,"DIV",{class:!0});var r=b(e);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(c),this.h()},h(){$(e,"class","diff-unified")},m(s,r){C(s,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,r){if(r&784){t=we(s[4]);let o;for(o=0;o<t.length;o+=1){const i=fl(s,t,o);l[o]?l[o].p(i,r):(l[o]=Il(i),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},i:ge,o:ge,d(s){s&&c(e),at(l,s)}}}function ds(n){let e,t='<div class="text-gray-400 text-4xl mb-4">ğŸ”</div> <p class="text-gray-600">ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´æ²¡æœ‰å·®å¼‚</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),Pe(e)!=="svelte-190km88"&&(e.innerHTML=t),this.h()},h(){$(e,"class","text-center py-12 bg-gray-50")},m(l,s){C(l,e,s)},p:ge,i:ge,o:ge,d(l){l&&c(e)}}}function _s(n){let e,t,l,s,r,o,i;return o=new Ee({props:{$$slots:{default:[ms]},$$scope:{ctx:n}}}),o.$on("click",n[11]),{c(){e=p("div"),t=p("div"),l=E("âŒ "),s=E(n[6]),r=D(),Y(o.$$.fragment),this.h()},l(f){e=g(f,"DIV",{class:!0});var u=b(e);t=g(u,"DIV",{class:!0});var h=b(t);l=V(h,"âŒ "),s=V(h,n[6]),h.forEach(c),r=y(u),Z(o.$$.fragment,u),u.forEach(c),this.h()},h(){$(t,"class","text-red-500 text-lg mb-4"),$(e,"class","text-center py-12")},m(f,u){C(f,e,u),a(e,t),a(t,l),a(t,s),a(e,r),x(o,e,null),i=!0},p(f,u){(!i||u&64)&&U(s,f[6]);const h={};u&536870912&&(h.$$scope={dirty:u,ctx:f}),o.$set(h)},i(f){i||(A(o.$$.fragment,f),i=!0)},o(f){M(o.$$.fragment,f),i=!1},d(f){f&&c(e),ee(o)}}}function hs(n){let e,t;return e=new Rt({props:{message:"åŠ è½½ç‰ˆæœ¬å·®å¼‚ä¸­..."}}),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:ge,i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function hl(n){let e,t,l,s=n[20].content+"",r,o,i=n[9]&&ml(n);return{c(){e=p("div"),i&&i.c(),t=D(),l=p("div"),r=E(s),this.h()},l(f){e=g(f,"DIV",{class:!0});var u=b(e);i&&i.l(u),t=y(u),l=g(u,"DIV",{class:!0});var h=b(l);r=V(h,s),h.forEach(c),u.forEach(c),this.h()},h(){$(l,"class","diff-line-content flex-1 px-3 py-1 text-sm font-mono whitespace-pre overflow-x-auto svelte-bosl88"),$(e,"class",o="diff-line flex "+Vt(n[20].type)+" svelte-bosl88")},m(f,u){C(f,e,u),i&&i.m(e,null),a(e,t),a(e,l),a(l,r)},p(f,u){f[9]?i||(i=ml(f),i.c(),i.m(e,t)):i&&(i.d(1),i=null),u&16&&s!==(s=f[20].content+"")&&U(r,s),u&16&&o!==(o="diff-line flex "+Vt(f[20].type)+" svelte-bosl88")&&$(e,"class",o)},d(f){f&&c(e),i&&i.d()}}}function ml(n){let e,t=n[22]+1+"",l;return{c(){e=p("div"),l=E(t),this.h()},l(s){e=g(s,"DIV",{class:!0});var r=b(e);l=V(r,t),r.forEach(c),this.h()},h(){$(e,"class","diff-line-number bg-gray-50 px-3 py-1 text-xs text-gray-500 font-mono border-r border-gray-200 select-none svelte-bosl88")},m(s,r){C(s,e,r),a(e,l)},d(s){s&&c(e)}}}function vl(n){let e,t=n[20].type!=="addition"&&hl(n);return{c(){t&&t.c(),e=qe()},l(l){t&&t.l(l),e=qe()},m(l,s){t&&t.m(l,s),C(l,e,s)},p(l,s){l[20].type!=="addition"?t?t.p(l,s):(t=hl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&c(e),t&&t.d(l)}}}function pl(n){let e,t,l=we(n[17].lines),s=[];for(let r=0;r<l.length;r+=1)s[r]=vl(ol(n,l,r));return{c(){e=p("div");for(let r=0;r<s.length;r+=1)s[r].c();t=D(),this.h()},l(r){e=g(r,"DIV",{class:!0});var o=b(e);for(let i=0;i<s.length;i+=1)s[i].l(o);t=y(o),o.forEach(c),this.h()},h(){$(e,"class","diff-chunk")},m(r,o){C(r,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);a(e,t)},p(r,o){if(o&528){l=we(r[17].lines);let i;for(i=0;i<l.length;i+=1){const f=ol(r,l,i);s[i]?s[i].p(f,o):(s[i]=vl(f),s[i].c(),s[i].m(e,t))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},d(r){r&&c(e),at(s,r)}}}function gl(n){let e,t,l,s=n[20].content+"",r,o,i=n[9]&&$l(n);return{c(){e=p("div"),i&&i.c(),t=D(),l=p("div"),r=E(s),this.h()},l(f){e=g(f,"DIV",{class:!0});var u=b(e);i&&i.l(u),t=y(u),l=g(u,"DIV",{class:!0});var h=b(l);r=V(h,s),h.forEach(c),u.forEach(c),this.h()},h(){$(l,"class","diff-line-content flex-1 px-3 py-1 text-sm font-mono whitespace-pre overflow-x-auto svelte-bosl88"),$(e,"class",o="diff-line flex "+Vt(n[20].type)+" svelte-bosl88")},m(f,u){C(f,e,u),i&&i.m(e,null),a(e,t),a(e,l),a(l,r)},p(f,u){f[9]?i||(i=$l(f),i.c(),i.m(e,t)):i&&(i.d(1),i=null),u&16&&s!==(s=f[20].content+"")&&U(r,s),u&16&&o!==(o="diff-line flex "+Vt(f[20].type)+" svelte-bosl88")&&$(e,"class",o)},d(f){f&&c(e),i&&i.d()}}}function $l(n){let e,t=n[22]+1+"",l;return{c(){e=p("div"),l=E(t),this.h()},l(s){e=g(s,"DIV",{class:!0});var r=b(e);l=V(r,t),r.forEach(c),this.h()},h(){$(e,"class","diff-line-number bg-gray-50 px-3 py-1 text-xs text-gray-500 font-mono border-r border-gray-200 select-none svelte-bosl88")},m(s,r){C(s,e,r),a(e,l)},d(s){s&&c(e)}}}function bl(n){let e,t=n[20].type!=="deletion"&&gl(n);return{c(){t&&t.c(),e=qe()},l(l){t&&t.l(l),e=qe()},m(l,s){t&&t.m(l,s),C(l,e,s)},p(l,s){l[20].type!=="deletion"?t?t.p(l,s):(t=gl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&c(e),t&&t.d(l)}}}function kl(n){let e,t,l=we(n[17].lines),s=[];for(let r=0;r<l.length;r+=1)s[r]=bl(rl(n,l,r));return{c(){e=p("div");for(let r=0;r<s.length;r+=1)s[r].c();t=D(),this.h()},l(r){e=g(r,"DIV",{class:!0});var o=b(e);for(let i=0;i<s.length;i+=1)s[i].l(o);t=y(o),o.forEach(c),this.h()},h(){$(e,"class","diff-chunk")},m(r,o){C(r,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);a(e,t)},p(r,o){if(o&528){l=we(r[17].lines);let i;for(i=0;i<l.length;i+=1){const f=rl(r,l,i);s[i]?s[i].p(f,o):(s[i]=bl(f),s[i].c(),s[i].m(e,t))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},d(r){r&&c(e),at(s,r)}}}function El(n){let e,t=n[22]+1+"",l;return{c(){e=p("div"),l=E(t),this.h()},l(s){e=g(s,"DIV",{class:!0});var r=b(e);l=V(r,t),r.forEach(c),this.h()},h(){$(e,"class","diff-line-number bg-gray-50 px-3 py-1 text-xs text-gray-500 font-mono border-r border-gray-200 select-none svelte-bosl88")},m(s,r){C(s,e,r),a(e,l)},d(s){s&&c(e)}}}function Vl(n){let e,t,l,s=wl(n[20].type)+"",r,o,i,f=n[20].content+"",u,h,d,m=n[9]&&El(n);return{c(){e=p("div"),m&&m.c(),t=D(),l=p("div"),r=E(s),o=D(),i=p("div"),u=E(f),h=D(),this.h()},l(_){e=g(_,"DIV",{class:!0});var P=b(e);m&&m.l(P),t=y(P),l=g(P,"DIV",{class:!0});var w=b(l);r=V(w,s),w.forEach(c),o=y(P),i=g(P,"DIV",{class:!0});var I=b(i);u=V(I,f),I.forEach(c),h=y(P),P.forEach(c),this.h()},h(){$(l,"class","diff-line-prefix px-2 py-1 text-sm font-mono select-none svelte-bosl88"),$(i,"class","diff-line-content flex-1 px-3 py-1 text-sm font-mono whitespace-pre overflow-x-auto svelte-bosl88"),$(e,"class",d="diff-line flex "+Vt(n[20].type)+" svelte-bosl88"),de(e,"show-whitespace",n[8])},m(_,P){C(_,e,P),m&&m.m(e,null),a(e,t),a(e,l),a(l,r),a(e,o),a(e,i),a(i,u),a(e,h)},p(_,P){_[9]?m||(m=El(_),m.c(),m.m(e,t)):m&&(m.d(1),m=null),P&16&&s!==(s=wl(_[20].type)+"")&&U(r,s),P&16&&f!==(f=_[20].content+"")&&U(u,f),P&16&&d!==(d="diff-line flex "+Vt(_[20].type)+" svelte-bosl88")&&$(e,"class",d),P&272&&de(e,"show-whitespace",_[8])},d(_){_&&c(e),m&&m.d()}}}function Il(n){let e,t,l,s=n[17].header+"",r,o,i,f,u=we(n[17].lines),h=[];for(let d=0;d<u.length;d+=1)h[d]=Vl(al(n,u,d));return{c(){e=p("div"),t=p("div"),l=p("code"),r=E(s),o=D(),i=p("div");for(let d=0;d<h.length;d+=1)h[d].c();f=D(),this.h()},l(d){e=g(d,"DIV",{class:!0});var m=b(e);t=g(m,"DIV",{class:!0});var _=b(t);l=g(_,"CODE",{class:!0});var P=b(l);r=V(P,s),P.forEach(c),_.forEach(c),o=y(m),i=g(m,"DIV",{class:!0});var w=b(i);for(let I=0;I<h.length;I+=1)h[I].l(w);w.forEach(c),f=y(m),m.forEach(c),this.h()},h(){$(l,"class","text-sm text-gray-700"),$(t,"class","diff-chunk-header bg-gray-100 px-4 py-2 border-l-4 border-gray-400 svelte-bosl88"),$(i,"class","diff-chunk-content border-l-4 border-gray-200"),$(e,"class","diff-chunk mb-6")},m(d,m){C(d,e,m),a(e,t),a(t,l),a(l,r),a(e,o),a(e,i);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(i,null);a(e,f)},p(d,m){if(m&16&&s!==(s=d[17].header+"")&&U(r,s),m&784){u=we(d[17].lines);let _;for(_=0;_<u.length;_+=1){const P=al(d,u,_);h[_]?h[_].p(P,m):(h[_]=Vl(P),h[_].c(),h[_].m(i,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=u.length}},d(d){d&&c(e),at(h,d)}}}function ms(n){let e;return{c(){e=E("é‡è¯•")},l(t){e=V(t,"é‡è¯•")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function vs(n){var ot,Qe,ke,ze,Xe,ft,Ye,dt,wt,_t,Dt;let e,t,l,s,r,o="ç‰ˆæœ¬å¯¹æ¯”",i,f,u,h,d,m,_,P="åˆ†å±",w,I,W="ç»Ÿä¸€",H,F,S,G,N,k,T,v,z,L,K,O,le=((ot=n[0])==null?void 0:ot.version_number)+"",ce,X,_e,De,J,Q=(((Qe=n[0])==null?void 0:Qe.commit_message)||"æ— æäº¤ä¿¡æ¯")+"",j,te,se,ne=((ze=(ke=n[0])==null?void 0:ke.author)==null?void 0:ze.username)+"",re,Me,$e=St((Xe=n[0])==null?void 0:Xe.created_at)+"",Ce,Re,me,Ve,Oe,st,Ue,nt,he=((ft=n[1])==null?void 0:ft.version_number)+"",Ne,ct,Be,je,Ge,Ae=(((Ye=n[1])==null?void 0:Ye.commit_message)||"æ— æäº¤ä¿¡æ¯")+"",Se,ut,ve,Ke=((wt=(dt=n[1])==null?void 0:dt.author)==null?void 0:wt.username)+"",be,ae,ue=St((_t=n[1])==null?void 0:_t.created_at)+"",gt,ie,It,Je,Te,ye,oe,$t,fe;F=new Ee({props:{variant:"outline",size:"sm",$$slots:{default:[is]},$$scope:{ctx:n}}}),F.$on("click",n[15]),G=new Ee({props:{variant:"outline",size:"sm",$$slots:{default:[os]},$$scope:{ctx:n}}}),G.$on("click",n[16]),_e=new Nt({props:{variant:"secondary",size:"sm",$$slots:{default:[fs]},$$scope:{ctx:n}}}),Be=new Nt({props:{variant:"secondary",size:"sm",$$slots:{default:[as]},$$scope:{ctx:n}}});let B=((Dt=n[3])==null?void 0:Dt.diff_summary)&&cl(n);const rt=[hs,_s,ds,us,cs],Ie=[];function it(R,q){return R[5]?0:R[6]?1:R[10]?R[7]==="unified"?3:4:2}return Te=it(n),ye=Ie[Te]=rt[Te](n),{c(){e=p("div"),t=p("div"),l=p("div"),s=p("div"),r=p("h2"),r.textContent=o,i=D(),f=p("p"),u=E(n[2]),h=D(),d=p("div"),m=p("div"),_=p("button"),_.textContent=P,w=D(),I=p("button"),I.textContent=W,H=D(),Y(F.$$.fragment),S=D(),Y(G.$$.fragment),N=D(),k=p("div"),T=p("div"),v=p("div"),z=p("span"),L=D(),K=p("h3"),O=E("ç‰ˆæœ¬ "),ce=E(le),X=D(),Y(_e.$$.fragment),De=D(),J=p("p"),j=E(Q),te=D(),se=p("div"),re=E(ne),Me=E(" â€¢ "),Ce=E($e),Re=D(),me=p("div"),Ve=p("div"),Oe=p("span"),st=D(),Ue=p("h3"),nt=E("ç‰ˆæœ¬ "),Ne=E(he),ct=D(),Y(Be.$$.fragment),je=D(),Ge=p("p"),Se=E(Ae),ut=D(),ve=p("div"),be=E(Ke),ae=E(" â€¢ "),gt=E(ue),ie=D(),B&&B.c(),It=D(),Je=p("div"),ye.c(),this.h()},l(R){e=g(R,"DIV",{class:!0});var q=b(e);t=g(q,"DIV",{class:!0});var pe=b(t);l=g(pe,"DIV",{class:!0});var Fe=b(l);s=g(Fe,"DIV",{});var ht=b(s);r=g(ht,"H2",{class:!0,"data-svelte-h":!0}),Pe(r)!=="svelte-jtc9mk"&&(r.textContent=o),i=y(ht),f=g(ht,"P",{class:!0});var yt=b(f);u=V(yt,n[2]),yt.forEach(c),ht.forEach(c),h=y(Fe),d=g(Fe,"DIV",{class:!0});var We=b(d);m=g(We,"DIV",{class:!0});var mt=b(m);_=g(mt,"BUTTON",{class:!0,"data-svelte-h":!0}),Pe(_)!=="svelte-snuqwa"&&(_.textContent=P),w=y(mt),I=g(mt,"BUTTON",{class:!0,"data-svelte-h":!0}),Pe(I)!=="svelte-1106ymh"&&(I.textContent=W),mt.forEach(c),H=y(We),Z(F.$$.fragment,We),S=y(We),Z(G.$$.fragment,We),We.forEach(c),Fe.forEach(c),N=y(pe),k=g(pe,"DIV",{class:!0});var vt=b(k);T=g(vt,"DIV",{class:!0});var Ze=b(T);v=g(Ze,"DIV",{class:!0});var xe=b(v);z=g(xe,"SPAN",{class:!0}),b(z).forEach(c),L=y(xe),K=g(xe,"H3",{class:!0});var bt=b(K);O=V(bt,"ç‰ˆæœ¬ "),ce=V(bt,le),bt.forEach(c),X=y(xe),Z(_e.$$.fragment,xe),xe.forEach(c),De=y(Ze),J=g(Ze,"P",{class:!0});var Pt=b(J);j=V(Pt,Q),Pt.forEach(c),te=y(Ze),se=g(Ze,"DIV",{class:!0});var pt=b(se);re=V(pt,ne),Me=V(pt," â€¢ "),Ce=V(pt,$e),pt.forEach(c),Ze.forEach(c),Re=y(vt),me=g(vt,"DIV",{class:!0});var et=b(me);Ve=g(et,"DIV",{class:!0});var tt=b(Ve);Oe=g(tt,"SPAN",{class:!0}),b(Oe).forEach(c),st=y(tt),Ue=g(tt,"H3",{class:!0});var kt=b(Ue);nt=V(kt,"ç‰ˆæœ¬ "),Ne=V(kt,he),kt.forEach(c),ct=y(tt),Z(Be.$$.fragment,tt),tt.forEach(c),je=y(et),Ge=g(et,"P",{class:!0});var Ct=b(Ge);Se=V(Ct,Ae),Ct.forEach(c),ut=y(et),ve=g(et,"DIV",{class:!0});var At=b(ve);be=V(At,Ke),ae=V(At," â€¢ "),gt=V(At,ue),At.forEach(c),et.forEach(c),vt.forEach(c),ie=y(pe),B&&B.l(pe),pe.forEach(c),It=y(q),Je=g(q,"DIV",{class:!0});var Bt=b(Je);ye.l(Bt),Bt.forEach(c),q.forEach(c),this.h()},h(){$(r,"class","text-xl font-semibold text-gray-900"),$(f,"class","text-sm text-gray-600 mt-1"),$(_,"class","px-3 py-1.5 text-sm transition-colors"),de(_,"bg-blue-100",n[7]==="split"),de(_,"text-blue-700",n[7]==="split"),de(_,"bg-white",n[7]!=="split"),de(_,"text-gray-600",n[7]!=="split"),$(I,"class","px-3 py-1.5 text-sm border-l border-gray-300 transition-colors"),de(I,"bg-blue-100",n[7]==="unified"),de(I,"text-blue-700",n[7]==="unified"),de(I,"bg-white",n[7]!=="unified"),de(I,"text-gray-600",n[7]!=="unified"),$(m,"class","flex rounded-lg border border-gray-300 overflow-hidden"),$(d,"class","flex items-center space-x-2"),$(l,"class","flex items-center justify-between mb-4"),$(z,"class","w-4 h-4 bg-red-500 rounded"),$(K,"class","font-medium text-red-900"),$(v,"class","flex items-center space-x-2 mb-2"),$(J,"class","text-sm text-red-800 mb-2"),$(se,"class","text-xs text-red-700"),$(T,"class","bg-red-50 border border-red-200 rounded-lg p-4"),$(Oe,"class","w-4 h-4 bg-green-500 rounded"),$(Ue,"class","font-medium text-green-900"),$(Ve,"class","flex items-center space-x-2 mb-2"),$(Ge,"class","text-sm text-green-800 mb-2"),$(ve,"class","text-xs text-green-700"),$(me,"class","bg-green-50 border border-green-200 rounded-lg p-4"),$(k,"class","grid grid-cols-2 gap-6"),$(t,"class","diff-header bg-white border-b border-gray-200 p-6"),$(Je,"class","diff-content"),$(e,"class","version-diff svelte-bosl88")},m(R,q){C(R,e,q),a(e,t),a(t,l),a(l,s),a(s,r),a(s,i),a(s,f),a(f,u),a(l,h),a(l,d),a(d,m),a(m,_),a(m,w),a(m,I),a(d,H),x(F,d,null),a(d,S),x(G,d,null),a(t,N),a(t,k),a(k,T),a(T,v),a(v,z),a(v,L),a(v,K),a(K,O),a(K,ce),a(v,X),x(_e,v,null),a(T,De),a(T,J),a(J,j),a(T,te),a(T,se),a(se,re),a(se,Me),a(se,Ce),a(k,Re),a(k,me),a(me,Ve),a(Ve,Oe),a(Ve,st),a(Ve,Ue),a(Ue,nt),a(Ue,Ne),a(Ve,ct),x(Be,Ve,null),a(me,je),a(me,Ge),a(Ge,Se),a(me,ut),a(me,ve),a(ve,be),a(ve,ae),a(ve,gt),a(t,ie),B&&B.m(t,null),a(e,It),a(e,Je),Ie[Te].m(Je,null),oe=!0,$t||(fe=[jt(_,"click",n[13]),jt(I,"click",n[14])],$t=!0)},p(R,[q]){var mt,vt,Ze,xe,bt,Pt,pt,et,tt,kt,Ct;(!oe||q&4)&&U(u,R[2]),(!oe||q&128)&&de(_,"bg-blue-100",R[7]==="split"),(!oe||q&128)&&de(_,"text-blue-700",R[7]==="split"),(!oe||q&128)&&de(_,"bg-white",R[7]!=="split"),(!oe||q&128)&&de(_,"text-gray-600",R[7]!=="split"),(!oe||q&128)&&de(I,"bg-blue-100",R[7]==="unified"),(!oe||q&128)&&de(I,"text-blue-700",R[7]==="unified"),(!oe||q&128)&&de(I,"bg-white",R[7]!=="unified"),(!oe||q&128)&&de(I,"text-gray-600",R[7]!=="unified");const pe={};q&536871424&&(pe.$$scope={dirty:q,ctx:R}),F.$set(pe);const Fe={};q&536871168&&(Fe.$$scope={dirty:q,ctx:R}),G.$set(Fe),(!oe||q&1)&&le!==(le=((mt=R[0])==null?void 0:mt.version_number)+"")&&U(ce,le);const ht={};q&536870913&&(ht.$$scope={dirty:q,ctx:R}),_e.$set(ht),(!oe||q&1)&&Q!==(Q=(((vt=R[0])==null?void 0:vt.commit_message)||"æ— æäº¤ä¿¡æ¯")+"")&&U(j,Q),(!oe||q&1)&&ne!==(ne=((xe=(Ze=R[0])==null?void 0:Ze.author)==null?void 0:xe.username)+"")&&U(re,ne),(!oe||q&1)&&$e!==($e=St((bt=R[0])==null?void 0:bt.created_at)+"")&&U(Ce,$e),(!oe||q&2)&&he!==(he=((Pt=R[1])==null?void 0:Pt.version_number)+"")&&U(Ne,he);const yt={};q&536870914&&(yt.$$scope={dirty:q,ctx:R}),Be.$set(yt),(!oe||q&2)&&Ae!==(Ae=(((pt=R[1])==null?void 0:pt.commit_message)||"æ— æäº¤ä¿¡æ¯")+"")&&U(Se,Ae),(!oe||q&2)&&Ke!==(Ke=((tt=(et=R[1])==null?void 0:et.author)==null?void 0:tt.username)+"")&&U(be,Ke),(!oe||q&2)&&ue!==(ue=St((kt=R[1])==null?void 0:kt.created_at)+"")&&U(gt,ue),(Ct=R[3])!=null&&Ct.diff_summary?B?B.p(R,q):(B=cl(R),B.c(),B.m(t,null)):B&&(B.d(1),B=null);let We=Te;Te=it(R),Te===We?Ie[Te].p(R,q):(He(),M(Ie[We],1,1,()=>{Ie[We]=null}),Le(),ye=Ie[Te],ye?ye.p(R,q):(ye=Ie[Te]=rt[Te](R),ye.c()),A(ye,1),ye.m(Je,null))},i(R){oe||(A(F.$$.fragment,R),A(G.$$.fragment,R),A(_e.$$.fragment,R),A(Be.$$.fragment,R),A(ye),oe=!0)},o(R){M(F.$$.fragment,R),M(G.$$.fragment,R),M(_e.$$.fragment,R),M(Be.$$.fragment,R),M(ye),oe=!1},d(R){R&&c(e),ee(F),ee(G),ee(_e),ee(Be),B&&B.d(),Ie[Te].d(),$t=!1,Sl(fe)}}}function ps(n){if(!n)return[];const e=n.split(`
`),t=[];let l=null;for(let s=0;s<e.length;s++){const r=e[s];if(r.startsWith("@@"))l&&t.push(l),l={header:r,lines:[]};else if(l){const o=r.startsWith("+")?"addition":r.startsWith("-")?"deletion":"context";l.lines.push({type:o,content:r.substring(1),originalLine:r})}}return l&&t.push(l),t}function Vt(n){switch(n){case"addition":return"diff-line-addition";case"deletion":return"diff-line-deletion";default:return"diff-line-context"}}function wl(n){switch(n){case"addition":return"+";case"deletion":return"-";default:return" "}}function St(n){const e=new Date(n);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function gs(n,e,t){let l,s,{fileId:r=null}=e,{fromVersion:o=null}=e,{toVersion:i=null}=e,{filePath:f=""}=e,u=null,h=!0,d=null,m="split",_=!1,P=!0;Ht(async()=>{await w()});async function w(){var S,G;if(!(!r||!o||!i)){t(5,h=!0),t(6,d=null);try{const N=await Et.get(`/api/file-editor/files/${r}/versions/${o.id}/diff/${i.id}?include_content=true`);t(3,u=N.data)}catch(N){console.error("åŠ è½½ç‰ˆæœ¬å·®å¼‚å¤±è´¥:",N),t(6,d=((G=(S=N.response)==null?void 0:S.data)==null?void 0:G.detail)||"åŠ è½½ç‰ˆæœ¬å·®å¼‚å¤±è´¥")}finally{t(5,h=!1)}}}const I=()=>t(7,m="split"),W=()=>t(7,m="unified"),H=()=>t(9,P=!P),F=()=>t(8,_=!_);return n.$$set=S=>{"fileId"in S&&t(12,r=S.fileId),"fromVersion"in S&&t(0,o=S.fromVersion),"toVersion"in S&&t(1,i=S.toVersion),"filePath"in S&&t(2,f=S.filePath)},n.$$.update=()=>{n.$$.dirty&8&&t(4,l=u!=null&&u.diff_content?ps(u.diff_content):[]),n.$$.dirty&16&&t(10,s=l.length>0)},[o,i,f,u,l,h,d,m,_,P,s,w,r,I,W,H,F]}class $s extends Lt{constructor(e){super(),Mt(this,e,gs,vs,zt,{fileId:12,fromVersion:0,toVersion:1,filePath:2})}}function Dl(n,e,t){const l=n.slice();return l[20]=e[t],l[22]=t,l}function yl(n){let e,t;return e=new Ml({props:{type:n[4].type,message:n[4].message}}),e.$on("close",n[19]),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const r={};s&16&&(r.type=l[4].type),s&16&&(r.message=l[4].message),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Pl(n){let e,t;return e=new Ll({props:{repository:n[0],activeTab:"files"}}),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.repository=l[0]),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function bs(n){let e,t,l,s,r,o,i,f,u="/",h,d,m,_,P,w,I,W="/",H,F,S=n[5]==="history"?"ç‰ˆæœ¬å†å²":"ç‰ˆæœ¬å¯¹æ¯”",G,N,k,T,v,z,L,K,O,le,ce=we(n[7].split("/")),X=[];for(let j=0;j<ce.length;j+=1)X[j]=Cl(Dl(n,ce,j));function _e(j,te){return j[5]==="history"?Ds:ws}let De=_e(n),J=De(n),Q=n[5]==="diff"&&Nl(n);return L=new Ee({props:{variant:"outline",size:"sm",$$slots:{default:[Ps]},$$scope:{ctx:n}}}),L.$on("click",n[15]),O=new Ee({props:{variant:"primary",size:"sm",$$slots:{default:[Cs]},$$scope:{ctx:n}}}),O.$on("click",n[16]),{c(){e=p("div"),t=p("div"),l=p("nav"),s=p("a"),r=E(n[8]),i=D(),f=p("span"),f.textContent=u,h=D(),d=p("a"),m=E("æ–‡ä»¶"),P=D();for(let j=0;j<X.length;j+=1)X[j].c();w=D(),I=p("span"),I.textContent=W,H=D(),F=p("span"),G=E(S),N=D(),k=p("h1"),J.c(),T=D(),v=p("div"),Q&&Q.c(),z=D(),Y(L.$$.fragment),K=D(),Y(O.$$.fragment),this.h()},l(j){e=g(j,"DIV",{class:!0});var te=b(e);t=g(te,"DIV",{});var se=b(t);l=g(se,"NAV",{class:!0});var ne=b(l);s=g(ne,"A",{href:!0,class:!0});var re=b(s);r=V(re,n[8]),re.forEach(c),i=y(ne),f=g(ne,"SPAN",{"data-svelte-h":!0}),Pe(f)!=="svelte-ocknwt"&&(f.textContent=u),h=y(ne),d=g(ne,"A",{href:!0,class:!0});var Me=b(d);m=V(Me,"æ–‡ä»¶"),Me.forEach(c),P=y(ne);for(let me=0;me<X.length;me+=1)X[me].l(ne);w=y(ne),I=g(ne,"SPAN",{"data-svelte-h":!0}),Pe(I)!=="svelte-ocknwt"&&(I.textContent=W),H=y(ne),F=g(ne,"SPAN",{class:!0});var $e=b(F);G=V($e,S),$e.forEach(c),ne.forEach(c),N=y(se),k=g(se,"H1",{class:!0});var Ce=b(k);J.l(Ce),Ce.forEach(c),se.forEach(c),T=y(te),v=g(te,"DIV",{class:!0});var Re=b(v);Q&&Q.l(Re),z=y(Re),Z(L.$$.fragment,Re),K=y(Re),Z(O.$$.fragment,Re),Re.forEach(c),te.forEach(c),this.h()},h(){$(s,"href",o=lt+"/"+n[9]+"/"+n[8]),$(s,"class","hover:text-blue-600"),$(d,"href",_=lt+"/"+n[9]+"/"+n[8]+"/tree"),$(d,"class","hover:text-blue-600"),$(F,"class","text-blue-600 font-medium"),$(l,"class","flex items-center space-x-2 text-sm text-gray-600 mb-2"),$(k,"class","text-2xl font-bold text-gray-900"),$(v,"class","flex items-center space-x-2"),$(e,"class","flex items-center justify-between")},m(j,te){C(j,e,te),a(e,t),a(t,l),a(l,s),a(s,r),a(l,i),a(l,f),a(l,h),a(l,d),a(d,m),a(l,P);for(let se=0;se<X.length;se+=1)X[se]&&X[se].m(l,null);a(l,w),a(l,I),a(l,H),a(l,F),a(F,G),a(t,N),a(t,k),J.m(k,null),a(e,T),a(e,v),Q&&Q.m(v,null),a(v,z),x(L,v,null),a(v,K),x(O,v,null),le=!0},p(j,te){if((!le||te&256)&&U(r,j[8]),(!le||te&768&&o!==(o=lt+"/"+j[9]+"/"+j[8]))&&$(s,"href",o),(!le||te&768&&_!==(_=lt+"/"+j[9]+"/"+j[8]+"/tree"))&&$(d,"href",_),te&896){ce=we(j[7].split("/"));let re;for(re=0;re<ce.length;re+=1){const Me=Dl(j,ce,re);X[re]?X[re].p(Me,te):(X[re]=Cl(Me),X[re].c(),X[re].m(l,w))}for(;re<X.length;re+=1)X[re].d(1);X.length=ce.length}(!le||te&32)&&S!==(S=j[5]==="history"?"ç‰ˆæœ¬å†å²":"ç‰ˆæœ¬å¯¹æ¯”")&&U(G,S),De!==(De=_e(j))&&(J.d(1),J=De(j),J&&(J.c(),J.m(k,null))),j[5]==="diff"?Q?(Q.p(j,te),te&32&&A(Q,1)):(Q=Nl(j),Q.c(),A(Q,1),Q.m(v,z)):Q&&(He(),M(Q,1,1,()=>{Q=null}),Le());const se={};te&8388608&&(se.$$scope={dirty:te,ctx:j}),L.$set(se);const ne={};te&8388608&&(ne.$$scope={dirty:te,ctx:j}),O.$set(ne)},i(j){le||(A(Q),A(L.$$.fragment,j),A(O.$$.fragment,j),le=!0)},o(j){M(Q),M(L.$$.fragment,j),M(O.$$.fragment,j),le=!1},d(j){j&&c(e),at(X,j),J.d(),Q&&Q.d(),ee(L),ee(O)}}}function ks(n){let e,t,l="âŒ åŠ è½½å¤±è´¥",s,r,o;return{c(){e=p("div"),t=p("h1"),t.textContent=l,s=D(),r=p("p"),o=E(n[3]),this.h()},l(i){e=g(i,"DIV",{class:!0});var f=b(e);t=g(f,"H1",{class:!0,"data-svelte-h":!0}),Pe(t)!=="svelte-idw495"&&(t.textContent=l),s=y(f),r=g(f,"P",{class:!0});var u=b(r);o=V(u,n[3]),u.forEach(c),f.forEach(c),this.h()},h(){$(t,"class","text-xl font-semibold"),$(r,"class","text-sm mt-1"),$(e,"class","text-red-500")},m(i,f){C(i,e,f),a(e,t),a(e,s),a(e,r),a(r,o)},p(i,f){f&8&&U(o,i[3])},i:ge,o:ge,d(i){i&&c(e)}}}function Es(n){let e,t='<div class="h-6 bg-gray-200 rounded w-1/2 mb-2"></div> <div class="h-4 bg-gray-200 rounded w-1/3"></div>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),Pe(e)!=="svelte-1f6xwox"&&(e.innerHTML=t),this.h()},h(){$(e,"class","animate-pulse")},m(l,s){C(l,e,s)},p:ge,i:ge,o:ge,d(l){l&&c(e)}}}function Vs(n){let e,t=n[20]+"",l,s;return{c(){e=p("a"),l=E(t),this.h()},l(r){e=g(r,"A",{href:!0,class:!0});var o=b(e);l=V(o,t),o.forEach(c),this.h()},h(){$(e,"href",s=lt+"/"+n[9]+"/"+n[8]+"/tree/"+n[7].split("/").slice(0,n[22]+1).join("/")),$(e,"class","hover:text-blue-600")},m(r,o){C(r,e,o),a(e,l)},p(r,o){o&128&&t!==(t=r[20]+"")&&U(l,t),o&896&&s!==(s=lt+"/"+r[9]+"/"+r[8]+"/tree/"+r[7].split("/").slice(0,r[22]+1).join("/"))&&$(e,"href",s)},d(r){r&&c(e)}}}function Is(n){let e,t=n[20]+"",l;return{c(){e=p("span"),l=E(t),this.h()},l(s){e=g(s,"SPAN",{class:!0});var r=b(e);l=V(r,t),r.forEach(c),this.h()},h(){$(e,"class","text-gray-900")},m(s,r){C(s,e,r),a(e,l)},p(s,r){r&128&&t!==(t=s[20]+"")&&U(l,t)},d(s){s&&c(e)}}}function Cl(n){let e,t="/",l,s,r;function o(u,h){return h&128&&(s=null),s==null&&(s=u[22]===u[7].split("/").length-1),s?Is:Vs}let i=o(n,-1),f=i(n);return{c(){e=p("span"),e.textContent=t,l=D(),f.c(),r=qe()},l(u){e=g(u,"SPAN",{"data-svelte-h":!0}),Pe(e)!=="svelte-ocknwt"&&(e.textContent=t),l=y(u),f.l(u),r=qe()},m(u,h){C(u,e,h),C(u,l,h),f.m(u,h),C(u,r,h)},p(u,h){i===(i=o(u,h))&&f?f.p(u,h):(f.d(1),f=i(u),f&&(f.c(),f.m(r.parentNode,r)))},d(u){u&&(c(e),c(l),c(r)),f.d(u)}}}function ws(n){let e;return{c(){e=E("ç‰ˆæœ¬å¯¹æ¯”")},l(t){e=V(t,"ç‰ˆæœ¬å¯¹æ¯”")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Ds(n){let e;return{c(){e=E("ç‰ˆæœ¬å†å²")},l(t){e=V(t,"ç‰ˆæœ¬å†å²")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Nl(n){let e,t;return e=new Ee({props:{variant:"outline",size:"sm",$$slots:{default:[ys]},$$scope:{ctx:n}}}),e.$on("click",n[17]),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const r={};s&8388608&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ys(n){let e;return{c(){e=E("â† è¿”å›å†å²")},l(t){e=V(t,"â† è¿”å›å†å²")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Ps(n){let e;return{c(){e=E("ğŸ“„ æŸ¥çœ‹æ–‡ä»¶")},l(t){e=V(t,"ğŸ“„ æŸ¥çœ‹æ–‡ä»¶")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Cs(n){let e;return{c(){e=E("âœï¸ ç¼–è¾‘æ–‡ä»¶")},l(t){e=V(t,"âœï¸ ç¼–è¾‘æ–‡ä»¶")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Ns(n){let e,t,l,s;const r=[zs,Ts],o=[];function i(f,u){return f[5]==="history"?0:f[5]==="diff"&&f[6].from&&f[6].to?1:-1}return~(e=i(n))&&(t=o[e]=r[e](n)),{c(){t&&t.c(),l=qe()},l(f){t&&t.l(f),l=qe()},m(f,u){~e&&o[e].m(f,u),C(f,l,u),s=!0},p(f,u){let h=e;e=i(f),e===h?~e&&o[e].p(f,u):(t&&(He(),M(o[h],1,1,()=>{o[h]=null}),Le()),~e?(t=o[e],t?t.p(f,u):(t=o[e]=r[e](f),t.c()),A(t,1),t.m(l.parentNode,l)):t=null)},i(f){s||(A(t),s=!0)},o(f){M(t),s=!1},d(f){f&&c(l),~e&&o[e].d(f)}}}function As(n){let e,t,l,s,r,o,i,f;return i=new Ee({props:{$$slots:{default:[Hs]},$$scope:{ctx:n}}}),i.$on("click",n[10]),{c(){e=p("div"),t=p("div"),l=p("div"),s=E("âŒ "),r=E(n[3]),o=D(),Y(i.$$.fragment),this.h()},l(u){e=g(u,"DIV",{class:!0});var h=b(e);t=g(h,"DIV",{class:!0});var d=b(t);l=g(d,"DIV",{class:!0});var m=b(l);s=V(m,"âŒ "),r=V(m,n[3]),m.forEach(c),o=y(d),Z(i.$$.fragment,d),d.forEach(c),h.forEach(c),this.h()},h(){$(l,"class","text-red-500 text-lg mb-4"),$(t,"class","text-center"),$(e,"class","container mx-auto px-4 py-12")},m(u,h){C(u,e,h),a(e,t),a(t,l),a(l,s),a(l,r),a(t,o),x(i,t,null),f=!0},p(u,h){(!f||h&8)&&U(r,u[3]);const d={};h&8388608&&(d.$$scope={dirty:h,ctx:u}),i.$set(d)},i(u){f||(A(i.$$.fragment,u),f=!0)},o(u){M(i.$$.fragment,u),f=!1},d(u){u&&c(e),ee(i)}}}function Ss(n){let e,t;return e=new Rt({props:{message:"åŠ è½½ç‰ˆæœ¬å†å²ä¸­..."}}),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p:ge,i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ts(n){let e,t;return e=new $s({props:{fileId:n[1].id,fromVersion:n[6].from,toVersion:n[6].to,filePath:n[7]}}),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const r={};s&2&&(r.fileId=l[1].id),s&64&&(r.fromVersion=l[6].from),s&64&&(r.toVersion=l[6].to),s&128&&(r.filePath=l[7]),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function zs(n){let e,t;return e=new rs({props:{fileId:n[1].id,filePath:n[7],repository:n[0],currentVersionId:n[1].current_version_id}}),e.$on("viewVersion",n[11]),e.$on("versionRestored",n[12]),e.$on("showDiff",n[13]),e.$on("error",n[14]),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,s){x(e,l,s),t=!0},p(l,s){const r={};s&2&&(r.fileId=l[1].id),s&128&&(r.filePath=l[7]),s&1&&(r.repository=l[0]),s&2&&(r.currentVersionId=l[1].current_version_id),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Hs(n){let e;return{c(){e=E("é‡è¯•")},l(t){e=V(t,"é‡è¯•")},m(t,l){C(t,e,l)},d(t){t&&c(e)}}}function Ls(n){let e,t,l,s,r,o,i,f,u,h,d,m,_,P;document.title=e="ç‰ˆæœ¬å†å² - "+n[7]+" - "+n[8]+" - GeoML-Hub";let w=n[4]&&yl(n),I=n[0]&&Pl(n);const W=[Es,ks,bs],H=[];function F(k,T){return k[2]?0:k[3]?1:2}f=F(n),u=H[f]=W[f](n);const S=[Ss,As,Ns],G=[];function N(k,T){return k[2]?0:k[3]?1:k[1]?2:-1}return~(m=N(n))&&(_=G[m]=S[m](n)),{c(){t=D(),w&&w.c(),l=D(),s=p("div"),I&&I.c(),r=D(),o=p("div"),i=p("div"),u.c(),h=D(),d=p("div"),_&&_.c(),this.h()},l(k){Tl("svelte-1bm64vf",document.head).forEach(c),t=y(k),w&&w.l(k),l=y(k),s=g(k,"DIV",{class:!0});var v=b(s);I&&I.l(v),r=y(v),o=g(v,"DIV",{class:!0});var z=b(o);i=g(z,"DIV",{class:!0});var L=b(i);u.l(L),L.forEach(c),z.forEach(c),h=y(v),d=g(v,"DIV",{class:!0});var K=b(d);_&&_.l(K),K.forEach(c),v.forEach(c),this.h()},h(){$(i,"class","container mx-auto px-4 py-4"),$(o,"class","bg-white border-b border-gray-200"),$(d,"class","flex-1"),$(s,"class","commits-page svelte-73udgn")},m(k,T){C(k,t,T),w&&w.m(k,T),C(k,l,T),C(k,s,T),I&&I.m(s,null),a(s,r),a(s,o),a(o,i),H[f].m(i,null),a(s,h),a(s,d),~m&&G[m].m(d,null),P=!0},p(k,[T]){(!P||T&384)&&e!==(e="ç‰ˆæœ¬å†å² - "+k[7]+" - "+k[8]+" - GeoML-Hub")&&(document.title=e),k[4]?w?(w.p(k,T),T&16&&A(w,1)):(w=yl(k),w.c(),A(w,1),w.m(l.parentNode,l)):w&&(He(),M(w,1,1,()=>{w=null}),Le()),k[0]?I?(I.p(k,T),T&1&&A(I,1)):(I=Pl(k),I.c(),A(I,1),I.m(s,r)):I&&(He(),M(I,1,1,()=>{I=null}),Le());let v=f;f=F(k),f===v?H[f].p(k,T):(He(),M(H[v],1,1,()=>{H[v]=null}),Le(),u=H[f],u?u.p(k,T):(u=H[f]=W[f](k),u.c()),A(u,1),u.m(i,null));let z=m;m=N(k),m===z?~m&&G[m].p(k,T):(_&&(He(),M(G[z],1,1,()=>{G[z]=null}),Le()),~m?(_=G[m],_?_.p(k,T):(_=G[m]=S[m](k),_.c()),A(_,1),_.m(d,null)):_=null)},i(k){P||(A(w),A(I),A(u),A(_),P=!0)},o(k){M(w),M(I),M(u),M(_),P=!1},d(k){k&&(c(t),c(l),c(s)),w&&w.d(k),I&&I.d(),H[f].d(),~m&&G[m].d()}}}function Ms(n,e,t){let l,s,r,o;zl(n,Hl,k=>t(18,o=k));let i=null,f=null,u=!0,h=null,d=null,m="history",_={from:null,to:null};Ht(async()=>{await P()});async function P(){var k,T;t(2,u=!0),t(3,h=null);try{const[v,z]=await Promise.all([Et.get(`/api/repositories/${l}/${s}`),Et.get(`/api/files/${l}/${s}/info/${r}`)]);t(0,i=v.data),t(1,f=z.data)}catch(v){console.error("åŠ è½½æ•°æ®å¤±è´¥:",v),t(3,h=((T=(k=v.response)==null?void 0:k.data)==null?void 0:T.detail)||"åŠ è½½æ•°æ®å¤±è´¥")}finally{t(2,u=!1)}}function w(k){const{versionId:T,versionNumber:v,versionHash:z}=k.detail;Tt(`${lt}/${l}/${s}/blob/${r}?version=${T}`)}function I(k){const{newVersionId:T,restoredFromVersion:v}=k.detail;t(4,d={type:"success",message:`æˆåŠŸæ¢å¤åˆ°ç‰ˆæœ¬ ${v}`})}function W(k){const{fromVersion:T,toVersion:v}=k.detail;t(6,_={from:T,to:v}),t(5,m="diff")}function H(k){const{message:T}=k.detail;t(4,d={type:"error",message:T})}function F(){Tt(`${lt}/${l}/${s}/blob/${r}`)}function S(){Tt(`${lt}/${l}/${s}/edit/${r}`)}function G(){t(5,m="history"),t(6,_={from:null,to:null})}const N=()=>t(4,d=null);return n.$$.update=()=>{n.$$.dirty&262144&&t(9,l=o.params.username),n.$$.dirty&262144&&t(8,s=o.params.repository),n.$$.dirty&262144&&t(7,r=o.params.file_path)},[i,f,u,h,d,m,_,r,s,l,P,w,I,W,H,F,S,G,o,N]}class Ys extends Lt{constructor(e){super(),Mt(this,e,Ms,Ls,zt,{})}}export{Ys as component,Xs as universal};
