import{s as dt,a as E,f as i,l as H,M as ct,d as l,c as I,g as n,h as d,F as Re,m as x,j as e,i as F,A as t,K as Ve,B as ne,S as ft,n as T,G as nt,C as ht,D as vt,o as pt,I as ze,J as Ne}from"../chunks/scheduler.cc6cbc02.js";import{S as mt,i as _t}from"../chunks/index.cf161fb4.js";import{P as De,g as gt}from"../chunks/paths.f059e082.js";import{login as bt}from"../chunks/auth.9aaca404.js";import{redirectIfAuthenticated as wt}from"../chunks/auth.36f9ee17.js";import{a as yt}from"../chunks/api.ecdb55f2.js";import{a as kt}from"../chunks/runtime.d95da1ca.js";const Et=!0;async function It(){return{meta:{title:"登录 - GeoML-Hub",description:"登录 GeoML-Hub 账户",keywords:"登录,账户,GeoML-Hub"}}}const St=Object.freeze(Object.defineProperty({__proto__:null,load:It,prerender:Et},Symbol.toStringTag,{value:"Module"}));function ut(r){let u,a,s,c='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',f,h,v,m;return{c(){u=i("div"),a=i("div"),s=i("div"),s.innerHTML=c,f=E(),h=i("div"),v=i("p"),m=H(r[2]),this.h()},l(w){u=n(w,"DIV",{class:!0});var L=d(u);a=n(L,"DIV",{class:!0});var M=d(a);s=n(M,"DIV",{class:!0,"data-svelte-h":!0}),Re(s)!=="svelte-15mc4al"&&(s.innerHTML=c),f=I(M),h=n(M,"DIV",{class:!0});var _=d(h);v=n(_,"P",{class:!0});var V=d(v);m=x(V,r[2]),V.forEach(l),_.forEach(l),M.forEach(l),L.forEach(l),this.h()},h(){e(s,"class","flex-shrink-0"),e(v,"class","text-sm text-red-800 dark:text-red-200"),e(h,"class","ml-3"),e(a,"class","flex"),e(u,"class","rounded-md bg-red-50 dark:bg-red-900/20 p-4")},m(w,L){F(w,u,L),t(u,a),t(a,s),t(a,f),t(a,h),t(h,v),t(v,m)},p(w,L){L&4&&T(m,w[2])},d(w){w&&l(u)}}}function Lt(r){let u=r[4]("auth.login")+"",a;return{c(){a=H(u)},l(s){a=x(s,u)},m(s,c){F(s,a,c)},p(s,c){c&16&&u!==(u=s[4]("auth.login")+"")&&T(a,u)},d(s){s&&l(a)}}}function Mt(r){let u,a,s,c,f=r[4]("auth.logging_in")+"",h;return{c(){u=ze("svg"),a=ze("circle"),s=ze("path"),c=E(),h=H(f),this.h()},l(v){u=Ne(v,"svg",{class:!0,fill:!0,viewBox:!0});var m=d(u);a=Ne(m,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),d(a).forEach(l),s=Ne(m,"path",{class:!0,fill:!0,d:!0}),d(s).forEach(l),m.forEach(l),c=I(v),h=x(v,f),this.h()},h(){e(a,"class","opacity-25"),e(a,"cx","12"),e(a,"cy","12"),e(a,"r","10"),e(a,"stroke","currentColor"),e(a,"stroke-width","4"),e(s,"class","opacity-75"),e(s,"fill","currentColor"),e(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),e(u,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),e(u,"fill","none"),e(u,"viewBox","0 0 24 24")},m(v,m){F(v,u,m),t(u,a),t(u,s),F(v,c,m),F(v,h,m)},p(v,m){m&16&&f!==(f=v[4]("auth.logging_in")+"")&&T(h,f)},d(v){v&&(l(u),l(c),l(h))}}}function Vt(r){let u,a,s,c,f,h,v='<svg class="h-8 w-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>',m,w,L=r[4]("auth.welcome_back")+"",M,_,V,ee=r[4]("auth.login_subtitle")+"",ue,He,j,y,G,O,te=r[4]("auth.email")+"",de,xe,K,g,ce,Te,z,N,ae=r[4]("auth.password")+"",fe,Pe,J,b,he,Ce,ve,le,P,je,W,Q,R,re=r[4]("auth.forgot_password")+"",pe,Ae,A,S,U,Ue='<div class="w-full border-t border-gray-300 dark:border-gray-600"></div>',Se,X,Y,se=r[4]("auth.or")+"",me,Be,Z,B,oe=r[4]("auth.no_account")+"",_e,Ge,q,ie=r[4]("auth.sign_up")+"",ge,Oe,qe;document.title=u=r[4]("auth.login")+" - GeoML-Hub";let k=r[2]&&ut(r);function Fe(o,p){return o[3]?Mt:Lt}let be=Fe(r),D=be(r);return{c(){a=E(),s=i("div"),c=i("div"),f=i("div"),h=i("div"),h.innerHTML=v,m=E(),w=i("h2"),M=H(L),_=E(),V=i("p"),ue=H(ee),He=E(),j=i("div"),y=i("form"),G=i("div"),O=i("label"),de=H(te),xe=E(),K=i("div"),g=i("input"),Te=E(),z=i("div"),N=i("label"),fe=H(ae),Pe=E(),J=i("div"),b=i("input"),Ce=E(),k&&k.c(),ve=E(),le=i("div"),P=i("button"),D.c(),je=E(),W=i("div"),Q=i("div"),R=i("a"),pe=H(re),Ae=E(),A=i("div"),S=i("div"),U=i("div"),U.innerHTML=Ue,Se=E(),X=i("div"),Y=i("span"),me=H(se),Be=E(),Z=i("div"),B=i("p"),_e=H(oe),Ge=E(),q=i("a"),ge=H(ie),this.h()},l(o){ct("svelte-5axj8v",document.head).forEach(l),a=I(o),s=n(o,"DIV",{class:!0});var Ke=d(s);c=n(Ke,"DIV",{class:!0});var we=d(c);f=n(we,"DIV",{class:!0});var $=d(f);h=n($,"DIV",{class:!0,"data-svelte-h":!0}),Re(h)!=="svelte-v406zk"&&(h.innerHTML=v),m=I($),w=n($,"H2",{class:!0});var Je=d(w);M=x(Je,L),Je.forEach(l),_=I($),V=n($,"P",{class:!0});var We=d(V);ue=x(We,ee),We.forEach(l),$.forEach(l),He=I(we),j=n(we,"DIV",{class:!0});var ye=d(j);y=n(ye,"FORM",{class:!0});var C=d(y);G=n(C,"DIV",{});var ke=d(G);O=n(ke,"LABEL",{for:!0,class:!0});var Qe=d(O);de=x(Qe,te),Qe.forEach(l),xe=I(ke),K=n(ke,"DIV",{class:!0});var Xe=d(K);g=n(Xe,"INPUT",{id:!0,name:!0,type:!0,autocomplete:!0,class:!0,placeholder:!0}),Xe.forEach(l),ke.forEach(l),Te=I(C),z=n(C,"DIV",{});var Ee=d(z);N=n(Ee,"LABEL",{for:!0,class:!0});var Ye=d(N);fe=x(Ye,ae),Ye.forEach(l),Pe=I(Ee),J=n(Ee,"DIV",{class:!0});var Ze=d(J);b=n(Ze,"INPUT",{id:!0,name:!0,type:!0,autocomplete:!0,class:!0,placeholder:!0}),Ze.forEach(l),Ee.forEach(l),Ce=I(C),k&&k.l(C),ve=I(C),le=n(C,"DIV",{});var $e=d(le);P=n($e,"BUTTON",{type:!0,class:!0});var et=d(P);D.l(et),et.forEach(l),$e.forEach(l),je=I(C),W=n(C,"DIV",{class:!0});var tt=d(W);Q=n(tt,"DIV",{class:!0});var at=d(Q);R=n(at,"A",{href:!0,class:!0});var lt=d(R);pe=x(lt,re),lt.forEach(l),at.forEach(l),tt.forEach(l),C.forEach(l),Ae=I(ye),A=n(ye,"DIV",{class:!0});var Ie=d(A);S=n(Ie,"DIV",{class:!0});var Le=d(S);U=n(Le,"DIV",{class:!0,"data-svelte-h":!0}),Re(U)!=="svelte-18vhlcr"&&(U.innerHTML=Ue),Se=I(Le),X=n(Le,"DIV",{class:!0});var rt=d(X);Y=n(rt,"SPAN",{class:!0});var st=d(Y);me=x(st,se),st.forEach(l),rt.forEach(l),Le.forEach(l),Be=I(Ie),Z=n(Ie,"DIV",{class:!0});var ot=d(Z);B=n(ot,"P",{class:!0});var Me=d(B);_e=x(Me,oe),Ge=I(Me),q=n(Me,"A",{href:!0,class:!0});var it=d(q);ge=x(it,ie),it.forEach(l),Me.forEach(l),ot.forEach(l),Ie.forEach(l),ye.forEach(l),we.forEach(l),Ke.forEach(l),this.h()},h(){e(h,"class","mx-auto h-12 w-12 bg-primary-600 rounded-lg flex items-center justify-center"),e(w,"class","mt-6 text-3xl font-bold text-gray-900 dark:text-white"),e(V,"class","mt-2 text-sm text-gray-600 dark:text-gray-400"),e(f,"class","text-center"),e(O,"for","email"),e(O,"class","block text-sm font-medium text-gray-700 dark:text-gray-300"),e(g,"id","email"),e(g,"name","email"),e(g,"type","email"),e(g,"autocomplete","email"),g.required=!0,e(g,"class","input w-full"),e(g,"placeholder",ce=r[4]("auth.email_placeholder")),g.disabled=r[3],e(K,"class","mt-1"),e(N,"for","password"),e(N,"class","block text-sm font-medium text-gray-700 dark:text-gray-300"),e(b,"id","password"),e(b,"name","password"),e(b,"type","password"),e(b,"autocomplete","current-password"),b.required=!0,e(b,"class","input w-full"),e(b,"placeholder",he=r[4]("auth.password_placeholder")),b.disabled=r[3],e(J,"class","mt-1"),e(P,"type","submit"),P.disabled=r[3],e(P,"class","btn btn-primary w-full flex justify-center items-center"),e(R,"href",De.HOME+"/forgot-password"),e(R,"class","font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400"),e(Q,"class","text-sm"),e(W,"class","flex items-center justify-between"),e(y,"class","space-y-6"),e(U,"class","absolute inset-0 flex items-center"),e(Y,"class","px-2 bg-white dark:bg-gray-800 text-gray-500"),e(X,"class","relative flex justify-center text-sm"),e(S,"class","relative"),e(q,"href",De.REGISTER),e(q,"class","font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400"),e(B,"class","text-sm text-gray-600 dark:text-gray-400"),e(Z,"class","mt-6 text-center"),e(A,"class","mt-6"),e(j,"class","bg-white dark:bg-gray-800 py-8 px-4 shadow-xl rounded-lg sm:px-10"),e(c,"class","max-w-md w-full space-y-8"),e(s,"class","min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center px-4")},m(o,p){F(o,a,p),F(o,s,p),t(s,c),t(c,f),t(f,h),t(f,m),t(f,w),t(w,M),t(f,_),t(f,V),t(V,ue),t(c,He),t(c,j),t(j,y),t(y,G),t(G,O),t(O,de),t(G,xe),t(G,K),t(K,g),Ve(g,r[0]),t(y,Te),t(y,z),t(z,N),t(N,fe),t(z,Pe),t(z,J),t(J,b),Ve(b,r[1]),t(y,Ce),k&&k.m(y,null),t(y,ve),t(y,le),t(le,P),D.m(P,null),t(y,je),t(y,W),t(W,Q),t(Q,R),t(R,pe),t(j,Ae),t(j,A),t(A,S),t(S,U),t(S,Se),t(S,X),t(X,Y),t(Y,me),t(A,Be),t(A,Z),t(Z,B),t(B,_e),t(B,Ge),t(B,q),t(q,ge),Oe||(qe=[ne(g,"input",r[7]),ne(g,"keypress",r[6]),ne(b,"input",r[8]),ne(b,"keypress",r[6]),ne(y,"submit",ft(r[5]))],Oe=!0)},p(o,[p]){p&16&&u!==(u=o[4]("auth.login")+" - GeoML-Hub")&&(document.title=u),p&16&&L!==(L=o[4]("auth.welcome_back")+"")&&T(M,L),p&16&&ee!==(ee=o[4]("auth.login_subtitle")+"")&&T(ue,ee),p&16&&te!==(te=o[4]("auth.email")+"")&&T(de,te),p&16&&ce!==(ce=o[4]("auth.email_placeholder"))&&e(g,"placeholder",ce),p&8&&(g.disabled=o[3]),p&1&&g.value!==o[0]&&Ve(g,o[0]),p&16&&ae!==(ae=o[4]("auth.password")+"")&&T(fe,ae),p&16&&he!==(he=o[4]("auth.password_placeholder"))&&e(b,"placeholder",he),p&8&&(b.disabled=o[3]),p&2&&b.value!==o[1]&&Ve(b,o[1]),o[2]?k?k.p(o,p):(k=ut(o),k.c(),k.m(y,ve)):k&&(k.d(1),k=null),be===(be=Fe(o))&&D?D.p(o,p):(D.d(1),D=be(o),D&&(D.c(),D.m(P,null))),p&8&&(P.disabled=o[3]),p&16&&re!==(re=o[4]("auth.forgot_password")+"")&&T(pe,re),p&16&&se!==(se=o[4]("auth.or")+"")&&T(me,se),p&16&&oe!==(oe=o[4]("auth.no_account")+"")&&T(_e,oe),p&16&&ie!==(ie=o[4]("auth.sign_up")+"")&&T(ge,ie)},i:nt,o:nt,d(o){o&&(l(a),l(s)),k&&k.d(),D.d(),Oe=!1,ht(qe)}}}function Dt(r,u,a){let s;vt(r,kt,_=>a(4,s=_));let c="",f="",h="",v=!1;pt(()=>{wt(De.HOME)});async function m(){if(!c||!f){a(2,h="Please fill in all fields");return}a(3,v=!0),a(2,h="");try{const _=await yt.loginWithCredentials(c,f);if(_.success){bt(_.data.access_token,_.data.user,_.data.refresh_token);const V=new URLSearchParams(window.location.search).get("redirect")||De.HOME;gt(V)}else a(2,h=_.error||"Login failed")}catch(_){console.error("Login error:",_),a(2,h="Network error or login failed")}finally{a(3,v=!1)}}function w(_){_.key==="Enter"&&m()}function L(){c=this.value,a(0,c)}function M(){f=this.value,a(1,f)}return[c,f,h,v,s,m,w,L,M]}class Bt extends mt{constructor(u){super(),_t(this,u,Dt,Vt,dt,{})}}export{Bt as component,St as universal};
