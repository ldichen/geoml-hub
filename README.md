# ğŸŒ GeoML-Hub v2.0

> **ç¬¬ä¸€ä¸ªä¸“ä¸ºåœ°ç†ç§‘å­¦è®¾è®¡çš„æœºå™¨å­¦ä¹ æ¨¡å‹åº“ - é‡æ„å‡çº§ç‰ˆ**

GeoML-Hub v2.0 æ˜¯ä¸€ä¸ªå…¨é¢é‡æ„çš„åœ°ç†ç§‘å­¦æœºå™¨å­¦ä¹ æ¨¡å‹ä»“åº“å¹³å°ï¼Œé‡‡ç”¨ç±»ä¼¼ Hugging Face çš„æ¶æ„è®¾è®¡ï¼Œä¸ºåœ°ç†ç©ºé—´ AI æ¨¡å‹çš„å‘ç°ã€å…±äº«ã€ç®¡ç†å’Œéƒ¨ç½²æä¾›ç°ä»£åŒ–çš„ç”¨æˆ·ä½“éªŒã€‚

## README update rule

1. ä¿æŒè®¾è®¡å®Œæ•´æ€§
   - âœ… åº”è¯¥åš: ä¿ç•™æ‰€æœ‰å·²è§„åˆ’çš„åŠŸèƒ½ã€APIã€å‰ç«¯é¡µé¢å’Œç»„ä»¶è®¾è®¡
   - âŒ ä¸åº”è¯¥åš: åˆ é™¤æœªå®ç°ä½†å·²è®¾è®¡çš„åŠŸèƒ½
2. å‡†ç¡®æ ‡æ³¨å®ç°çŠ¶æ€
   - âœ… å·²å®ç° - ä»£ç å·²å†™å¥½ã€æµ‹è¯•é€šè¿‡ã€å¯ä»¥ä½¿ç”¨
   - ğŸ”„ éƒ¨åˆ†å®ç° - æ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼Œä½†è¿˜éœ€å®Œå–„
   - âš ï¸ å¾…å®ç° - å·²è®¾è®¡ä½†æœªå¼€å§‹ç¼–ç 
3. å®é™…æ–‡ä»¶ä¸æ–‡æ¡£å¯¹åº”
   - æ¯”å¦‚ï¼Œå¦‚æœåˆ›å»ºäº† file_version.py åŒ…å«å¤šä¸ªæ¨¡å‹ â†’ åœ¨æ–‡æ¡£ä¸­è¯´æ˜åŒ…å«çš„å…·ä½“å†…å®¹
   - æ¯”å¦‚ï¼Œå¦‚æœåˆ›å»ºäº† file_editor.py å®ç°äº†éƒ¨åˆ† API â†’ åªæ ‡æ³¨å®é™…å®ç°çš„ API ä¸ºå·²å®Œæˆ
   - å¦‚æœåˆå¹¶äº†å¤šä¸ªæœåŠ¡åˆ°ä¸€ä¸ªæ–‡ä»¶ â†’ åœ¨æ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜åˆå¹¶æƒ…å†µï¼Œå¹¶å¯¹è¯¥æ–‡ä»¶åšä¸€å®šç¨‹åº¦ä¸Šçš„æ”¹åã€‚
4. æ›´æ–°èŒƒå›´ç•Œå®š
   - é¡¹ç›®ç»“æ„: æ ¹æ®å®é™…åˆ›å»ºçš„æ–‡ä»¶æ›´æ–°ï¼Œä½†ä¿ç•™è®¾è®¡ä¸­çš„æ–‡ä»¶ç»“æ„
   - æ•°æ®åº“: æ·»åŠ å®é™…åˆ›å»ºçš„è¡¨ï¼Œæ›´æ–°è¡¨çš„ç»“æ„ï¼Œä¿ç•™è§„åˆ’ä¸­çš„è¡¨
   - API æ¥å£: æ ‡æ³¨å®é™…å®ç°çš„æ¥å£çŠ¶æ€ï¼Œä¿ç•™è®¾è®¡ä¸­çš„æ¥å£
   - å‰ç«¯é¡µé¢å’Œç»„ä»¶ï¼šæ ‡æ³¨å·²ç»å®Œæˆçš„é¡µé¢å’Œç»„ä»¶ï¼Œä»¥åŠå®Œæˆçš„å¯¹åº”çš„ APIã€‚
5. å‘½åå‡†ç¡®æ€§
   - æ–‡ä»¶ååº”è¯¥åæ˜ å®é™…å†…å®¹ï¼Œå¦‚ file_version.py å®é™…åŒ…å«ç‰ˆæœ¬ã€ä¼šè¯ã€æƒé™ã€æ¨¡æ¿ç­‰
   - å¯ä»¥é‡å‘½åä¸ºæ›´å‡†ç¡®çš„åç§°ï¼Œæˆ–åœ¨æè¿°ä¸­è¯¦ç»†è¯´æ˜åŒ…å«å†…å®¹

### ğŸ¯ æ€»ç»“

README æ˜¯ç³»ç»Ÿçš„è®¾è®¡è“å›¾å’Œå®ç°è¿›åº¦çš„ç»“åˆä½“ï¼Œåº”è¯¥æ—¢å±•ç¤ºå®Œæ•´è®¾è®¡ï¼Œåˆå‡†ç¡®åæ˜ å½“å‰è¿›åº¦ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
GeoML-hub/
â”œâ”€â”€ ğŸ“ backend/                    # FastAPI åç«¯åº”ç”¨ (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“ app/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/             # SQLAlchemy æ•°æ®æ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py               # ç”¨æˆ·æ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ repository.py         # ä»“åº“æ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ file_storage.py       # æ–‡ä»¶å­˜å‚¨æ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ classification.py     # åˆ†ç±»ç³»ç»Ÿæ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ file_editor.py        # æ–‡ä»¶ç¼–è¾‘å™¨æ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: FileVersion, FileEditSession, FileEditPermission, FileTemplate, FileDraft
â”‚   â”‚   â”‚   â”œâ”€â”€ personal_files.py     # ä¸ªäººæ–‡ä»¶ç®¡ç†æ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: PersonalFile, PersonalFolder
â”‚   â”‚   â”‚   â””â”€â”€ service.py            # æ¨¡å‹æœåŠ¡ç®¡ç†æ¨¡å‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: ModelService, ServiceInstance, ServiceLog, ServiceHealthCheck
â”‚   â”‚   â”œâ”€â”€ ğŸ“ schemas/            # Pydantic éªŒè¯æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py               # ç”¨æˆ·ç›¸å…³æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ repository.py         # ä»“åº“ç›¸å…³æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ file_storage.py       # æ–‡ä»¶å­˜å‚¨æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ classification.py     # åˆ†ç±»æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata.py           # å…ƒæ•°æ®ç®¡ç†æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ file_editor.py        # æ–‡ä»¶ç¼–è¾‘å™¨æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: FileVersionCreate, FileEditSessionCreate, FilePermissionCreate, FileTemplateCreate, FileDraftCreate ç­‰
â”‚   â”‚   â”‚   â”œâ”€â”€ personal_files.py     # ä¸ªäººæ–‡ä»¶ç®¡ç†æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: PersonalFileBase, PersonalFolderBase, CreateFolderRequest, UpdateFolderRequest ç­‰
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py            # æ¨¡å‹æœåŠ¡ç®¡ç†æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: ServiceCreate, ServiceUpdate, ServiceResponse, ServiceStatus, ServiceStartRequest, ServiceStopRequest, BatchServiceRequest ç­‰
â”‚   â”‚   â”‚   â””â”€â”€ auth.py               # è®¤è¯æ¨¡å¼ (âœ… å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ routers/            # API è·¯ç”± (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py               # è®¤è¯API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ users.py              # ç”¨æˆ·API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories.py       # ä»“åº“API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ classifications.py    # åˆ†ç±»API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ search.py             # æœç´¢API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ files.py              # æ–‡ä»¶ç®¡ç†API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata.py           # å…ƒæ•°æ®ç®¡ç†API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ discover.py           # å‘ç°åŠŸèƒ½API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ system.py             # ç³»ç»Ÿé…ç½®API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py              # ç®¡ç†API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ file_editor.py        # æ–‡ä»¶ç¼–è¾‘å™¨API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: ç‰ˆæœ¬ç®¡ç†ã€ç¼–è¾‘ä¼šè¯ã€æƒé™ç®¡ç†ã€è‰ç¨¿ç®¡ç†ã€æ¨¡æ¿ç®¡ç† API
â”‚   â”‚   â”‚   â”‚                        # file_templates.py å·²æ•´åˆåˆ° file_editor.py
â”‚   â”‚   â”‚   â”œâ”€â”€ personal_files.py     # ä¸ªäººæ–‡ä»¶ç®¡ç†API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: ä¸ªäººæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ã€æ–‡ä»¶å¤¹ç®¡ç† API
â”‚   â”‚   â”‚   â””â”€â”€ services.py           # æ¨¡å‹æœåŠ¡ç®¡ç†API (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: æœåŠ¡CRUDã€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ã€å¥åº·æ£€æŸ¥ã€æ‰¹é‡æ“ä½œã€ç›‘æ§ç»Ÿè®¡ API
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/           # ä¸šåŠ¡é€»è¾‘å±‚ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.py       # è®¤è¯æœåŠ¡é›†æˆ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ repository_service.py # ä»“åº“ç®¡ç†æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ user_service.py       # ç”¨æˆ·ç®¡ç†æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ minio_service.py      # MinIO æ–‡ä»¶å­˜å‚¨æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ file_upload_service.py # æ–‡ä»¶ä¸Šä¼ æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ file_editor_service.py # æ–‡ä»¶ç¼–è¾‘æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: FileVersionService, FileEditSessionService, FilePermissionService, FileDraftService
â”‚   â”‚   â”‚   â”‚                        # draft_service.py å·²æ•´åˆåˆ° file_editor_service.py
â”‚   â”‚   â”‚   â”‚                        # file_template_service.py å·²æ•´åˆåˆ° file_editor_service.py
â”‚   â”‚   â”‚   â”‚                        # collaboration_service.py å·²æ•´åˆåˆ° file_editor_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ personal_files_service.py # ä¸ªäººæ–‡ä»¶ç®¡ç†æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: ä¸ªäººæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ã€æ–‡ä»¶å¤¹ç®¡ç†æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata_service.py    # å…ƒæ•°æ®ç®¡ç†æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ model_service.py      # æ¨¡å‹æœåŠ¡ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: å®¹å™¨ç¼–æ’ã€èµ„æºç®¡ç†ã€å¥åº·æ£€æŸ¥ã€è‡ªåŠ¨æ¸…ç†ã€æ™ºèƒ½é‡è¯•ã€æ‰¹é‡æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ service_scheduler.py  # æœåŠ¡è°ƒåº¦å™¨ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚                        # åŒ…å«: å®šæœŸå¥åº·æ£€æŸ¥ã€ç©ºé—²æ¸…ç†ã€èµ„æºç›‘æ§ã€å¤±è´¥é‡è¯•å¾ªç¯
â”‚   â”‚   â”‚   â””â”€â”€ classification.py     # åˆ†ç±»æœåŠ¡ (âœ… å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•° (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ yaml_parser.py        # YAML frontmatter è§£æ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â””â”€â”€ resource_manager.py   # èµ„æºç®¡ç†å·¥å…· (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”‚                    # åŒ…å«: ç«¯å£åˆ†é…ã€èµ„æºéªŒè¯ã€ç³»ç»Ÿç›‘æ§ã€é…é¢ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“ dependencies/       # ä¾èµ–æ³¨å…¥ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â””â”€â”€ auth.py               # è®¤è¯ä¾èµ– (âœ… å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/         # ä¸­é—´ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â””â”€â”€ error_handler.py      # é”™è¯¯å¤„ç† (âœ… å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ main.py             # åº”ç”¨å…¥å£ (âœ… å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ config.py           # é…ç½®ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚   â””â”€â”€ ğŸ“„ database.py         # æ•°æ®åº“é…ç½® (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“ alembic/                # æ•°æ®åº“è¿ç§» (âœ… å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ versions/           # è¿ç§»ç‰ˆæœ¬æ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â””â”€â”€ ğŸ“„ env.py              # è¿ç§»ç¯å¢ƒé…ç½® (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“ scripts/                # åˆå§‹åŒ–è„šæœ¬ (âœ… å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ init_classifications.py   # åˆ†ç±»åˆå§‹åŒ– (âœ… å·²å®ç°)
â”‚   â”‚   â””â”€â”€ create_admin_user.py      # ç®¡ç†å‘˜åˆ›å»º (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ package.json            # Node.js é…ç½® (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ package-lock.json       # ä¾èµ–é”å®šæ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile              # å®¹å™¨æ„å»ºé…ç½® (âœ… å·²å®ç°)
â”‚   â””â”€â”€ ğŸ“„ requirements.txt        # Python ä¾èµ– (âœ… å·²å®ç°)
â”œâ”€â”€ ğŸ“ frontend/                   # SvelteKit å‰ç«¯åº”ç”¨ (ğŸ”„ éƒ¨åˆ†å®ç°)
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ routes/             # é¡µé¢è·¯ç”± (ğŸ”„ éƒ¨åˆ†å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ +page.svelte        # ä¸»é¡µ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ +layout.svelte      # å¸ƒå±€æ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ +layout.js          # å¸ƒå±€é€»è¾‘ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ [username]/         # ç”¨æˆ·ç©ºé—´ (ğŸ”„ éƒ¨åˆ†å®ç°)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ +page.svelte    # ç”¨æˆ·ä¸»é¡µ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ [repository]/   # ä»“åº“é¡µé¢ (ğŸ”„ éƒ¨åˆ†å®ç°)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ +page.svelte    # ä»“åº“ä¸»é¡µ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ edit/           # æ–‡ä»¶ç¼–è¾‘ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ [...file_path]/ # æ–‡ä»¶ç¼–è¾‘é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚       â””â”€â”€ ğŸ“„ +page.svelte # æ–‡ä»¶ç¼–è¾‘å™¨é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ blob/           # æ–‡ä»¶æŸ¥çœ‹ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ [...file_path]/ # æ–‡ä»¶æŸ¥çœ‹é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚       â””â”€â”€ ğŸ“„ +page.svelte # æ–‡ä»¶æŸ¥çœ‹é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ commits/        # æäº¤å†å² (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # æäº¤å†å²é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ drafts/         # è‰ç¨¿ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # è‰ç¨¿åˆ—è¡¨é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ services/       # æ¨¡å‹æœåŠ¡ç®¡ç† (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“„ +page.svelte    # æœåŠ¡åˆ—è¡¨é¡µé¢ (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ create/         # åˆ›å»ºæœåŠ¡ (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ +page.svelte # åˆ›å»ºæœåŠ¡é¡µé¢ (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ [service_id]/   # æœåŠ¡è¯¦æƒ… (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ ğŸ“„ +page.svelte    # æœåŠ¡è¯¦æƒ…é¡µé¢ (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ ğŸ“ logs/           # æœåŠ¡æ—¥å¿— (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte # æ—¥å¿—æŸ¥çœ‹é¡µé¢ (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚       â””â”€â”€ ğŸ“ metrics/        # æœåŠ¡ç›‘æ§ (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â”‚           â””â”€â”€ ğŸ“„ +page.svelte # ç›‘æ§é¡µé¢ (âš ï¸ å¾…å®ç°)
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ upload/         # æ–‡ä»¶ä¸Šä¼  (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ ğŸ“„ +page.svelte    # æ–‡ä»¶ä¸Šä¼ é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ login/              # ç™»å½•é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # ç™»å½•ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ register/           # æ³¨å†Œé¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # æ³¨å†Œç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ new/                # æ–°å»ºä»“åº“ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # æ–°å»ºä»“åº“ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ search/             # æœç´¢é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # æœç´¢ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ trending/           # è¶‹åŠ¿é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # è¶‹åŠ¿ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ admin/              # ç®¡ç†å‘˜æ§åˆ¶å° (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ +page.svelte        # ç®¡ç†å‘˜å…¥å£é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“„ +layout.svelte      # ç®¡ç†å‘˜å¸ƒå±€ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ dashboard/          # ç®¡ç†å‘˜ä»ªè¡¨æ¿ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # ä»ªè¡¨æ¿é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ users/              # ç”¨æˆ·ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # ç”¨æˆ·ç®¡ç†é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ repositories/       # ä»“åº“ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # ä»“åº“ç®¡ç†é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ storage/            # å­˜å‚¨ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # å­˜å‚¨ç®¡ç†é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ system/             # ç³»ç»Ÿç›‘æ§ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“„ +page.svelte    # ç³»ç»Ÿç›‘æ§é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ settings/           # è®¾ç½®ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚   â”‚           â””â”€â”€ ğŸ“„ +page.svelte    # è®¾ç½®ç®¡ç†é¡µé¢ (âœ… å·²å®ç°)
â”‚   â”‚   â””â”€â”€ ğŸ“ lib/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ components/     # å¯å¤ç”¨ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ActivityFeed.svelte       # æ´»åŠ¨åŠ¨æ€ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ CategoryFilter.svelte     # åˆ†ç±»ç­›é€‰å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ClassificationFilter.svelte # åˆ†ç±»ç­›é€‰å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ClassificationSelector.svelte # åˆ†ç±»é€‰æ‹©å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ CommentSection.svelte     # è¯„è®ºåŒº (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ FileDropZone.svelte       # æ–‡ä»¶æ‹–æ”¾åŒº (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ FileManager.svelte        # æ–‡ä»¶ç®¡ç†å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ FileTree.svelte          # æ–‡ä»¶æµè§ˆå™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ FileUpload.svelte        # æ–‡ä»¶ä¸Šä¼  (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ Footer.svelte            # é¡µè„š (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ Header.svelte            # é¡µå¤´ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ Loading.svelte           # åŠ è½½ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ModelCard.svelte         # æ¨¡å‹å¡ç‰‡ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ NotificationCenter.svelte # é€šçŸ¥ä¸­å¿ƒ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ NotificationTrigger.svelte # é€šçŸ¥è§¦å‘å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ Pagination.svelte        # åˆ†é¡µç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ PersonalFileManager.svelte # ä¸ªäººæ–‡ä»¶ç®¡ç†å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ PersonalFileUpload.svelte # ä¸ªäººæ–‡ä»¶ä¸Šä¼  (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ReadmeViewer.svelte      # READMEæŸ¥çœ‹å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ RepositoryCard.svelte    # ä»“åº“å¡ç‰‡ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ RepositoryHeader.svelte  # ä»“åº“å¤´éƒ¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ RepositoryStats.svelte   # ä»“åº“ç»Ÿè®¡ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ RepositoryTabs.svelte    # ä»“åº“é€‰é¡¹å¡ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ SearchBar.svelte         # æœç´¢æ  (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ServiceCard.svelte       # æœåŠ¡å¡ç‰‡ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ SocialButton.svelte      # ç¤¾äº¤æŒ‰é’® (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ StyleGuide.svelte        # æ ·å¼æŒ‡å— (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ToastContainer.svelte    # æç¤ºå®¹å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ UserAvatar.svelte        # ç”¨æˆ·å¤´åƒ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ UserProfile.svelte       # ç”¨æˆ·èµ„æ–™ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ YAMLMetadataEditor.svelte # YAMLç¼–è¾‘å™¨ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ admin/               # ç®¡ç†å‘˜ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ (ç®¡ç†å‘˜ç›¸å…³ç»„ä»¶)        # åŒ…å«ä»ªè¡¨æ¿ã€ç”¨æˆ·ç®¡ç†ç­‰ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ collaboration/       # åä½œç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ (åä½œç›¸å…³ç»„ä»¶)          # åŒ…å«åä½œç¼–è¾‘ã€ä¼šè¯ç®¡ç†ç­‰ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ draft/               # è‰ç¨¿ç®¡ç†ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ (è‰ç¨¿ç›¸å…³ç»„ä»¶)          # åŒ…å«è‰ç¨¿ç®¡ç†ã€è‡ªåŠ¨ä¿å­˜ç­‰ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ editor/              # æ–‡ä»¶ç¼–è¾‘å™¨ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ (ç¼–è¾‘å™¨ç›¸å…³ç»„ä»¶)        # åŒ…å«ç¼–è¾‘å™¨ã€å·¥å…·æ ã€çŠ¶æ€æ ç­‰ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ ui/                  # åŸºç¡€UIç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ (åŸºç¡€UIç»„ä»¶)           # åŒ…å«æŒ‰é’®ã€è¾“å…¥æ¡†ã€æ¨¡æ€æ¡†ç­‰ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ version/             # ç‰ˆæœ¬æ§åˆ¶ç»„ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚       â””â”€â”€ (ç‰ˆæœ¬æ§åˆ¶ç›¸å…³ç»„ä»¶)      # åŒ…å«ç‰ˆæœ¬å†å²ã€å·®å¼‚æŸ¥çœ‹ç­‰ (âœ… å·²å®ç°)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ utils/          # å·¥å…·å‡½æ•° (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ accessibility.js       # æ— éšœç¢å·¥å…· (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ api.js                 # API å®¢æˆ·ç«¯ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ auth.js                # è®¤è¯å·¥å…· (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ constants.js           # å¸¸é‡å®šä¹‰ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ form-validation.js     # è¡¨å•éªŒè¯ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â””â”€â”€ toast.js               # æç¤ºå·¥å…· (âœ… å·²å®ç°)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ config/         # é…ç½®æ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ i18n/           # å›½é™…åŒ–æ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ stores/         # çŠ¶æ€ç®¡ç† (âœ… å·²å®ç°)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ styles/         # æ ·å¼æ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â””â”€â”€ ğŸ“ types/          # ç±»å‹å®šä¹‰ (âœ… å·²å®ç°)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ i18n/           # å›½é™…åŒ– (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ locales/        # è¯­è¨€åŒ… (âœ… å·²å®ç°)
â”‚   â”‚       â”œâ”€â”€ ğŸ“ styles/         # æ ·å¼æ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ editor.css             # ç¼–è¾‘å™¨æ ·å¼ (âš ï¸ å¾…å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ codemirror-themes.css  # CodeMirror ä¸»é¢˜ (âš ï¸ å¾…å®ç°)
â”‚   â”‚       â”‚   â”œâ”€â”€ diff-viewer.css        # å·®å¼‚æŸ¥çœ‹å™¨æ ·å¼ (âš ï¸ å¾…å®ç°)
â”‚   â”‚       â”‚   â””â”€â”€ file-manager.css       # æ–‡ä»¶ç®¡ç†å™¨æ ·å¼ (âš ï¸ å¾…å®ç°)
â”‚   â”‚       â””â”€â”€ ğŸ“ types/          # TypeScript ç±»å‹ (âœ… å·²å®ç°)
â”‚   â”‚           â”œâ”€â”€ editor.ts              # ç¼–è¾‘å™¨ç±»å‹ (âš ï¸ å¾…å®ç°)
â”‚   â”‚           â”œâ”€â”€ version.ts             # ç‰ˆæœ¬ç±»å‹ (âš ï¸ å¾…å®ç°)
â”‚   â”‚           â”œâ”€â”€ session.ts             # ä¼šè¯ç±»å‹ (âš ï¸ å¾…å®ç°)
â”‚   â”‚           â”œâ”€â”€ draft.ts               # è‰ç¨¿ç±»å‹ (âš ï¸ å¾…å®ç°)
â”‚   â”‚           â”œâ”€â”€ template.ts            # æ¨¡æ¿ç±»å‹ (âš ï¸ å¾…å®ç°)
â”‚   â”‚           â””â”€â”€ collaboration.ts       # åä½œç±»å‹ (âš ï¸ å¾…å®ç°)
â”‚   â”œâ”€â”€ ğŸ“ static/                 # é™æ€æ–‡ä»¶ (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ app.html                # HTMLæ¨¡æ¿ (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ app.css                 # å…¨å±€æ ·å¼ (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ package.json            # Node.js ä¾èµ– (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ tailwind.config.js      # æ ·å¼é…ç½® (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ svelte.config.js        # Svelte é…ç½® (âœ… å·²å®ç°)
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json           # TypeScript é…ç½® (âœ… å·²å®ç°)
â”‚   â””â”€â”€ ğŸ“„ vite.config.js          # Vite é…ç½® (âœ… å·²å®ç°)
â”œâ”€â”€ ğŸ“„ docker-compose.yml          # å¼€å‘ç¯å¢ƒé…ç½® (âœ… å·²å®ç°)
â”œâ”€â”€ ğŸ“„ docker-compose.prod.yml     # ç”Ÿäº§ç¯å¢ƒé…ç½® (âœ… å·²å®ç°)
â”œâ”€â”€ ğŸ“„ CLAUDE.md                  # AI å¼€å‘æŒ‡å— (âœ… å·²å®ç°)
â”œâ”€â”€ ğŸ“„ README.md                  # é¡¹ç›®æ–‡æ¡£ (âœ… å·²å®ç°)
â””â”€â”€ ğŸ“„ DEPLOYMENT.md              # éƒ¨ç½²æ–‡æ¡£ (âœ… å·²å®ç°)
```

## ğŸ”— ç³»ç»Ÿå…³ç³»æ¶æ„ v2.0

### æ ¸å¿ƒå®ä½“å…³ç³»

```mermaid
erDiagram
    USER_PROFILES ||--o{ MODEL_REPOSITORIES : owns
    USER_PROFILES ||--o{ USER_FOLLOWS : follows
    USER_PROFILES ||--o{ REPOSITORY_STARS : stars
    USER_PROFILES ||--|| USER_STORAGE : has

    MODEL_REPOSITORIES ||--o{ REPOSITORY_FILES : contains
    MODEL_REPOSITORIES ||--o{ MODEL_CLASSIFICATIONS : categorized_by
    MODEL_REPOSITORIES ||--o{ REPOSITORY_STARS : receives_stars
    MODEL_REPOSITORIES ||--o{ REPOSITORY_VIEWS : receives_views

    CLASSIFICATIONS ||--o{ MODEL_CLASSIFICATIONS : used_in
    CLASSIFICATIONS ||--o{ CLASSIFICATIONS : parent_child

    REPOSITORY_FILES ||--o{ FILE_DOWNLOADS : downloaded
    REPOSITORY_FILES ||--|| FILE_UPLOAD_SESSIONS : uploaded_via
```

### åˆ†å±‚æ¶æ„è®¾è®¡

#### ç¬¬ä¸€å±‚ï¼šç”¨æˆ·èº«ä»½å±‚

```
ğŸ‘¤ å¤–éƒ¨è®¤è¯æœåŠ¡ (JWT Token + ç”¨æˆ·ä¿¡æ¯åŒæ­¥)
    â†“
ğŸ‘¥ ç”¨æˆ·èµ„æ–™ç®¡ç† (user_profiles)
    â†“
ğŸ“ ç”¨æˆ·ä¸ªäººç©ºé—´ (/{username} å‘½åç©ºé—´)
```

#### ç¬¬äºŒå±‚ï¼šä»“åº“ç®¡ç†å±‚

```
ğŸ“ ç”¨æˆ·ç©ºé—´ (æ‰€æœ‰æƒå…³ç³»)
    â†“
ğŸ“¦ æ¨¡å‹ä»“åº“ (model_repositories)
    â”œâ”€â”€ ğŸ“ README.md â†’ ğŸ”§ YAMLå…ƒæ•°æ®è§£æ
    â”œâ”€â”€ ğŸ“„ ä»“åº“æ–‡ä»¶ (repository_files)
    â”œâ”€â”€ ğŸ—‚ï¸ åˆ†ç±»æ ‡ç­¾ (model_classifications)
    â””â”€â”€ ğŸ“ˆ ç¤¾äº¤ç»Ÿè®¡ (stars, views, downloads)
```

#### ç¬¬ä¸‰å±‚ï¼šå†…å®¹ç»„ç»‡å±‚

```
ğŸ“¦ ä»“åº“å†…å®¹
    â”œâ”€â”€ ğŸ“ æ–‡ä»¶ç®¡ç† â†’ ğŸ’¾ MinIOå¯¹è±¡å­˜å‚¨
    â”œâ”€â”€ ğŸ·ï¸ æ™ºèƒ½åˆ†ç±» â†’ ğŸ“Š ä¸‰çº§åˆ†ç±»ä½“ç³»
    â”œâ”€â”€ ğŸ‘¥ ç¤¾åŒºåŠŸèƒ½ â†’ â­ æ”¶è—ã€å…³æ³¨ã€ç»Ÿè®¡
    â””â”€â”€ ğŸ” æœç´¢å‘ç° â†’ ğŸ¯ å¤šç»´åº¦ç­›é€‰
```

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„ v2.0

### æ ¸å¿ƒè¡¨ç»“æ„ (âœ… å·²å®ç°)

```sql
-- ç”¨æˆ·è¡¨ (âœ… å·²å®ç°)
CREATE TABLE users (
    id SERIAL PRIMARY KEY,                     -- å†…éƒ¨ç”¨æˆ·ID
    external_user_id VARCHAR(255) NOT NULL UNIQUE, -- å¤–éƒ¨è®¤è¯ç³»ç»Ÿç”¨æˆ·ID
    username VARCHAR(100) NOT NULL UNIQUE,     -- ç”¨æˆ·å (å”¯ä¸€)
    email VARCHAR(255) NOT NULL UNIQUE,        -- é‚®ç®±
    full_name VARCHAR(255),                     -- å…¨å
    avatar_url VARCHAR(500),                    -- å¤´åƒURL
    bio TEXT,                                   -- ä¸ªäººç®€ä»‹
    website VARCHAR(500),                       -- ä¸ªäººç½‘ç«™
    location VARCHAR(255),                      -- åœ°ç†ä½ç½®

    -- ç¤¾äº¤ç»Ÿè®¡
    followers_count INTEGER DEFAULT 0,         -- ç²‰ä¸æ•°
    following_count INTEGER DEFAULT 0,         -- å…³æ³¨æ•°
    public_repos_count INTEGER DEFAULT 0,      -- å…¬å¼€ä»“åº“æ•°

    -- å­˜å‚¨é…é¢
    storage_quota BIGINT DEFAULT 5368709120,   -- 5GB é»˜è®¤é…é¢
    storage_used BIGINT DEFAULT 0,             -- å·²ä½¿ç”¨å­˜å‚¨

    -- è´¦æˆ·çŠ¶æ€
    is_active BOOLEAN DEFAULT TRUE,            -- æ˜¯å¦æ¿€æ´»
    is_verified BOOLEAN DEFAULT FALSE,         -- æ˜¯å¦éªŒè¯
    is_admin BOOLEAN DEFAULT FALSE,            -- æ˜¯å¦ç®¡ç†å‘˜

    -- æ—¶é—´æˆ³
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_active_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_seen_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ç”¨æˆ·å­˜å‚¨ç»Ÿè®¡è¡¨ (âœ… å·²å®ç°)
CREATE TABLE user_storage (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE UNIQUE,
    total_files INTEGER DEFAULT 0,                 -- æ€»æ–‡ä»¶æ•°
    total_size BIGINT DEFAULT 0,                   -- æ€»å¤§å°

    -- æŒ‰æ–‡ä»¶ç±»å‹ç»Ÿè®¡
    model_files_count INTEGER DEFAULT 0,
    model_files_size BIGINT DEFAULT 0,
    dataset_files_count INTEGER DEFAULT 0,
    dataset_files_size BIGINT DEFAULT 0,
    image_files_count INTEGER DEFAULT 0,
    image_files_size BIGINT DEFAULT 0,
    document_files_count INTEGER DEFAULT 0,
    document_files_size BIGINT DEFAULT 0,
    other_files_count INTEGER DEFAULT 0,
    other_files_size BIGINT DEFAULT 0,

    last_calculated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ä¸ªäººæ–‡ä»¶è¡¨ (âœ… å·²å®ç°)
CREATE TABLE personal_files (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    filename VARCHAR(255) NOT NULL,                    -- æ–‡ä»¶å
    original_filename VARCHAR(255) NOT NULL,          -- åŸå§‹æ–‡ä»¶å
    file_path VARCHAR(1000) NOT NULL,                 -- æ–‡ä»¶åœ¨ä¸ªäººç©ºé—´ä¸­çš„è·¯å¾„
    file_size BIGINT NOT NULL DEFAULT 0,              -- æ–‡ä»¶å¤§å°
    file_type VARCHAR(100),                           -- æ–‡ä»¶ç±»å‹
    mime_type VARCHAR(200),                           -- MIMEç±»å‹
    file_hash VARCHAR(128),                           -- æ–‡ä»¶å“ˆå¸Œ

    -- MinIOå­˜å‚¨ä¿¡æ¯
    minio_bucket VARCHAR(255) NOT NULL,
    minio_object_key VARCHAR(1000) NOT NULL,

    -- å…ƒæ•°æ®
    description TEXT,                                  -- æ–‡ä»¶æè¿°
    tags TEXT,                                        -- æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰
    is_public BOOLEAN DEFAULT FALSE,                  -- æ˜¯å¦å…¬å¼€
    is_deleted BOOLEAN DEFAULT FALSE,                 -- æ˜¯å¦åˆ é™¤
    upload_status VARCHAR(20) DEFAULT 'completed',    -- ä¸Šä¼ çŠ¶æ€

    -- ç»Ÿè®¡ä¿¡æ¯
    download_count INTEGER DEFAULT 0,
    view_count INTEGER DEFAULT 0,

    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_accessed_at TIMESTAMP WITH TIME ZONE,

    UNIQUE(user_id, file_path)
);

-- ä¸ªäººæ–‡ä»¶å¤¹è¡¨ (âœ… å·²å®ç°)
CREATE TABLE personal_folders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,                       -- æ–‡ä»¶å¤¹å
    path VARCHAR(1000) NOT NULL,                      -- æ–‡ä»¶å¤¹è·¯å¾„
    parent_id INTEGER REFERENCES personal_folders(id) ON DELETE CASCADE,
    description TEXT,                                  -- æè¿°
    color VARCHAR(7),                                 -- æ–‡ä»¶å¤¹é¢œè‰²
    is_public BOOLEAN DEFAULT FALSE,
    is_deleted BOOLEAN DEFAULT FALSE,

    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    UNIQUE(user_id, path)
);

-- ä¸ªäººæ–‡ä»¶ä¸‹è½½è®°å½•è¡¨ (âœ… å·²å®ç°)
CREATE TABLE personal_file_downloads (
    id SERIAL PRIMARY KEY,
    file_id INTEGER REFERENCES personal_files(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    ip_address VARCHAR(45),                           -- ä¸‹è½½è€…IP
    user_agent VARCHAR(500),                          -- User Agent
    download_size BIGINT,                             -- ä¸‹è½½å­—èŠ‚æ•°
    download_status VARCHAR(20) DEFAULT 'completed',
    downloaded_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ç”¨æˆ·å…³æ³¨å…³ç³»è¡¨ (âœ… å·²å®ç°)
CREATE TABLE user_follows (
    id SERIAL PRIMARY KEY,
    follower_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    following_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    UNIQUE(follower_id, following_id),
    CHECK (follower_id != following_id)
);

-- ä»“åº“è¡¨ (âœ… å·²å®ç°)
CREATE TABLE repositories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,             -- ä»“åº“åç§°
    full_name VARCHAR(512) NOT NULL UNIQUE, -- owner/repo_name
    description TEXT,                       -- ä»“åº“æè¿°

    -- æ‰€æœ‰è€…ä¿¡æ¯
    owner_id INTEGER REFERENCES users(id) ON DELETE CASCADE,

    -- ä»“åº“ç±»å‹å’Œå¯è§æ€§
    repo_type VARCHAR(50) DEFAULT 'model',  -- model, dataset, space
    visibility VARCHAR(20) DEFAULT 'public', -- public, private

    -- README.md è§£æçš„å…ƒæ•°æ®
    repo_metadata JSON,                     -- YAML frontmatter è§£æç»“æœ
    readme_content TEXT,                    -- README.md å†…å®¹

    -- æ ‡ç­¾å’Œåˆ†ç±»
    tags TEXT[],                           -- æ ‡ç­¾æ•°ç»„
    license VARCHAR(100),                   -- è®¸å¯è¯

    -- ç»Ÿè®¡ä¿¡æ¯
    stars_count INTEGER DEFAULT 0,         -- æ˜Ÿæ ‡æ•°
    downloads_count INTEGER DEFAULT 0,     -- ä¸‹è½½æ¬¡æ•°
    views_count INTEGER DEFAULT 0,         -- æŸ¥çœ‹æ¬¡æ•°
    forks_count INTEGER DEFAULT 0,         -- Forkæ•°

    -- æ–‡ä»¶å’Œå­˜å‚¨ä¿¡æ¯
    total_files INTEGER DEFAULT 0,
    total_size BIGINT DEFAULT 0,

    -- çŠ¶æ€
    is_active BOOLEAN DEFAULT TRUE,
    is_featured BOOLEAN DEFAULT FALSE,

    -- æ—¶é—´æˆ³
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_commit_at TIMESTAMP WITH TIME ZONE
);

-- ä»“åº“æ–‡ä»¶è¡¨ (âœ… å·²å®ç°)
CREATE TABLE repository_files (
    id SERIAL PRIMARY KEY,
    repository_id INTEGER REFERENCES repositories(id) ON DELETE CASCADE,

    -- æ–‡ä»¶ä¿¡æ¯
    filename VARCHAR(500) NOT NULL,          -- æ–‡ä»¶å
    file_path VARCHAR(1000) NOT NULL,        -- ä»“åº“å†…ç›¸å¯¹è·¯å¾„
    file_type VARCHAR(100),                  -- æ–‡ä»¶ç±»å‹åˆ†ç±»
    mime_type VARCHAR(200),                  -- MIMEç±»å‹
    file_size BIGINT NOT NULL,               -- æ–‡ä»¶å¤§å°
    file_hash VARCHAR(128),                  -- SHA256å“ˆå¸Œ

    -- MinIO å­˜å‚¨ä¿¡æ¯
    minio_bucket VARCHAR(255) NOT NULL,      -- MinIOæ¡¶å
    minio_object_key VARCHAR(1000) NOT NULL, -- MinIOå¯¹è±¡é”®

    -- ç‰ˆæœ¬å’ŒçŠ¶æ€
    version VARCHAR(50) DEFAULT 'latest',
    is_deleted BOOLEAN DEFAULT FALSE,

    -- ä¸‹è½½ç»Ÿè®¡
    download_count INTEGER DEFAULT 0,

    -- æ—¶é—´æˆ³
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    UNIQUE(repository_id, file_path)
);

-- æ–‡ä»¶ä¸Šä¼ ä¼šè¯è¡¨ (âœ… å·²å®ç°)
CREATE TABLE file_upload_sessions (
    id SERIAL PRIMARY KEY,
    session_id VARCHAR(255) NOT NULL UNIQUE,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    repository_id INTEGER REFERENCES repositories(id) ON DELETE CASCADE,

    -- æ–‡ä»¶ä¿¡æ¯
    filename VARCHAR(500) NOT NULL,
    file_path VARCHAR(1000) NOT NULL,
    file_size BIGINT NOT NULL,
    mime_type VARCHAR(200),
    file_hash VARCHAR(128),

    -- åˆ†å—ä¸Šä¼ ä¿¡æ¯
    chunk_size INTEGER DEFAULT 5242880,     -- 5MB é»˜è®¤å—å¤§å°
    total_chunks INTEGER NOT NULL,
    uploaded_chunks INTEGER DEFAULT 0,
    chunk_status JSON,                      -- è®°å½•æ¯ä¸ªå—çš„ä¸Šä¼ çŠ¶æ€

    -- MinIO ä¿¡æ¯
    minio_bucket VARCHAR(255),
    minio_object_key VARCHAR(1000),
    minio_upload_id VARCHAR(255),           -- MultipartUpload ID

    -- çŠ¶æ€å’Œè¿›åº¦
    status VARCHAR(20) DEFAULT 'pending',   -- pending/uploading/completed/failed/cancelled
    progress_percentage INTEGER DEFAULT 0,
    error_message TEXT,

    -- æ—¶é—´æˆ³
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    completed_at TIMESTAMP WITH TIME ZONE,
    expires_at TIMESTAMP WITH TIME ZONE
);

-- æ–‡ä»¶ä¸‹è½½è®°å½•è¡¨ (âœ… å·²å®ç°)
CREATE TABLE file_downloads (
    id SERIAL PRIMARY KEY,
    file_id INTEGER REFERENCES repository_files(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,

    -- ä¸‹è½½ä¿¡æ¯
    ip_address VARCHAR(45),                 -- IPv6 æ”¯æŒ
    user_agent TEXT,
    referer VARCHAR(1000),
    download_method VARCHAR(50) DEFAULT 'direct', -- direct, git, api

    -- ä¸‹è½½çŠ¶æ€
    bytes_downloaded BIGINT DEFAULT 0,
    is_completed BOOLEAN DEFAULT FALSE,

    -- æ—¶é—´æˆ³
    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    completed_at TIMESTAMP WITH TIME ZONE
);

-- ä»“åº“æ˜Ÿæ ‡å…³ç³»è¡¨ (âœ… å·²å®ç°)
CREATE TABLE repository_stars (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    repository_id INTEGER REFERENCES repositories(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(user_id, repository_id)
);

-- ä»“åº“è®¿é—®è®°å½•è¡¨ (âœ… å·²å®ç°)
CREATE TABLE repository_views (
    id SERIAL PRIMARY KEY,
    repository_id INTEGER REFERENCES repositories(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    ip_address VARCHAR(45),                 -- IPv6 æ”¯æŒ
    user_agent TEXT,
    referer VARCHAR(1000),

    -- è®¿é—®è¯¦æƒ…
    view_type VARCHAR(50) DEFAULT 'page_view', -- page_view, file_view, download
    target_path VARCHAR(1000),              -- è®¿é—®çš„å…·ä½“è·¯å¾„æˆ–æ–‡ä»¶

    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- æ–‡ä»¶ç‰ˆæœ¬å†å²è¡¨ (âš ï¸ å¾…å®ç°)
CREATE TABLE file_versions (
    id SERIAL PRIMARY KEY,
    file_id INTEGER REFERENCES repository_files(id) ON DELETE CASCADE,
    version_number INTEGER NOT NULL,
    version_hash VARCHAR(64) NOT NULL,           -- å†…å®¹å“ˆå¸Œ (SHA256å‰16ä½)

    -- å†…å®¹å­˜å‚¨
    content_preview TEXT,                        -- æ–‡æœ¬æ–‡ä»¶å†…å®¹é¢„è§ˆ (å‰1000å­—ç¬¦)
    minio_object_key VARCHAR(1000) NOT NULL,     -- MinIO ä¸­çš„ç‰ˆæœ¬æ–‡ä»¶è·¯å¾„

    -- å˜æ›´ä¿¡æ¯
    commit_message TEXT,
    diff_summary JSON,                           -- å˜æ›´æ‘˜è¦ {added_lines: 10, deleted_lines: 5}
    file_size BIGINT NOT NULL,

    -- æ“ä½œä¿¡æ¯
    author_id INTEGER REFERENCES users(id),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    -- ç´¢å¼•
    UNIQUE(file_id, version_number)
);

-- æ–‡ä»¶ç¼–è¾‘ä¼šè¯è¡¨ (âœ… å·²å®ç°)
CREATE TABLE file_edit_sessions (
    id SERIAL PRIMARY KEY,
    session_id VARCHAR(255) UNIQUE NOT NULL,
    file_id INTEGER REFERENCES repository_files(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,

    -- ç¼–è¾‘çŠ¶æ€
    is_active BOOLEAN DEFAULT TRUE,
    content_draft TEXT,                          -- è‰ç¨¿å†…å®¹
    last_cursor_position JSON,                   -- å…‰æ ‡ä½ç½®

    -- æ—¶é—´ç®¡ç†
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    expires_at TIMESTAMP WITH TIME ZONE,         -- ä¼šè¯è¿‡æœŸæ—¶é—´

    INDEX(file_id, is_active),
    INDEX(user_id, is_active)
);

-- æ–‡ä»¶ç¼–è¾‘æƒé™è¡¨ (âœ… å·²å®ç°)
CREATE TABLE file_edit_permissions (
    id SERIAL PRIMARY KEY,
    file_id INTEGER REFERENCES repository_files(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    permission_type VARCHAR(20) DEFAULT 'read', -- read, write, admin
    granted_by INTEGER REFERENCES users(id),
    granted_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    UNIQUE(file_id, user_id)
);

-- æ–‡ä»¶è‰ç¨¿è¡¨ (âœ… å·²å®ç°)
CREATE TABLE file_drafts (
    id SERIAL PRIMARY KEY,
    file_id INTEGER REFERENCES repository_files(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    base_version_id INTEGER REFERENCES file_versions(id) ON DELETE CASCADE,

    -- è‰ç¨¿å†…å®¹
    draft_content TEXT,
    title VARCHAR(255),
    description TEXT,

    -- ç¼–è¾‘çŠ¶æ€
    cursor_position JSON,
    selection_range JSON,
    is_auto_saved BOOLEAN DEFAULT TRUE,
    auto_save_count INTEGER DEFAULT 0,

    -- æ—¶é—´æˆ³
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_access TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    UNIQUE(file_id, user_id)
);

-- æ–‡ä»¶æ¨¡æ¿è¡¨ (âœ… å·²å®ç°)
CREATE TABLE file_templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    file_extension VARCHAR(50),
    template_content TEXT NOT NULL,
    variables JSON,                              -- æ¨¡æ¿å˜é‡å®šä¹‰
    category VARCHAR(100),
    is_system BOOLEAN DEFAULT FALSE,
    created_by INTEGER REFERENCES users(id),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- æ‰©å±•ç°æœ‰è¡¨å­—æ®µ (âš ï¸ å¾…å®ç°)
-- ALTER TABLE repository_files ADD COLUMN current_version INTEGER DEFAULT 1;
-- ALTER TABLE repository_files ADD COLUMN last_edit_session_id VARCHAR(255);
-- ALTER TABLE repository_files ADD COLUMN is_text_file BOOLEAN DEFAULT FALSE;
-- ALTER TABLE repository_files ADD COLUMN encoding VARCHAR(20) DEFAULT 'utf-8';
-- ALTER TABLE repositories ADD COLUMN total_commits INTEGER DEFAULT 0;
-- ALTER TABLE repositories ADD COLUMN last_commit_message TEXT;

-- åˆ†ç±»è¡¨ (âœ… å·²å®ç°)
CREATE TABLE classifications (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    level INTEGER NOT NULL,                  -- 1=ä¸€çº§, 2=äºŒçº§, 3=ä¸‰çº§
    parent_id INTEGER REFERENCES classifications(id),
    sort_order INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    CHECK ((level = 1 AND parent_id IS NULL) OR (level > 1 AND parent_id IS NOT NULL)),
    UNIQUE(name, parent_id)
);

-- ä»“åº“åˆ†ç±»å…³è”è¡¨ (âœ… å·²å®ç°)
CREATE TABLE repository_classifications (
    id SERIAL PRIMARY KEY,
    repository_id INTEGER REFERENCES repositories(id) ON DELETE CASCADE,
    classification_id INTEGER REFERENCES classifications(id) ON DELETE CASCADE,
    level INTEGER NOT NULL,                  -- è®°å½•é€‰æ‹©çš„çº§åˆ«
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(repository_id, classification_id)
);

-- ç³»ç»Ÿå­˜å‚¨ç»Ÿè®¡è¡¨ (âœ… å·²å®ç°)
CREATE TABLE system_storage (
    id SERIAL PRIMARY KEY,
    date TIMESTAMP WITH TIME ZONE NOT NULL UNIQUE,

    -- æ€»ä½“ç»Ÿè®¡
    total_users INTEGER DEFAULT 0,
    total_repositories INTEGER DEFAULT 0,
    total_files INTEGER DEFAULT 0,
    total_size BIGINT DEFAULT 0,

    -- æŒ‰ç±»å‹ç»Ÿè®¡
    public_repos INTEGER DEFAULT 0,
    private_repos INTEGER DEFAULT 0,
    model_repos INTEGER DEFAULT 0,
    dataset_repos INTEGER DEFAULT 0,

    -- æŒ‰æ–‡ä»¶ç±»å‹ç»Ÿè®¡
    model_files_size BIGINT DEFAULT 0,
    dataset_files_size BIGINT DEFAULT 0,
    image_files_size BIGINT DEFAULT 0,
    document_files_size BIGINT DEFAULT 0,
    other_files_size BIGINT DEFAULT 0,

    -- æ´»è·ƒåº¦ç»Ÿè®¡
    daily_downloads INTEGER DEFAULT 0,
    daily_uploads INTEGER DEFAULT 0,
    daily_views INTEGER DEFAULT 0,

    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- MinIO æœåŠ¡å¥åº·çŠ¶æ€è¡¨ (âœ… å·²å®ç°)
CREATE TABLE minio_service_health (
    id SERIAL PRIMARY KEY,
    endpoint VARCHAR(500) NOT NULL,

    -- å¥åº·çŠ¶æ€
    is_healthy BOOLEAN DEFAULT TRUE,
    response_time_ms INTEGER,
    error_message TEXT,

    -- å­˜å‚¨ä¿¡æ¯
    available_space BIGINT,
    used_space BIGINT,
    total_space BIGINT,

    -- æ£€æŸ¥æ—¶é—´
    checked_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

    -- ç»Ÿè®¡ä¿¡æ¯
    total_buckets INTEGER DEFAULT 0,
    total_objects INTEGER DEFAULT 0
);

-- æ¨¡å‹æœåŠ¡è¡¨ (âœ… å·²å®ç°)
CREATE TABLE model_services (
    id SERIAL PRIMARY KEY,
    repository_id INTEGER REFERENCES repositories(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,

    -- æœåŠ¡åŸºæœ¬ä¿¡æ¯
    service_name VARCHAR(255) NOT NULL,        -- æœåŠ¡åç§°
    model_id VARCHAR(255) NOT NULL,            -- æ¨¡å‹æ ‡è¯†ç¬¦
    model_ip VARCHAR(255) NOT NULL,            -- æ¨¡å‹æœåŠ¡å™¨IPåœ°å€
    description TEXT,                          -- æœåŠ¡æè¿°

    -- æœåŠ¡é…ç½®
    example_data_path VARCHAR(1000),           -- ç¤ºä¾‹æ•°æ®è·¯å¾„
    gradio_port INTEGER,                       -- Gradioç«¯å£
    service_url VARCHAR(500),                  -- æœåŠ¡è®¿é—®URL

    -- èµ„æºé…ç½®
    cpu_limit VARCHAR(50) DEFAULT '0.2',       -- CPUé™åˆ¶ï¼ˆé»˜è®¤0.2æ ¸ï¼‰
    memory_limit VARCHAR(50) DEFAULT '256Mi',  -- å†…å­˜é™åˆ¶ï¼ˆé»˜è®¤256Miï¼‰

    -- è®¿é—®æ§åˆ¶
    is_public BOOLEAN DEFAULT FALSE,           -- æ˜¯å¦å…¬å¼€è®¿é—®
    access_token VARCHAR(255),                 -- è®¿é—®ä»¤ç‰Œ

    -- æœåŠ¡çŠ¶æ€
    status VARCHAR(50) DEFAULT 'created',      -- created, starting, running, stopping, stopped, error, idle
    container_id VARCHAR(255),                 -- å®¹å™¨ID

    -- æœåŠ¡ä¼˜å…ˆçº§å’Œé‡è¯•æœºåˆ¶ (V2.0 æ–°å¢)
    priority INTEGER DEFAULT 100,             -- å¯åŠ¨ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜
    last_health_check TIMESTAMP WITH TIME ZONE, -- æœ€åå¥åº·æ£€æŸ¥æ—¶é—´
    auto_start_retry_count INTEGER DEFAULT 0, -- è‡ªåŠ¨å¯åŠ¨é‡è¯•æ¬¡æ•°
    last_failure_reason TEXT,                 -- æœ€åä¸€æ¬¡å¤±è´¥åŸå› 
    failure_type VARCHAR(50),                 -- å¤±è´¥ç±»å‹: temporary, permanent, unknown

    -- ç»Ÿè®¡ä¿¡æ¯
    access_count INTEGER DEFAULT 0,           -- è®¿é—®æ¬¡æ•°
    start_count INTEGER DEFAULT 0,            -- å¯åŠ¨æ¬¡æ•°
    total_runtime_minutes INTEGER DEFAULT 0,  -- æ€»è¿è¡Œæ—¶é—´(åˆ†é’Ÿ)

    -- æ—¶é—´æˆ³
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_accessed_at TIMESTAMP WITH TIME ZONE,
    last_started_at TIMESTAMP WITH TIME ZONE,
    last_stopped_at TIMESTAMP WITH TIME ZONE,

    CONSTRAINT uq_repo_service_name UNIQUE(repository_id, service_name)
);

-- æœåŠ¡å®ä¾‹è¡¨ (âœ… å·²å®ç°)
CREATE TABLE service_instances (
    id SERIAL PRIMARY KEY,
    service_id INTEGER REFERENCES model_services(id) ON DELETE CASCADE,

    -- å®¹å™¨ä¿¡æ¯
    container_id VARCHAR(255) NOT NULL UNIQUE,
    container_name VARCHAR(255),
    image_name VARCHAR(255),

    -- ç½‘ç»œé…ç½®
    host_port INTEGER,                         -- ä¸»æœºç«¯å£
    container_port INTEGER DEFAULT 7860,      -- å®¹å™¨ç«¯å£

    -- å®ä¾‹çŠ¶æ€
    status VARCHAR(50) DEFAULT 'created',     -- created, starting, running, stopping, stopped, error
    pid INTEGER,                              -- è¿›ç¨‹ID

    -- èµ„æºä½¿ç”¨
    cpu_usage_percent DECIMAL(5,2),           -- CPUä½¿ç”¨ç‡
    memory_usage_bytes BIGINT,                -- å†…å­˜ä½¿ç”¨é‡

    -- æ—¶é—´æˆ³
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    started_at TIMESTAMP WITH TIME ZONE,
    stopped_at TIMESTAMP WITH TIME ZONE,
    last_heartbeat TIMESTAMP WITH TIME ZONE
);

-- æœåŠ¡æ—¥å¿—è¡¨ (âœ… å·²å®ç°)
CREATE TABLE service_logs (
    id SERIAL PRIMARY KEY,
    service_id INTEGER REFERENCES model_services(id) ON DELETE CASCADE,

    -- æ—¥å¿—ä¿¡æ¯
    log_level VARCHAR(20) NOT NULL,           -- info, warning, error, debug
    message TEXT NOT NULL,                    -- æ—¥å¿—æ¶ˆæ¯
    event_type VARCHAR(50),                   -- create, start, stop, access, error, health_check

    -- ä¸Šä¸‹æ–‡ä¿¡æ¯
    user_id INTEGER REFERENCES users(id),    -- æ“ä½œç”¨æˆ·
    ip_address INET,                          -- æ“ä½œIP
    user_agent TEXT,                          -- ç”¨æˆ·ä»£ç†

    -- å…ƒæ•°æ®
    metadata JSONB,                           -- é¢å¤–çš„æ—¥å¿—æ•°æ®

    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- æœåŠ¡å¥åº·ç›‘æ§è¡¨ (âœ… å·²å®ç°)
CREATE TABLE service_health_checks (
    id SERIAL PRIMARY KEY,
    service_id INTEGER REFERENCES model_services(id) ON DELETE CASCADE,

    -- å¥åº·çŠ¶æ€
    status VARCHAR(50) NOT NULL,              -- healthy, unhealthy, unknown, timeout
    response_time_ms INTEGER,                 -- å“åº”æ—¶é—´(ms)

    -- æ£€æŸ¥è¯¦æƒ…
    check_type VARCHAR(50) DEFAULT 'http',    -- http, tcp, process
    endpoint VARCHAR(500),                    -- æ£€æŸ¥ç«¯ç‚¹
    http_status_code INTEGER,                 -- HTTPçŠ¶æ€ç 

    -- é”™è¯¯ä¿¡æ¯
    error_message TEXT,                       -- é”™è¯¯ä¿¡æ¯
    error_code VARCHAR(50),                   -- é”™è¯¯ä»£ç 

    checked_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);


-- åˆ›å»ºç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ (âœ… å·²å®ç°)
CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_external_user_id ON users(external_user_id);
CREATE INDEX idx_repositories_owner ON repositories(owner_id);
CREATE INDEX idx_repositories_visibility ON repositories(visibility);
CREATE INDEX idx_repositories_tags ON repositories USING GIN(tags);
CREATE INDEX idx_repositories_full_name ON repositories(full_name);
CREATE INDEX idx_repositories_search ON repositories USING GIN(
    to_tsvector('english', name || ' ' || COALESCE(description, '') || ' ' || array_to_string(tags, ' '))
);
CREATE INDEX idx_repository_files_repo ON repository_files(repository_id);
CREATE INDEX idx_repository_files_type ON repository_files(file_type);
CREATE INDEX idx_repository_stars_user ON repository_stars(user_id);
CREATE INDEX idx_repository_stars_repo ON repository_stars(repository_id);
CREATE INDEX idx_user_follows_follower ON user_follows(follower_id);
CREATE INDEX idx_user_follows_following ON user_follows(following_id);
CREATE INDEX idx_classifications_level ON classifications(level);
CREATE INDEX idx_classifications_parent ON classifications(parent_id);
CREATE INDEX idx_file_upload_sessions_session_id ON file_upload_sessions(session_id);

-- æ–‡ä»¶ç¼–è¾‘å’Œç‰ˆæœ¬æ§åˆ¶ç›¸å…³ç´¢å¼• (âœ… å·²å®ç°)
CREATE INDEX idx_file_versions_file_id ON file_versions(file_id);
CREATE INDEX idx_file_versions_version ON file_versions(file_id, version_number DESC);
CREATE INDEX idx_file_versions_author ON file_versions(author_id);
CREATE INDEX idx_file_edit_sessions_file ON file_edit_sessions(file_id, is_active);
CREATE INDEX idx_file_edit_sessions_user ON file_edit_sessions(user_id, is_active);
CREATE INDEX idx_file_edit_sessions_session ON file_edit_sessions(session_id);
CREATE INDEX idx_file_edit_permissions_file ON file_edit_permissions(file_id);
CREATE INDEX idx_file_edit_permissions_user ON file_edit_permissions(user_id);
CREATE INDEX idx_file_templates_category ON file_templates(category);
CREATE INDEX idx_file_templates_extension ON file_templates(file_extension);
CREATE INDEX idx_repository_classifications_repo ON repository_classifications(repository_id);
CREATE INDEX idx_repository_classifications_class ON repository_classifications(classification_id);
CREATE INDEX idx_model_services_repo ON model_services(repository_id);
CREATE INDEX idx_model_services_user ON model_services(user_id);
CREATE INDEX idx_model_services_status ON model_services(status);
CREATE INDEX idx_model_services_model_id ON model_services(model_id);
CREATE INDEX idx_model_services_priority ON model_services(priority);
CREATE INDEX idx_model_services_failure_type ON model_services(failure_type);
CREATE INDEX idx_service_instances_service ON service_instances(service_id);
CREATE INDEX idx_service_instances_container ON service_instances(container_id);
CREATE INDEX idx_service_logs_service ON service_logs(service_id);
CREATE INDEX idx_service_logs_user ON service_logs(user_id);
CREATE INDEX idx_service_logs_event_type ON service_logs(event_type);
CREATE INDEX idx_service_health_checks_service ON service_health_checks(service_id);
```

### å…³é”®ç‰¹æ€§

- **ç”¨æˆ·ç©ºé—´ç®¡ç†**: å®Œæ•´çš„ç”¨æˆ·ç³»ç»Ÿï¼Œæ”¯æŒä¸ªäººç©ºé—´å’Œç¤¾äº¤åŠŸèƒ½
- **å­˜å‚¨é…é¢ç®¡ç†**: ç”¨æˆ·å­˜å‚¨ç©ºé—´ç®¡ç†ï¼Œæ”¯æŒé…é¢æ§åˆ¶å’Œä½¿ç”¨ç»Ÿè®¡
- **ä»“åº“ç‰ˆæœ¬æ§åˆ¶**: ç±»ä¼¼ GitHub çš„ä»“åº“ç®¡ç†ï¼Œæ”¯æŒåˆ†æ”¯å’Œæ–‡ä»¶ç‰ˆæœ¬
- **æ–‡ä»¶å¯¹è±¡å­˜å‚¨**: ä¸ MinIO é›†æˆï¼Œæ”¯æŒå¤§æ–‡ä»¶å’Œåˆ†å—ä¸Šä¼ 
- **YAML å…ƒæ•°æ®**: è‡ªåŠ¨è§£æ README.md ä¸­çš„ frontmatterï¼Œæ„å»ºæœç´¢ç´¢å¼•
- **ç¤¾äº¤åŠŸèƒ½**: æ˜Ÿæ ‡ã€å…³æ³¨ã€è®¿é—®ç»Ÿè®¡ç­‰ç¤¾åŒºåŠŸèƒ½
- **åˆ†ç±»å…¼å®¹**: ä¿æŒåŸæœ‰çš„ä¸‰çº§åˆ†ç±»ä½“ç³»ï¼ŒåŒæ—¶æ”¯æŒæ ‡ç­¾æ£€ç´¢
- **é«˜çº§æœç´¢**: å…¨æ–‡æœç´¢ã€å¤šç»´åº¦ç­›é€‰å’Œæ™ºèƒ½æ¨è
- **æœåŠ¡é›†æˆ**: æ”¯æŒæ¨¡å‹æ¨ç†ã€è®­ç»ƒã€éƒ¨ç½²æœåŠ¡çš„é›†æˆä¸ç›‘æ§ (è®¾è®¡ä¸­)
- **ç‹¬ç«‹æ–‡ä»¶ç®¡ç†**: è·¨ä»“åº“çš„æ–‡ä»¶ç®¡ç†å’Œæ“ä½œåŠŸèƒ½ (è®¾è®¡ä¸­)
- **å…ƒæ•°æ®æ ‡å‡†åŒ–**: å®Œæ•´çš„å…ƒæ•°æ®æ¨¡å¼å®šä¹‰å’ŒéªŒè¯ç³»ç»Ÿ (è®¾è®¡ä¸­)
- **æ€§èƒ½ä¼˜åŒ–**: é’ˆå¯¹ç”¨æˆ·æŸ¥è¯¢ã€æ–‡ä»¶æ£€ç´¢å’Œå…ƒæ•°æ®æœç´¢çš„ç´¢å¼•ä¼˜åŒ–

## ğŸ”Œ API æ¥å£ v2.0

### ğŸ“‹ æ¥å£å®ç°çŠ¶æ€

- âœ… **å·²å®ç°**: æ¥å£å·²åœ¨ backend ä¸­å®Œæ•´å®ç°
- âš ï¸ **å¾…å®ç°**: æ¥å£å·²è®¾è®¡ä½†å°šæœªå®ç°
- ğŸ”„ **éƒ¨åˆ†å®ç°**: æ¥å£æ ¸å¿ƒåŠŸèƒ½å·²å®ç°ï¼Œéƒ¨åˆ†ç»†èŠ‚å¾…å®Œå–„

### è®¤è¯ API

```http
# ç”¨æˆ·è®¤è¯ (âœ… å·²å®ç°)
POST   /api/auth/login                          # ç”¨æˆ·ç™»å½•
POST   /api/auth/logout                         # ç”¨æˆ·ç™»å‡º
POST   /api/auth/refresh                        # åˆ·æ–°è®¿é—®token

# ç”¨æˆ·ä¿¡æ¯ (âœ… å·²å®ç°)
GET    /api/auth/me                             # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
POST   /api/auth/verify                         # éªŒè¯JWT Token
POST   /api/auth/sync                           # åŒæ­¥ç”¨æˆ·ä¿¡æ¯

# æœåŠ¡çŠ¶æ€ (âœ… å·²å®ç°)
GET    /api/auth/health                         # è®¤è¯æœåŠ¡å¥åº·æ£€æŸ¥
```

### ç”¨æˆ·ç®¡ç† API

```http
# ç”¨æˆ·åˆ—è¡¨å’Œåˆ›å»º (âœ… å·²å®ç°)
GET    /api/users                               # è·å–ç”¨æˆ·åˆ—è¡¨
POST   /api/users                               # åˆ›å»ºç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰

# ç”¨æˆ·èµ„æ–™ (âœ… å·²å®ç°)
GET    /api/users/{username}                    # è·å–ç”¨æˆ·èµ„æ–™
PUT    /api/users/{username}                    # æ›´æ–°ç”¨æˆ·èµ„æ–™ï¼ˆéœ€è®¤è¯ï¼‰
GET    /api/users/{username}/repositories       # è·å–ç”¨æˆ·ä»“åº“åˆ—è¡¨
GET    /api/users/{username}/followers          # è·å–ç”¨æˆ·ç²‰ä¸åˆ—è¡¨
GET    /api/users/{username}/following          # è·å–ç”¨æˆ·å…³æ³¨åˆ—è¡¨

# ç”¨æˆ·å…³æ³¨ (âœ… å·²å®ç°)
POST   /api/users/{username}/follow             # å…³æ³¨ç”¨æˆ·
DELETE /api/users/{username}/follow             # å–æ¶ˆå…³æ³¨ç”¨æˆ·

# ç”¨æˆ·ç»Ÿè®¡å’Œå­˜å‚¨ (âœ… å·²å®ç°)
GET    /api/users/{username}/stats              # è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯ (âœ… å·²å®ç°)
GET    /api/users/{username}/starred            # è·å–ç”¨æˆ·æ”¶è—çš„ä»“åº“ (âœ… å·²å®ç°)
GET    /api/users/{username}/storage            # è·å–å­˜å‚¨ä½¿ç”¨æƒ…å†µ (âœ… å·²å®ç°)
```

### ä»“åº“ç®¡ç† API

```http
# ä»“åº“åŸºæœ¬æ“ä½œ (âœ… å·²å®ç°)
GET    /api/repositories                        # æµè§ˆæ‰€æœ‰å…¬å¼€ä»“åº“ (âœ… å·²å®ç°)
POST   /api/repositories                        # åˆ›å»ºä»“åº“ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}              # è·å–ä»“åº“è¯¦æƒ… (âœ… å·²å®ç°)
PUT    /api/{username}/{repo_name}              # æ›´æ–°ä»“åº“ä¿¡æ¯ (âœ… å·²å®ç°)
DELETE /api/{username}/{repo_name}              # åˆ é™¤ä»“åº“ (âœ… å·²å®ç°)

# ä»“åº“è®¾ç½® (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/settings     # è·å–ä»“åº“è®¾ç½® (âœ… å·²å®ç°)
PUT    /api/{username}/{repo_name}/settings     # æ›´æ–°ä»“åº“è®¾ç½® (âœ… å·²å®ç°)

# ä»“åº“åˆ†ç±» (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/classifications    # è·å–ä»“åº“åˆ†ç±»
POST   /api/{username}/{repo_name}/classifications    # æ·»åŠ ä»“åº“åˆ†ç±» (è‡ªåŠ¨å…³è”çˆ¶çº§)
DELETE /api/{username}/{repo_name}/classifications    # ç§»é™¤æ‰€æœ‰ä»“åº“åˆ†ç±»

# ä»“åº“æ–‡ä»¶ç®¡ç† (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/files        # è·å–ä»“åº“æ–‡ä»¶åˆ—è¡¨
GET    /api/{username}/{repo_name}/blob/{file_path} # è·å–æ–‡ä»¶å†…å®¹
GET    /api/{username}/{repo_name}/download/{file_path} # ä¸‹è½½æ–‡ä»¶

# ä»“åº“ç¤¾äº¤åŠŸèƒ½ (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/star         # æ”¶è—ä»“åº“
DELETE /api/{username}/{repo_name}/star         # å–æ¶ˆæ”¶è—ä»“åº“
GET    /api/{username}/{repo_name}/stars        # è·å–æ”¶è—è€…åˆ—è¡¨

# ä»“åº“ç»Ÿè®¡ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/stats        # è·å–ä»“åº“ç»Ÿè®¡ä¿¡æ¯ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/analytics    # è·å–è¯¦ç»†åˆ†ææ•°æ® (âœ… å·²å®ç°)
```

### æ–‡ä»¶ç®¡ç† API

```http
# ä»“åº“æ–‡ä»¶æµè§ˆ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/tree/main             # è·å–æ–‡ä»¶æ ‘ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/tree/main/{path}      # è·å–æŒ‡å®šè·¯å¾„æ–‡ä»¶ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/blob/{file_path}      # è·å–æ–‡ä»¶å†…å®¹ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/files                 # è·å–ä»“åº“æ–‡ä»¶åˆ—è¡¨ (âœ… å·²å®ç°)

# æ–‡ä»¶ä¸Šä¼  (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/upload               # ä¸Šä¼ å•ä¸ªæ–‡ä»¶ (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/upload/batch         # æ‰¹é‡ä¸Šä¼ æ–‡ä»¶ (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/upload/init          # åˆå§‹åŒ–åˆ†å—ä¸Šä¼  (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/upload/{session_id}/chunk/{chunk_number} # ä¸Šä¼ åˆ†ç‰‡ (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/upload/{session_id}/complete # å®Œæˆåˆ†å—ä¸Šä¼  (âœ… å·²å®ç°)
DELETE /api/{username}/{repo_name}/upload/{session_id}  # å–æ¶ˆåˆ†å—ä¸Šä¼  (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/upload/{session_id}/status # è·å–ä¸Šä¼ çŠ¶æ€ (âœ… å·²å®ç°)

# æ–‡ä»¶ä¸‹è½½ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/download/{file_path} # ä¸‹è½½æ–‡ä»¶ (âœ… å·²å®ç°)
GET    /api/files/{file_id}/download                    # é€šè¿‡æ–‡ä»¶IDä¸‹è½½ (âœ… å·²å®ç°)

# ç‹¬ç«‹æ–‡ä»¶ç®¡ç† API (âœ… å·²å®ç°)
GET    /api/files                                       # è·å–æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨ (ç®¡ç†å‘˜) (âœ… å·²å®ç°)
GET    /api/files/{file_id}                             # è·å–æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ (âœ… å·²å®ç°)
PUT    /api/files/{file_id}                             # æ›´æ–°æ–‡ä»¶ä¿¡æ¯ (âœ… å·²å®ç°)
DELETE /api/files/{file_id}                             # åˆ é™¤æ–‡ä»¶ (âœ… å·²å®ç°)
GET    /api/files/{file_id}/stats                       # è·å–æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯ (âœ… å·²å®ç°)
POST   /api/files/{file_id}/move                        # ç§»åŠ¨æ–‡ä»¶ (âœ… å·²å®ç°)
POST   /api/files/{file_id}/copy                        # å¤åˆ¶æ–‡ä»¶ (âœ… å·²å®ç°)
GET    /api/files/search                                # æœç´¢æ–‡ä»¶ (âœ… å·²å®ç°)
```

### ä¸ªäººæ•°æ®ç©ºé—´ API

```http
# ä¸ªäººç©ºé—´ç»Ÿè®¡ (âœ… å·²å®ç°)
GET    /api/personal-files/{username}/stats             # è·å–ä¸ªäººç©ºé—´ç»Ÿè®¡ä¿¡æ¯ (âœ… å·²å®ç°)
GET    /api/personal-files/{username}/browse            # æµè§ˆä¸ªäººç©ºé—´æ–‡ä»¶ (âœ… å·²å®ç°)
GET    /api/personal-files/{username}/search            # æœç´¢ä¸ªäººæ–‡ä»¶ (âœ… å·²å®ç°)

# æ–‡ä»¶å¤¹ç®¡ç† (âœ… å·²å®ç°)
POST   /api/personal-files/{username}/folders           # åˆ›å»ºæ–‡ä»¶å¤¹ (âœ… å·²å®ç°)

# æ–‡ä»¶ä¸Šä¼ ä¸ç®¡ç† (âœ… å·²å®ç°)
POST   /api/personal-files/{username}/upload-url        # è·å–ä¸Šä¼ URL (âœ… å·²å®ç°)
POST   /api/personal-files/{username}/complete-upload   # å®Œæˆæ–‡ä»¶ä¸Šä¼  (âœ… å·²å®ç°)
GET    /api/personal-files/files/{file_id}              # è·å–æ–‡ä»¶ä¿¡æ¯ (âœ… å·²å®ç°)
GET    /api/personal-files/files/{file_id}/download     # ä¸‹è½½ä¸ªäººæ–‡ä»¶ (âœ… å·²å®ç°)
DELETE /api/personal-files/files/{file_id}              # åˆ é™¤ä¸ªäººæ–‡ä»¶ (âœ… å·²å®ç°)
```

### æ–‡ä»¶ç¼–è¾‘å’Œç‰ˆæœ¬æ§åˆ¶ API

```http
# æ–‡ä»¶ç¼–è¾‘å™¨æ ¸å¿ƒ API (âœ… å·²å®ç°)
GET    /api/file-editor/files/{file_id}/versions              # è·å–æ–‡ä»¶ç‰ˆæœ¬å†å² (âœ… å·²å®ç°)
GET    /api/file-editor/files/{file_id}/versions/{version_id}/content # è·å–æŒ‡å®šç‰ˆæœ¬å†…å®¹ (âœ… å·²å®ç°)
POST   /api/file-editor/files/{file_id}/versions              # åˆ›å»ºæ–°ç‰ˆæœ¬ (âœ… å·²å®ç°)
GET    /api/file-editor/files/{file_id}/versions/{old_version_id}/diff/{new_version_id} # è·å–ç‰ˆæœ¬å·®å¼‚ (âœ… å·²å®ç°)
DELETE /api/editor/{username}/{repo_name}/file/{file_path}     # åˆ é™¤æ–‡ä»¶ (âš ï¸ å¾…å®ç°)

# ç¼–è¾‘ä¼šè¯ç®¡ç† API (âœ… å·²å®ç°)
POST   /api/file-editor/files/{file_id}/edit-session          # åˆ›å»ºç¼–è¾‘ä¼šè¯ (âœ… å·²å®ç°)
PUT    /api/file-editor/edit-sessions/{session_id}           # æ›´æ–°ç¼–è¾‘ä¼šè¯å†…å®¹ (âœ… å·²å®ç°)
GET    /api/file-editor/files/{file_id}/collaboration        # è·å–æ–‡ä»¶åä½œçŠ¶æ€ (âœ… å·²å®ç°)
DELETE /api/file-editor/edit-sessions/{session_id}         # å…³é—­ç¼–è¾‘ä¼šè¯ (âœ… å·²å®ç°)

# æƒé™ç®¡ç† API (âœ… å·²å®ç°)
POST   /api/file-editor/files/{file_id}/permissions           # æˆäºˆæ–‡ä»¶æƒé™ (âœ… å·²å®ç°)
GET    /api/file-editor/files/{file_id}/permissions/check     # æ£€æŸ¥æ–‡ä»¶æƒé™ (âœ… å·²å®ç°)

# è‰ç¨¿ç®¡ç† API (âœ… å·²å®ç°)
POST   /api/file-editor/files/{file_id}/drafts                 # ä¿å­˜æ–‡ä»¶è‰ç¨¿ (âœ… å·²å®ç°)
GET    /api/file-editor/files/{file_id}/drafts                 # è·å–æ–‡ä»¶è‰ç¨¿ (âœ… å·²å®ç°)
PUT    /api/file-editor/drafts/{draft_id}                      # æ›´æ–°æ–‡ä»¶è‰ç¨¿ (âœ… å·²å®ç°)
DELETE /api/file-editor/drafts/{draft_id}                      # åˆ é™¤æ–‡ä»¶è‰ç¨¿ (âœ… å·²å®ç°)
GET    /api/file-editor/drafts                                 # è·å–ç”¨æˆ·æ‰€æœ‰è‰ç¨¿ (âœ… å·²å®ç°)

# æ¨¡æ¿ç®¡ç† API (âœ… å·²å®ç°)
GET    /api/file-editor/templates                              # è·å–æ–‡ä»¶æ¨¡æ¿åˆ—è¡¨ (âœ… å·²å®ç°)
POST   /api/file-editor/templates                              # åˆ›å»ºæ–‡ä»¶æ¨¡æ¿ (âœ… å·²å®ç°)

# æ‰¹é‡æ“ä½œ API (âš ï¸ å¾…å®ç°)
POST   /api/editor/{username}/{repo_name}/batch/commit          # æ‰¹é‡æäº¤å¤šä¸ªæ–‡ä»¶ (âš ï¸ å¾…å®ç°)
GET    /api/editor/{username}/{repo_name}/tree/edit             # è·å–å¯ç¼–è¾‘æ–‡ä»¶æ ‘ (âš ï¸ å¾…å®ç°)

# æ–‡ä»¶æ¨¡æ¿ API (âœ… å·²å®ç°)
GET    /api/editor/templates                                    # è·å–æ–‡ä»¶æ¨¡æ¿åˆ—è¡¨ (âœ… å·²å®ç°)
POST   /api/editor/{username}/{repo_name}/file/from-template    # ä»æ¨¡æ¿åˆ›å»ºæ–‡ä»¶ (âœ… å·²å®ç°)

# ä»“åº“çº§åˆ« API æ‰©å±• (âš ï¸ å¾…å®ç°)
GET    /api/{username}/{repo_name}/commits                      # è·å–ä»“åº“æäº¤å†å² (âš ï¸ å¾…å®ç°)
GET    /api/{username}/{repo_name}/commit/{commit_id}           # è·å–ç‰¹å®šæäº¤è¯¦æƒ… (âš ï¸ å¾…å®ç°)
GET    /api/{username}/{repo_name}/stats/edits                  # è·å–ç¼–è¾‘ç»Ÿè®¡ (âš ï¸ å¾…å®ç°)
```

### ç¤¾åŒºåŠŸèƒ½ API

```http
# æ”¶è—åŠŸèƒ½ (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/star         # æ”¶è—ä»“åº“
DELETE /api/{username}/{repo_name}/star         # å–æ¶ˆæ”¶è—
GET    /api/{username}/{repo_name}/stars        # è·å–æ”¶è—è€…åˆ—è¡¨

# è®¿é—®ç»Ÿè®¡ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/views        # è·å–è®¿é—®ç»Ÿè®¡ (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/view         # è®°å½•è®¿é—®ï¼ˆè‡ªåŠ¨è°ƒç”¨ï¼‰(âœ… å·²å®ç°)
```

### å…ƒæ•°æ® API

```http
# YAMLå…ƒæ•°æ®ç®¡ç† (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/metadata           # è·å–YAMLå…ƒæ•°æ® (âœ… å·²å®ç°)
PUT    /api/{username}/{repo_name}/metadata           # æ›´æ–°å…ƒæ•°æ® (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/parse-readme       # è§£æREADME.mdå…ƒæ•°æ® (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/model-card         # è·å–Model Card (âœ… å·²å®ç°)

# å…ƒæ•°æ®å­—æ®µç®¡ç† (âœ… å·²å®ç°)
GET    /api/metadata/schema                           # è·å–å…ƒæ•°æ®æ¨¡å¼å®šä¹‰ (âœ… å·²å®ç°)
POST   /api/metadata/validate                         # éªŒè¯å…ƒæ•°æ®æ ¼å¼ (âœ… å·²å®ç°)
GET    /api/metadata/templates                        # è·å–å…ƒæ•°æ®æ¨¡æ¿ (âœ… å·²å®ç°)
POST   /api/metadata/templates                        # åˆ›å»ºå…ƒæ•°æ®æ¨¡æ¿ (âœ… å·²å®ç°)

# å…ƒæ•°æ®æœç´¢ (âœ… å·²å®ç°)
GET    /api/metadata/search                           # æœç´¢å…ƒæ•°æ® (âœ… å·²å®ç°)
GET    /api/metadata/stats                            # å…ƒæ•°æ®ç»Ÿè®¡ä¿¡æ¯ (âœ… å·²å®ç°)
```

### åˆ†ç±»ç®¡ç† API (ä¿æŒå…¼å®¹)

```http
# åˆ†ç±»æŸ¥è¯¢ (âœ… å·²å®ç°)
GET    /api/classifications/tree                # è·å–åˆ†ç±»æ ‘ç»“æ„
GET    /api/classifications                     # è·å–åˆ†ç±»åˆ—è¡¨
GET    /api/classifications/{id}                # è·å–åˆ†ç±»è¯¦æƒ…
GET    /api/classifications/{id}/children       # è·å–å­åˆ†ç±»
GET    /api/classifications/{id}/path           # è·å–åˆ†ç±»è·¯å¾„

# åˆ†ç±»ç®¡ç† (âœ… å·²å®ç°)
POST   /api/classifications                     # åˆ›å»ºåˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰
PUT    /api/classifications/{id}                # æ›´æ–°åˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰
DELETE /api/classifications/{id}                # åˆ é™¤åˆ†ç±»ï¼ˆç®¡ç†å‘˜ï¼‰
```

### æœç´¢å’Œå‘ç° API

```http
# æœç´¢åŠŸèƒ½ (âœ… å·²å®ç°)
GET    /api/search/repositories                 # æœç´¢ä»“åº“
GET    /api/search/users                        # æœç´¢ç”¨æˆ·
GET    /api/search/suggestions                  # æœç´¢å»ºè®®
GET    /api/search/stats                        # æœç´¢ç»Ÿè®¡

# å‘ç°åŠŸèƒ½ (âœ… å·²å®ç°)
GET    /api/search/trending                     # çƒ­é—¨ä»“åº“ (âœ… å·²å®ç°)
GET    /api/trending                            # çƒ­é—¨ä»“åº“ (âœ… å·²å®ç°)
GET    /api/featured                            # æ¨èä»“åº“ (âœ… å·²å®ç°)
GET    /api/recent                              # æœ€æ–°ä»“åº“ (âœ… å·²å®ç°)
GET    /api/popular                             # å—æ¬¢è¿ä»“åº“ (âœ… å·²å®ç°)
```

### é€šçŸ¥ç³»ç»Ÿ API

```http
# é€šçŸ¥ç®¡ç† (âš ï¸ å¾…å®ç°)
GET    /api/notifications                               # è·å–é€šçŸ¥åˆ—è¡¨
POST   /api/notifications/{id}/read                     # æ ‡è®°é€šçŸ¥ä¸ºå·²è¯»
GET    /api/notifications/unread-count                  # è·å–æœªè¯»é€šçŸ¥æ•°é‡
DELETE /api/notifications/{id}                          # åˆ é™¤é€šçŸ¥
POST   /api/notifications/read-all                      # æ ‡è®°æ‰€æœ‰é€šçŸ¥ä¸ºå·²è¯»
```

### è¯„è®ºç³»ç»Ÿ API

```http
# è¯„è®ºç®¡ç† (âš ï¸ å¾…å®ç°)
GET    /api/comments                                    # è·å–è¯„è®ºåˆ—è¡¨
POST   /api/comments                                    # åˆ›å»ºè¯„è®º
PUT    /api/comments/{id}                               # æ›´æ–°è¯„è®º
DELETE /api/comments/{id}                               # åˆ é™¤è¯„è®º
POST   /api/comments/{id}/like                          # ç‚¹èµè¯„è®º
DELETE /api/comments/{id}/like                          # å–æ¶ˆç‚¹èµè¯„è®º
```

### æ´»åŠ¨åŠ¨æ€ API

```http
# æ´»åŠ¨ç®¡ç† (âš ï¸ å¾…å®ç°)
GET    /api/activities                                  # è·å–æ´»åŠ¨åŠ¨æ€åˆ—è¡¨
GET    /api/activities/{user_id}                        # è·å–ç”¨æˆ·æ´»åŠ¨åŠ¨æ€
```

### æ¨¡å‹æœåŠ¡ç®¡ç† API

```http
# æœåŠ¡CRUDæ“ä½œ (âœ… å·²å®ç°)
GET    /api/{username}/{repo_name}/services             # è·å–ä»“åº“æœåŠ¡åˆ—è¡¨ï¼Œæ”¯æŒè‡ªåŠ¨å¯åŠ¨
POST   /api/{username}/{repo_name}/services             # åˆ›å»ºæ¨¡å‹æœåŠ¡
GET    /api/services/{service_id}                       # è·å–æœåŠ¡è¯¦æƒ…
PUT    /api/services/{service_id}                       # æ›´æ–°æœåŠ¡é…ç½®
DELETE /api/services/{service_id}                       # åˆ é™¤æœåŠ¡

# æœåŠ¡ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ (âœ… å·²å®ç°)
POST   /api/services/{service_id}/start                 # å¯åŠ¨æœåŠ¡ï¼ˆæ”¯æŒå¼ºåˆ¶é‡å¯ï¼‰
POST   /api/services/{service_id}/stop                  # åœæ­¢æœåŠ¡ï¼ˆæ”¯æŒå¼ºåˆ¶åœæ­¢ï¼‰
POST   /api/services/{service_id}/restart               # é‡å¯æœåŠ¡
GET    /api/services/{service_id}/status                # è·å–æœåŠ¡çŠ¶æ€å’Œèµ„æºä½¿ç”¨æƒ…å†µ
GET    /api/services/{service_id}/logs                  # è·å–æœåŠ¡æ—¥å¿—ï¼ˆæ”¯æŒçº§åˆ«å’Œäº‹ä»¶ç±»å‹ç­›é€‰ï¼‰

# æœåŠ¡è®¿é—®ç®¡ç† (âœ… å·²å®ç°)
GET    /api/services/{service_id}/demo                  # è®¿é—®Gradioç•Œé¢ï¼ˆè‡ªåŠ¨é‡å®šå‘ï¼‰
POST   /api/services/{service_id}/access-token          # é‡æ–°ç”Ÿæˆè®¿é—®ä»¤ç‰Œ
PUT    /api/services/{service_id}/visibility            # æ›´æ–°æœåŠ¡å¯è§æ€§

# æœåŠ¡ç›‘æ§å’Œå¥åº·æ£€æŸ¥ (âœ… å·²å®ç°)
GET    /api/services/{service_id}/health                # è·å–æœåŠ¡å¥åº·æ£€æŸ¥å†å²
POST   /api/services/{service_id}/health-check          # æ‰‹åŠ¨è§¦å‘å¥åº·æ£€æŸ¥
GET    /api/services/{service_id}/metrics               # è·å–æœåŠ¡æ€§èƒ½æŒ‡æ ‡
GET    /api/services/{service_id}/resource-usage        # è·å–å®æ—¶èµ„æºä½¿ç”¨æƒ…å†µ

# æ‰¹é‡æ“ä½œ (âœ… å·²å®ç°)
POST   /api/{username}/{repo_name}/services/batch/start # æ‰¹é‡å¯åŠ¨æœåŠ¡ï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰
POST   /api/{username}/{repo_name}/services/batch/stop  # æ‰¹é‡åœæ­¢æœåŠ¡ï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰
DELETE /api/{username}/{repo_name}/services/batch       # æ‰¹é‡åˆ é™¤æœåŠ¡ï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰

# ç³»ç»Ÿç®¡ç†å’Œç›‘æ§ (âœ… å·²å®ç°)
GET    /api/admin/services/statistics                   # è·å–ç³»ç»Ÿèµ„æºå’ŒæœåŠ¡ç»Ÿè®¡ä¿¡æ¯
GET    /api/admin/services/overview                     # è·å–æœåŠ¡æ¦‚è§ˆä¿¡æ¯
POST   /api/admin/services/maintenance                  # æ‰§è¡Œç³»ç»Ÿç»´æŠ¤ä»»åŠ¡
GET    /api/services/health-summary                     # è·å–æœåŠ¡å¥åº·çŠ¶æ€æ‘˜è¦
POST   /api/services/cleanup-idle                       # æ‰‹åŠ¨è§¦å‘ç©ºé—²æœåŠ¡æ¸…ç†
```

### ç³»ç»Ÿç®¡ç† API

```http
# ç®¡ç†å‘˜ä»ªè¡¨æ¿ (âœ… å·²å®ç°)
GET    /api/admin/dashboard                     # ç®¡ç†å‘˜ä»ªè¡¨æ¿æ•°æ®
GET    /api/admin/users                         # ç”¨æˆ·ç®¡ç†åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ã€ç­›é€‰ï¼‰
PUT    /api/admin/users/{user_id}/status        # æ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆæ¿€æ´»/éªŒè¯/ç®¡ç†å‘˜æƒé™ï¼‰

# ä»“åº“ç®¡ç† (âœ… å·²å®ç°)
GET    /api/admin/repositories                  # ç®¡ç†å‘˜ä»“åº“åˆ—è¡¨ï¼ˆåŒ…æ‹¬è½¯åˆ é™¤ï¼Œé«˜çº§æœç´¢ï¼‰
PUT    /api/admin/repositories/{repository_id}/status # æ›´æ–°ä»“åº“çŠ¶æ€ï¼ˆæ¿€æ´»/æ¨è/å¯è§æ€§ï¼‰
POST   /api/admin/repositories/{repository_id}/restore # æ¢å¤è½¯åˆ é™¤çš„ä»“åº“
DELETE /api/admin/repositories/{repository_id}/hard-delete # æ°¸ä¹…åˆ é™¤ä»“åº“ï¼ˆç¡¬åˆ é™¤ï¼‰
GET    /api/admin/repositories/stats            # ä»“åº“ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ¦‚è§ˆã€ç±»å‹åˆ†å¸ƒã€çƒ­é—¨æ’è¡Œï¼‰

# å­˜å‚¨ç®¡ç† (âœ… å·²å®ç°)
GET    /api/admin/storage/stats                 # å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯ï¼ˆç”¨æˆ·å­˜å‚¨ã€æ–‡ä»¶ç±»å‹ã€MinIOæ¡¶ä½¿ç”¨ï¼‰
POST   /api/admin/storage/cleanup               # å­˜å‚¨æ¸…ç†ï¼ˆè¿‡æœŸä¼šè¯ã€å­¤å„¿æ–‡ä»¶ï¼‰

# ç³»ç»Ÿç›‘æ§ (âœ… å·²å®ç°)
GET    /api/admin/system/health                 # ç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼ˆæ•°æ®åº“ã€MinIOã€ç£ç›˜ç©ºé—´ï¼‰
GET    /api/admin/logs                          # è·å–ç³»ç»Ÿæ—¥å¿—ï¼ˆçº§åˆ«ç­›é€‰ã€åˆ†é¡µæŸ¥çœ‹ï¼‰

# ç³»ç»Ÿé…ç½® (âœ… å·²å®ç°)
GET    /api/system/config                       # è·å–ç³»ç»Ÿé…ç½® (âœ… å·²å®ç°)
PUT    /api/system/config                       # æ›´æ–°ç³»ç»Ÿé…ç½® (âœ… å·²å®ç°)
GET    /api/system/health                       # ç³»ç»Ÿå¥åº·æ£€æŸ¥ (âœ… å·²å®ç°)
GET    /api/system/info                         # è·å–ç³»ç»Ÿä¿¡æ¯ (âœ… å·²å®ç°)
POST   /api/system/maintenance                  # åˆ‡æ¢ç»´æŠ¤æ¨¡å¼ (âœ… å·²å®ç°)
POST   /api/system/restart                      # é‡å¯ç³»ç»Ÿç»„ä»¶ (âœ… å·²å®ç°)
```

## å‰ç«¯

### ğŸ–¥ï¸ é¡µé¢æ¶æ„ (SvelteKit)

#### æ ¸å¿ƒé¡µé¢

- **ä¸»é¡µ** (`/`) - å±•ç¤ºä»“åº“åˆ—è¡¨å’Œåˆ†ç±»ç­›é€‰ (âœ… å·²å®ç°)
  - ä½¿ç”¨ API: `GET /api/repositories`, `GET /api/classifications`
  - ç»„ä»¶: `RepositoryCard`, `ClassificationFilter`, `SearchBar`
- **ç”¨æˆ·ä¸»é¡µ** (`/{username}`) - ç”¨æˆ·ä¸ªäººç©ºé—´ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/users/{username}`, `GET /api/users/{username}/repositories`, `GET /api/users/{username}/storage`, `GET /api/personal-files/{username}/stats`
  - ç»„ä»¶: `UserProfile`, `RepositoryCard`, `UserAvatar`, `PersonalFileManager`, `PersonalFileUpload`
  - åŠŸèƒ½: ç”¨æˆ·ä¿¡æ¯å±•ç¤ºã€ä»“åº“åˆ—è¡¨ã€å…³æ³¨åŠŸèƒ½ã€å­˜å‚¨ç©ºé—´ç®¡ç†ã€**ä¸ªäººæ•°æ®ç©ºé—´** (âœ… å·²å®ç°)
  - **ä¸ªäººæ•°æ®ç©ºé—´åŠŸèƒ½**: æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€æ–‡ä»¶å¤¹åˆ›å»ºç®¡ç†ã€å…¬å¼€/ç§æœ‰è®¾ç½®ã€æ–‡ä»¶åˆ é™¤ã€ä¸Šä¼ è¿›åº¦è·Ÿè¸ª

- **ä»“åº“é¡µé¢** (`/{username}/{repository}`) - ä»“åº“è¯¦æƒ…å±•ç¤º (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/{username}/{repository}`, `GET /api/{username}/{repository}/files`, `GET /api/{username}/{repository}/analytics`
  - ç»„ä»¶: `RepositoryHeader`, `FileTree`, `ReadmeViewer`, `RepositoryStats`

- **æ–‡ä»¶ä¸Šä¼ é¡µé¢** (`/{username}/{repository}/upload`) - æ–‡ä»¶ä¸Šä¼ ç•Œé¢ (âœ… å·²å®ç°)
  - ä½¿ç”¨ API: `POST /api/{username}/{repository}/upload`
  - ç»„ä»¶: `FileUpload`, `FileManager`
  - åŠŸèƒ½: å¤šæ–‡ä»¶ä¸Šä¼ ã€ä¸Šä¼ è¿›åº¦æ˜¾ç¤ºã€æ–‡ä»¶æ‹–æ‹½ä¸Šä¼ 

#### åŠŸèƒ½é¡µé¢

- **ç™»å½•é¡µé¢** (`/login`) - ç”¨æˆ·ç™»å½• (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `POST /api/auth/login`
  - ç»„ä»¶: `Button`, `Input`, `FormField`

- **æ³¨å†Œé¡µé¢** (`/register`) - ç”¨æˆ·æ³¨å†Œ (ğŸ”„ éƒ¨åˆ†å®ç°)

  - ä½¿ç”¨ API: `POST /api/auth/register` (âš ï¸ æ³¨æ„ï¼šAPI åœ¨ backend æœªå®ç°)
  - ç»„ä»¶: `Button`, `Input`, `FormField`

- **æ–°å»ºä»“åº“é¡µé¢** (`/new`) - åˆ›å»ºæ–°ä»“åº“ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `POST /api/repositories`, `GET /api/classifications`
  - ç»„ä»¶: `Button`, `Input`, `Dropdown`, `ClassificationFilter`

- **æœç´¢é¡µé¢** (`/search`) - æœç´¢ä»“åº“å’Œç”¨æˆ· (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/search/repositories`, `GET /api/search/users`
  - ç»„ä»¶: `SearchBar`, `RepositoryCard`, `UserProfile`, `Pagination`

- **è¶‹åŠ¿é¡µé¢** (`/trending`) - å±•ç¤ºçƒ­é—¨ä»“åº“ (âœ… å·²å®ç°)
  - ä½¿ç”¨ API: `GET /api/search/trending`
  - ç»„ä»¶: `RepositoryCard`, `CategoryFilter`

#### æ–‡ä»¶ç¼–è¾‘ä¸ç‰ˆæœ¬æ§åˆ¶é¡µé¢ (âœ… å·²å®ç°)

- **æ–‡ä»¶ç¼–è¾‘é¡µé¢** (`/{username}/{repository}/edit/{file_path}`) - åœ¨çº¿æ–‡ä»¶ç¼–è¾‘å™¨ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/versions/{version_id}/content`, `POST /api/file-editor/files/{file_id}/versions`
  - ç»„ä»¶: `FileEditor`, `EditorToolbar`, `EditorStatusBar`, `EditorSidebar`
  - åŠŸèƒ½: CodeMirror 6 ç¼–è¾‘å™¨ã€è¯­æ³•é«˜äº®ã€è‡ªåŠ¨ä¿å­˜ã€ç‰ˆæœ¬æäº¤ã€åä½œçŠ¶æ€

- **æ–‡ä»¶æŸ¥çœ‹é¡µé¢** (`/{username}/{repository}/blob/{file_path}`) - æ–‡ä»¶å†…å®¹æŸ¥çœ‹ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/files/{username}/{repository}/blob/{file_path}`
  - ç»„ä»¶: `FileViewer`, `SyntaxHighlighter`, `FileActions`
  - åŠŸèƒ½: è¯­æ³•é«˜äº®ã€ç‰ˆæœ¬åˆ‡æ¢ã€ä¸‹è½½ã€ç¼–è¾‘è·³è½¬

- **æ–‡ä»¶å†å²é¡µé¢** (`/{username}/{repository}/commits/{file_path}`) - æ–‡ä»¶ç‰ˆæœ¬å†å² (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/versions`
  - ç»„ä»¶: `VersionHistory`, `VersionDiff`
  - åŠŸèƒ½: ç‰ˆæœ¬åˆ—è¡¨ã€ç‰ˆæœ¬æ¯”è¾ƒã€å›æ»šæ“ä½œã€å·®å¼‚å¯¹æ¯”

- **è‰ç¨¿ç®¡ç†é¡µé¢** (`/{username}/{repository}/drafts`) - è‰ç¨¿ç®¡ç†ä¸­å¿ƒ (âœ… å·²å®ç°)
  - ä½¿ç”¨ API: `GET /api/repositories/{username}/{repository}/drafts`
  - ç»„ä»¶: `DraftManager`, `DraftRecovery`, `DraftAutoSaver`
  - åŠŸèƒ½: è‰ç¨¿åˆ—è¡¨ã€æ¢å¤ç¼–è¾‘ã€æ‰¹é‡ç®¡ç†ã€è‡ªåŠ¨ä¿å­˜

#### ç®¡ç†å‘˜é¡µé¢ âœ… å·²å®ç°

- **ç®¡ç†å‘˜å…¥å£é¡µé¢** (`/admin`) - ç®¡ç†å‘˜è®¿é—®æ§åˆ¶å’Œé‡å®šå‘ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/auth/me`
  - ç»„ä»¶: `AdminHeader`, `AdminSidebar`

- **ç®¡ç†å‘˜ä»ªè¡¨æ¿** (`/admin/dashboard`) - ç³»ç»Ÿæ¦‚è§ˆå’Œç»Ÿè®¡ä¿¡æ¯ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/admin/dashboard`, `GET /api/admin/system/health`
  - ç»„ä»¶: `DashboardCard`, `SystemHealthCard`, `AdminSidebar`

- **ç”¨æˆ·ç®¡ç†é¡µé¢** (`/admin/users`) - ç”¨æˆ·åˆ—è¡¨ã€æœç´¢ã€çŠ¶æ€ç®¡ç† (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/admin/users`, `PUT /api/admin/users/{user_id}/status`
  - ç»„ä»¶: `SearchBar`, `Pagination`, `Modal`

- **ä»“åº“ç®¡ç†é¡µé¢** (`/admin/repositories`) - ä»“åº“åˆ—è¡¨ã€çŠ¶æ€ç®¡ç†ã€è½¯åˆ é™¤æ¢å¤ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/admin/repositories`, `PUT /api/admin/repositories/{repository_id}/status`, `POST /api/admin/repositories/{repository_id}/restore`, `DELETE /api/admin/repositories/{repository_id}/hard-delete`, `GET /api/admin/repositories/stats`
  - ç»„ä»¶: `RepositoryCard`, `Modal`, `Alert`

- **å­˜å‚¨ç®¡ç†é¡µé¢** (`/admin/storage`) - å­˜å‚¨ç»Ÿè®¡ã€æ¸…ç†å·¥å…· (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/admin/storage/stats`, `POST /api/admin/storage/cleanup`
  - ç»„ä»¶: `StorageMonitor`, `DashboardCard`, `Button`

- **ç³»ç»Ÿç›‘æ§é¡µé¢** (`/admin/system`) - å¥åº·æ£€æŸ¥ã€æ—¥å¿—æŸ¥çœ‹ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/admin/system/health`, `GET /api/admin/logs`, `GET /api/system/info`
  - ç»„ä»¶: `SystemHealthCard`, `LogViewer`, `Alert`

- **è®¾ç½®ç®¡ç†é¡µé¢** (`/admin/settings`) - ç³»ç»Ÿé…ç½®ç®¡ç† (âœ… å·²å®ç°)
  - ä½¿ç”¨ API: `GET /api/system/config`, `PUT /api/system/config`, `GET /api/system/info`, `POST /api/system/maintenance`
  - ç»„ä»¶: `FormField`, `Input`, `Button`, `Alert`

### ğŸ§© ç»„ä»¶ç³»ç»Ÿ

#### å¸ƒå±€ç»„ä»¶

- **Header.svelte** - é¡¶éƒ¨å¯¼èˆªæ  (âœ… å·²å®ç°)

  - åŠŸèƒ½: å¯¼èˆªèœå•ã€ç”¨æˆ·ç™»å½•çŠ¶æ€ã€æœç´¢æ¡†
  - ä½¿ç”¨ API: `GET /api/auth/me`

- **Footer.svelte** - åº•éƒ¨ä¿¡æ¯æ  (âœ… å·²å®ç°)
  - åŠŸèƒ½: ç‰ˆæƒä¿¡æ¯ã€é“¾æ¥ã€ç»Ÿè®¡æ•°æ®

#### ç”¨æˆ·ç›¸å…³ç»„ä»¶

- **UserProfile.svelte** - ç”¨æˆ·èµ„æ–™å±•ç¤º (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/users/{username}`, `GET /api/users/{username}/stats`, `GET /api/users/{username}/storage`
  - åŠŸèƒ½: ç”¨æˆ·ä¿¡æ¯ã€å…³æ³¨/å–æ¶ˆå…³æ³¨ã€ç»Ÿè®¡æ•°æ®ã€å­˜å‚¨ä½¿ç”¨æƒ…å†µ

- **UserAvatar.svelte** - ç”¨æˆ·å¤´åƒ (âœ… å·²å®ç°)
  - åŠŸèƒ½: å¤´åƒå±•ç¤ºã€é»˜è®¤å¤´åƒç”Ÿæˆ

#### ä»“åº“ç›¸å…³ç»„ä»¶

- **RepositoryCard.svelte** - ä»“åº“å¡ç‰‡ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `POST /api/{username}/{repository}/star`, `DELETE /api/{username}/{repository}/star`
  - åŠŸèƒ½: ä»“åº“ä¿¡æ¯å±•ç¤ºã€ç‚¹èµ/å–æ¶ˆç‚¹èµ

- **RepositoryHeader.svelte** - ä»“åº“å¤´éƒ¨ (âœ… å·²å®ç°)

  - åŠŸèƒ½: ä»“åº“åç§°ã€æè¿°ã€ç»Ÿè®¡ä¿¡æ¯ã€æ“ä½œæŒ‰é’®

- **RepositoryStats.svelte** - ä»“åº“ç»Ÿè®¡ (âœ… å·²å®ç°)

  - åŠŸèƒ½: ç‚¹èµæ•°ã€ä¸‹è½½æ•°ã€è§‚çœ‹æ•°ã€Fork æ•°

- **RepositoryTabs.svelte** - ä»“åº“é€‰é¡¹å¡ (âœ… å·²å®ç°)
  - åŠŸèƒ½: æ–‡ä»¶ã€READMEã€è®¾ç½®ç­‰é€‰é¡¹å¡åˆ‡æ¢

#### æ–‡ä»¶ç®¡ç†ç»„ä»¶

- **FileTree.svelte** - æ–‡ä»¶æµè§ˆå™¨ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/{username}/{repository}/tree/main`
  - åŠŸèƒ½: æ–‡ä»¶ç›®å½•æ ‘å±•ç¤ºã€æ–‡ä»¶ä¸‹è½½

- **FileUpload.svelte** - æ–‡ä»¶ä¸Šä¼  (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `POST /api/{username}/{repository}/upload`
  - åŠŸèƒ½: æ‹–æ‹½ä¸Šä¼ ã€è¿›åº¦æ˜¾ç¤ºã€æ–‡ä»¶é¢„è§ˆã€å¤šæ–‡ä»¶ä¸Šä¼ ã€ä¸Šä¼ çŠ¶æ€ç®¡ç†

- **FileManager.svelte** - æ–‡ä»¶ç®¡ç†å™¨ (âœ… å·²å®ç°)

  - åŠŸèƒ½: æ–‡ä»¶æ‰¹é‡æ“ä½œã€æ–‡ä»¶å¤¹ç®¡ç†ã€æ–‡ä»¶ä¸‹è½½ã€æ–‡ä»¶åˆ é™¤

#### ä¸ªäººæ•°æ®ç©ºé—´ç»„ä»¶

- **PersonalFileManager.svelte** - ä¸ªäººæ–‡ä»¶ç®¡ç†å™¨ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/personal-files/{username}/browse`, `DELETE /api/personal-files/files/{file_id}`, `PUT /api/personal-files/{username}/folders/{folder_id}`
  - åŠŸèƒ½: ä¸ªäººæ–‡ä»¶æµè§ˆã€æ–‡ä»¶å¤¹ç®¡ç†ã€æ–‡ä»¶åˆ é™¤ã€æ–‡ä»¶ä¸‹è½½ã€å…¬å¼€/ç§æœ‰è®¾ç½®

- **PersonalFileUpload.svelte** - ä¸ªäººæ–‡ä»¶ä¸Šä¼  (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `POST /api/personal-files/{username}/upload-url`, `POST /api/personal-files/{username}/complete-upload`
  - åŠŸèƒ½: ä¸ªäººæ–‡ä»¶ä¸Šä¼ ã€æ–‡ä»¶å¤¹é€‰æ‹©ã€ä¸Šä¼ è¿›åº¦è·Ÿè¸ªã€ä¸Šä¼ å®Œæˆæç¤º

- **ReadmeViewer.svelte** - README æŸ¥çœ‹å™¨ (âœ… å·²å®ç°)
  - åŠŸèƒ½: Markdown æ¸²æŸ“ã€YAML frontmatter å±•ç¤º

#### æœç´¢å’Œåˆ†ç±»ç»„ä»¶

- **SearchBar.svelte** - æœç´¢æ  (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/search/repositories`, `GET /api/search/users`
  - åŠŸèƒ½: å®æ—¶æœç´¢ã€æœç´¢å»ºè®®ã€æœç´¢å†å²

- **ClassificationFilter.svelte** - åˆ†ç±»ç­›é€‰å™¨ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/classifications`
  - åŠŸèƒ½: ä¸‰çº§åˆ†ç±»ç­›é€‰ã€åˆ†ç±»æ ‘å±•ç¤º

- **CategoryFilter.svelte** - åˆ†ç±»ç­›é€‰å™¨ (âœ… å·²å®ç°)
  - åŠŸèƒ½: å¿«é€Ÿåˆ†ç±»ç­›é€‰ã€æ ‡ç­¾ç®¡ç†

#### ç¤¾äº¤å’Œé€šçŸ¥ç»„ä»¶

- **SocialButton.svelte** - ç¤¾äº¤æŒ‰é’® (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `POST /api/users/{username}/follow`, `DELETE /api/users/{username}/follow`
  - åŠŸèƒ½: å…³æ³¨/å–æ¶ˆå…³æ³¨ã€ç‚¹èµ/å–æ¶ˆç‚¹èµ

- **NotificationCenter.svelte** - é€šçŸ¥ä¸­å¿ƒ (âš ï¸ å¾…å®ç°)

  - ä½¿ç”¨ API: `GET /api/notifications`, `POST /api/notifications/{id}/read` (âš ï¸ API æœªå®ç°)
  - åŠŸèƒ½: é€šçŸ¥åˆ—è¡¨ã€æ ‡è®°å·²è¯»ã€é€šçŸ¥åˆ é™¤

- **NotificationTrigger.svelte** - é€šçŸ¥è§¦å‘å™¨ (âš ï¸ å¾…å®ç°)

  - ä½¿ç”¨ API: `GET /api/notifications/unread-count` (âš ï¸ API æœªå®ç°)
  - åŠŸèƒ½: æœªè¯»é€šçŸ¥æ•°é‡ã€é€šçŸ¥å¼¹å‡º

- **CommentSection.svelte** - è¯„è®ºåŒº (âš ï¸ å¾…å®ç°)
  - ä½¿ç”¨ API: `GET /api/comments`, `POST /api/comments`, `POST /api/comments/{id}/like` (âš ï¸ API æœªå®ç°)
  - åŠŸèƒ½: è¯„è®ºå±•ç¤ºã€å‘è¡¨è¯„è®ºã€ç‚¹èµè¯„è®º

#### æ•°æ®å±•ç¤ºç»„ä»¶

- **ActivityFeed.svelte** - æ´»åŠ¨åŠ¨æ€ (âš ï¸ å¾…å®ç°)

  - ä½¿ç”¨ API: `GET /api/activities` (âš ï¸ API æœªå®ç°)
  - åŠŸèƒ½: ç”¨æˆ·æ´»åŠ¨æµã€æ“ä½œå†å²

- **ModelCard.svelte** - æ¨¡å‹å¡ç‰‡ (âœ… å·²å®ç°)

  - åŠŸèƒ½: æ¨¡å‹ä¿¡æ¯å±•ç¤ºã€æ¨¡å‹ç±»å‹æ ‡è¯†

- **ServiceCard.svelte** - æœåŠ¡å¡ç‰‡ (âš ï¸ å¾…å®ç°)
  - ä½¿ç”¨ API: `GET /api/{username}/{repository}/services` (âš ï¸ API æœªå®ç°)
  - åŠŸèƒ½: æœåŠ¡çŠ¶æ€å±•ç¤ºã€æœåŠ¡æ“ä½œ

#### ç¼–è¾‘å™¨ç»„ä»¶

- **YAMLMetadataEditor.svelte** - YAML ç¼–è¾‘å™¨ (ğŸ”„ éƒ¨åˆ†å®ç°)
  - ä½¿ç”¨ API: `GET /api/{username}/{repository}/metadata`, `PUT /api/{username}/{repository}/metadata` (âš ï¸ API æœªå®ç°)
  - åŠŸèƒ½: YAML ç¼–è¾‘ã€è¯­æ³•é«˜äº®ã€å®æ—¶é¢„è§ˆ

#### æ–‡ä»¶ç¼–è¾‘ä¸ç‰ˆæœ¬æ§åˆ¶ç»„ä»¶ (âœ… å·²å®ç°)

- **FileEditor.svelte** - ä¸»æ–‡ä»¶ç¼–è¾‘å™¨ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/versions/{version_id}/content`, `POST /api/file-editor/files/{file_id}/versions`
  - åŠŸèƒ½: CodeMirror 6 ç¼–è¾‘å™¨ã€è¯­æ³•é«˜äº®ã€è‡ªåŠ¨ä¿å­˜ã€å¤šè¯­è¨€æ”¯æŒã€ä¸»é¢˜åˆ‡æ¢

- **EditorToolbar.svelte** - ç¼–è¾‘å™¨å·¥å…·æ  (âœ… å·²å®ç°)

  - åŠŸèƒ½: ä¿å­˜ã€æ’¤é”€ã€é‡åšã€æ ¼å¼åŒ–ã€é¢„è§ˆã€è§†å›¾åˆ‡æ¢

- **EditorStatusBar.svelte** - ç¼–è¾‘å™¨çŠ¶æ€æ  (âœ… å·²å®ç°)

  - åŠŸèƒ½: å…‰æ ‡ä½ç½®ã€å­—æ•°ç»Ÿè®¡ã€è¯­è¨€æ˜¾ç¤ºã€ä¿å­˜çŠ¶æ€

- **EditorSidebar.svelte** - ç¼–è¾‘å™¨ä¾§è¾¹æ  (âœ… å·²å®ç°)

  - åŠŸèƒ½: æ–‡ä»¶æ ‘ã€ç‰ˆæœ¬å†å²ã€åä½œè€…çŠ¶æ€

- **VersionHistory.svelte** - æ–‡ä»¶ç‰ˆæœ¬å†å² (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/versions`
  - åŠŸèƒ½: ç‰ˆæœ¬åˆ—è¡¨ã€æäº¤ä¿¡æ¯ã€ä½œè€…ä¿¡æ¯ã€ç‰ˆæœ¬å¯¹æ¯”ã€æ¢å¤æ“ä½œ

- **VersionDiff.svelte** - ç‰ˆæœ¬å·®å¼‚æŸ¥çœ‹å™¨ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/versions/{old_version_id}/diff/{new_version_id}`
  - åŠŸèƒ½: åˆ†å±/ç»Ÿä¸€è§†å›¾ã€è¯­æ³•é«˜äº®å·®å¼‚ã€è¡Œå·æ˜¾ç¤ºã€ç»Ÿè®¡ä¿¡æ¯

- **CollaborationStatus.svelte** - åä½œçŠ¶æ€ç»„ä»¶ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/collaboration`
  - åŠŸèƒ½: æ´»è·ƒç”¨æˆ·åˆ—è¡¨ã€ç¼–è¾‘çŠ¶æ€ã€æƒé™æ˜¾ç¤ºã€å®æ—¶è½®è¯¢

- **DraftManager.svelte** - è‰ç¨¿ç®¡ç†å™¨ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/drafts`, `POST /api/file-editor/files/{file_id}/drafts`
  - åŠŸèƒ½: è‰ç¨¿åˆ—è¡¨ã€é¢„è§ˆã€æ¢å¤ã€åˆ é™¤ã€æ‰¹é‡æ“ä½œ

- **DraftAutoSaver.svelte** - è‡ªåŠ¨ä¿å­˜ç»„ä»¶ (âœ… å·²å®ç°)

  - ä½¿ç”¨ API: `POST /api/file-editor/files/{file_id}/drafts`
  - åŠŸèƒ½: å®šæ—¶è‡ªåŠ¨ä¿å­˜ã€çŠ¶æ€æŒ‡ç¤ºã€é”™è¯¯å¤„ç†

- **DraftRecovery.svelte** - è‰ç¨¿æ¢å¤ç»„ä»¶ (âœ… å·²å®ç°)
  - ä½¿ç”¨ API: `GET /api/file-editor/files/{file_id}/drafts`
  - åŠŸèƒ½: å¯åŠ¨æ—¶æ¢å¤æç¤ºã€æ™ºèƒ½æ¨èã€æ‰¹é‡æ¢å¤

## ğŸ”§ å¼€å‘æŒ‡å—

### æ•°æ®åº“è¿ç§»

```bash
# 1. ä¿®æ”¹æ¨¡å‹åç”Ÿæˆè¿ç§»
cd backend
alembic revision --autogenerate -m "Add new field"

# 2. æ£€æŸ¥ç”Ÿæˆçš„è¿ç§»æ–‡ä»¶
# ç¼–è¾‘ alembic/versions/xxx_add_new_field.py

# 3. åº”ç”¨è¿ç§»
alembic upgrade head

# 4. å›æ»šè¿ç§» (å¦‚éœ€è¦)
alembic downgrade -1
```

### å‰ç«¯ç»„ä»¶å¼€å‘

```javascript
// åˆ›å»ºæ–°ç»„ä»¶
// src/lib/components/NewComponent.svelte

<script>
  import { createEventDispatcher } from 'svelte';
  const dispatch = createEventDispatcher();

  // ç»„ä»¶é€»è¾‘
</script>

<!-- ç»„ä»¶æ¨¡æ¿ -->
<div class="component-class">
  <!-- HTMLç»“æ„ -->
</div>

<style>
  /* ç»„ä»¶æ ·å¼ */
</style>
```

## ğŸš€ ç¯å¢ƒå¯åŠ¨æŒ‡å—

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

**åŸºç¡€ç¯å¢ƒ**

- **Node.js** 18.0+
- **Python** 3.12+
- **Docker** 20.10+ & **Docker Compose** 2.0+
- **PostgreSQL** 15+
- **Redis** 7.0+
- **MinIO** (å¯¹è±¡å­˜å‚¨)

**ç³»ç»Ÿèµ„æº**

- **å†…å­˜**: æœ€å°‘ 4GBï¼Œæ¨è 8GB+
- **å­˜å‚¨**: æœ€å°‘ 10GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### ğŸ› ï¸ å¼€å‘ç¯å¢ƒå¯åŠ¨

#### 1. å…‹éš†é¡¹ç›®å¹¶è®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-username/GeoML-hub.git
cd GeoML-hub

# æ£€æŸ¥ç³»ç»Ÿè¦æ±‚
node --version    # åº”è¯¥ >= 18.0
python --version  # åº”è¯¥ >= 3.12
docker --version  # åº”è¯¥ >= 20.10
```

#### 2. å¯åŠ¨åŸºç¡€æœåŠ¡

```bash
# å¯åŠ¨æ•°æ®åº“å’Œç¼“å­˜æœåŠ¡
docker-compose up -d postgres redis minio

# ç­‰å¾…æœåŠ¡å®Œå…¨å¯åŠ¨
sleep 10

# éªŒè¯æœåŠ¡çŠ¶æ€
docker-compose ps
```

#### 3. åç«¯æœåŠ¡è®¾ç½®

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (æ¨è)
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡ (å¼€å‘ç¯å¢ƒ)
export DATABASE_URL="postgresql://geoml:password@localhost:5432/geoml_hub"
export REDIS_URL="redis://localhost:6379/0"
export SECRET_KEY="dev-secret-key-change-in-production"
export MINIO_ENDPOINT="localhost:9000"
export MINIO_ACCESS_KEY="minioadmin"
export MINIO_SECRET_KEY="minioadmin"
export MINIO_SECURE="false"

# æ•°æ®åº“åˆå§‹åŒ–
alembic upgrade head                    # ç¡®ä¿åŒ…å«æœ€æ–°çš„ is_admin å­—æ®µè¿ç§»
python scripts/init_classifications.py

# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ· (å¯é€‰)
# python scripts/create_admin_user.py

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### 4. å‰ç«¯æœåŠ¡è®¾ç½®

```bash
# æ–°ç»ˆç«¯çª—å£
cd frontend

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘ .env.local è®¾ç½® API åœ°å€

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

#### 5. è®¿é—®åº”ç”¨

- **å‰ç«¯åº”ç”¨**: http://localhost:5173
- **åç«¯ API**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **MinIO æ§åˆ¶å°**: http://localhost:9001 (minioadmin/minioadmin)

### ğŸ­ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. ç¯å¢ƒå˜é‡é…ç½®

```bash
# åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
cat > .env.production << EOF
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://geoml_user:secure_password@db.example.com:5432/geoml_hub_prod
REDIS_URL=redis://redis.example.com:6379/0

# å®‰å…¨é…ç½®
SECRET_KEY=your-super-secure-random-secret-key-here
JWT_SECRET_KEY=another-secure-jwt-secret

# æœåŠ¡é…ç½®
CORS_ORIGINS=https://geoml-hub.example.com,https://api.geoml-hub.example.com
ALLOWED_HOSTS=geoml-hub.example.com,api.geoml-hub.example.com

# å¯¹è±¡å­˜å‚¨é…ç½®
MINIO_ENDPOINT=storage.example.com:9000
MINIO_ACCESS_KEY=your_production_access_key
MINIO_SECRET_KEY=your_production_secret_key
MINIO_SECURE=true
MINIO_DEFAULT_BUCKET=geoml-hub-prod

# å¤–éƒ¨è®¤è¯æœåŠ¡
EXTERNAL_AUTH_URL=https://auth.example.com
EXTERNAL_AUTH_CLIENT_ID=your_client_id
EXTERNAL_AUTH_CLIENT_SECRET=your_client_secret

# æ¨¡å‹æœåŠ¡ç®¡ç†é…ç½® (V2.0 æ–°å¢)
SERVICE_PORT_START=7000
SERVICE_PORT_END=8000
MAX_SERVICES_PER_USER=20
MAX_SERVICES_PER_REPOSITORY=3
SERVICE_IDLE_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60
DEFAULT_CPU_LIMIT=0.2
DEFAULT_MEMORY_LIMIT=256Mi
MAX_CPU_LIMIT=0.5
MAX_MEMORY_LIMIT=1Gi
AUTO_START_ON_VISIT=true
MAX_AUTO_START_RETRIES=3
EXPONENTIAL_BACKOFF_ENABLED=true
DOCKER_MS_HOST=unix:///var/run/docker.sock
DOCKER_IMAGE_NAME=geoml-service:latest

# æ€§èƒ½é…ç½®
MAX_FILE_SIZE_MB=500
MAX_TOTAL_SIZE_GB=100
UPLOAD_SESSION_EXPIRES_HOURS=24
WORKER_PROCESSES=4

# ç›‘æ§é…ç½®
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
LOG_LEVEL=INFO
ENABLE_METRICS=true
EOF
```

#### 2. æ•°æ®åº“å‡†å¤‡

```bash
# ç”Ÿäº§æ•°æ®åº“åˆå§‹åŒ–
cd backend

# åŠ è½½ç”Ÿäº§ç¯å¢ƒå˜é‡
source .env.production

# è¿è¡Œæ•°æ®åº“è¿ç§» (åŒ…å«æœ€æ–°çš„ç”¨æˆ·æƒé™å­—æ®µ)
alembic upgrade head

# åˆå§‹åŒ–åŸºç¡€æ•°æ®
python scripts/init_classifications.py

# åˆ›å»ºç®¡ç†å‘˜è´¦æˆ· (äº¤äº’å¼)
python scripts/create_admin_user.py

# éªŒè¯æ•°æ®åº“è¿æ¥
python -c "from app.database import get_async_db; print('Database connection successful')"
```

#### 3. Docker ç”Ÿäº§éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§é•œåƒ
docker-compose -f docker-compose.prod.yml build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f api
```

#### 4. ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

```bash
# åç«¯ç”Ÿäº§å¯åŠ¨
cd backend

# ä½¿ç”¨ Gunicorn å¯åŠ¨
gunicorn app.main:app \
  --workers 4 \
  --worker-class uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000 \
  --timeout 120 \
  --keep-alive 5 \
  --access-logfile /var/log/geoml-hub/access.log \
  --error-logfile /var/log/geoml-hub/error.log

# å‰ç«¯ç”Ÿäº§æ„å»º
cd frontend
npm run build

# ä½¿ç”¨ Nginx æœåŠ¡é™æ€æ–‡ä»¶
sudo cp -r build/* /var/www/geoml-hub/
sudo systemctl reload nginx
```

### ğŸ”§ ç®¡ç†è„šæœ¬

#### ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†

```bash
# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ· (äº¤äº’å¼)
cd backend
python scripts/create_admin_user.py

# åˆ—å‡ºç°æœ‰ç®¡ç†å‘˜ç”¨æˆ·
python scripts/create_admin_user.py --list

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
python scripts/create_admin_user.py --help
```

#### æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

```bash
# åˆå§‹åŒ–åˆ†ç±»æ•°æ®
python scripts/init_classifications.py

# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ· (äº¤äº’å¼)
python scripts/create_admin_user.py
```

### ğŸ”§ å¼€å‘å·¥å…·å’Œè°ƒè¯•

#### å¼€å‘æœåŠ¡å™¨å‘½ä»¤

```bash
# åç«¯å¼€å‘æœåŠ¡å™¨ (çƒ­é‡è½½)
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# å‰ç«¯å¼€å‘æœåŠ¡å™¨ (çƒ­é‡è½½)
cd frontend
npm run dev -- --host 0.0.0.0 --port 5173

# æ•°æ®åº“æ§åˆ¶å°
cd backend
python -c "from app.database import get_async_db; import asyncio; asyncio.run(get_async_db().__anext__())"

# MinIO æ§åˆ¶å°
open http://localhost:9001
```

#### è°ƒè¯•å·¥å…·

```bash
# æŸ¥çœ‹æ•°æ®åº“è¡¨ç»“æ„
cd backend
alembic current
alembic history

# æŸ¥çœ‹ API æ–‡æ¡£
open http://localhost:8000/docs

# æ£€æŸ¥ä»£ç æ ¼å¼
cd backend
black . --check
flake8 .

cd frontend
npm run lint
npm run format
```

### ğŸ“Š æ€§èƒ½ç›‘æ§

#### å¥åº·æ£€æŸ¥ç«¯ç‚¹

```bash
# ç³»ç»Ÿå¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# æ•°æ®åº“è¿æ¥æ£€æŸ¥
curl http://localhost:8000/health/db

# MinIO è¿æ¥æ£€æŸ¥
curl http://localhost:8000/health/storage

# è¯¦ç»†ç³»ç»Ÿä¿¡æ¯
curl http://localhost:8000/health/detailed
```

#### æ—¥å¿—ç›‘æ§

```bash
# åº”ç”¨æ—¥å¿—
tail -f /var/log/geoml-hub/app.log

# Nginx è®¿é—®æ—¥å¿—
tail -f /var/log/nginx/access.log

# Docker å®¹å™¨æ—¥å¿—
docker-compose logs -f api
docker-compose logs -f frontend
```

### ğŸ”’ å®‰å…¨é…ç½®

#### SSL/TLS é…ç½®

```bash
# ä½¿ç”¨ Let's Encrypt è‡ªåŠ¨è¯ä¹¦
sudo certbot --nginx -d geoml-hub.example.com

# æ‰‹åŠ¨è¯ä¹¦é…ç½®
sudo cp cert.pem /etc/ssl/certs/geoml-hub.crt
sudo cp key.pem /etc/ssl/private/geoml-hub.key
```

#### é˜²ç«å¢™é…ç½®

```bash
# å¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable
```

#### é‡å¯æœåŠ¡

```bash
# é‡å¯å¼€å‘ç¯å¢ƒ
docker-compose restart
cd backend && uvicorn app.main:app --reload
cd frontend && npm run dev

# é‡å¯ç”Ÿäº§ç¯å¢ƒ
sudo systemctl restart geoml-hub-api
sudo systemctl restart nginx
docker-compose -f docker-compose.prod.yml restart
```

## ğŸ“¦ å¿«é€Ÿéƒ¨ç½²

### Docker ä¸€é”®éƒ¨ç½² (æ¨è)

```bash
# ç”Ÿäº§ç¯å¢ƒä¸€é”®å¯åŠ¨
git clone https://github.com/your-username/GeoML-hub.git
cd GeoML-hub
cp .env.example .env.production
# ç¼–è¾‘ .env.production è®¾ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
docker-compose -f docker-compose.prod.yml up -d
```

### å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨

```bash
# å…‹éš†å¹¶å¯åŠ¨å¼€å‘ç¯å¢ƒ
git clone https://github.com/your-username/GeoML-hub.git
cd GeoML-hub
docker-compose up -d postgres redis minio
cd backend && pip install -r requirements.txt
alembic upgrade head && python scripts/init_classifications.py
python scripts/create_admin_user.py  # åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
uvicorn app.main:app --reload &
cd ../frontend && npm install && npm run dev
```

## tls è¯ä¹¦ï¼ˆè‹¥éœ€è¦ï¼‰

```bash
  # åˆ›å»ºè¯ä¹¦ç›®å½•
  mkdir -p /etc/docker/certs
  cd /etc/docker/certs

  # 1. æ¸…ç†æ‰€æœ‰æ—§è¯ä¹¦
  rm -f *.pem *.csr *.cnf *.srl

  # 2. ç”ŸæˆCAç§é’¥
  openssl genrsa -out ca-key.pem 4096

  # 3. ç”ŸæˆCAè¯ä¹¦ï¼ˆ10å¹´æœ‰æ•ˆæœŸï¼‰
  openssl req -new -x509 -days 3650 -key ca-key.pem -sha256 -out ca.pem -subj
  "/C=CN/ST=Beijing/L=Beijing/O=GeoML/OU=Docker/CN=CA"

  # 4. ç”ŸæˆæœåŠ¡å™¨ç§é’¥
  openssl genrsa -out server-key.pem 4096

  # 5. ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾åè¯·æ±‚
  openssl req -subj
  "/C=CN/ST=Beijing/L=Beijing/O=GeoML/OU=Docker/CN=172.21.252.231" -sha256 -new
  -key server-key.pem -out server.csr

  # 6. åˆ›å»ºSANæ‰©å±•æ–‡ä»¶
  cat > server-extfile.cnf <<EOF
  subjectAltName = IP:172.21.252.231,IP:127.0.0.1,DNS:localhost
  extendedKeyUsage = serverAuth
  EOF

  # 7. ä½¿ç”¨CAç­¾å‘æœåŠ¡å™¨è¯ä¹¦
  openssl x509 -req -days 3650 -sha256 -in server.csr -CA ca.pem -CAkey
  ca-key.pem -out server-cert.pem -extfile server-extfile.cnf -CAcreateserial

  # 8. ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥
  openssl genrsa -out key.pem 4096

  # 9. ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ç­¾åè¯·æ±‚
  openssl req -subj "/C=CN/ST=Beijing/L=Beijing/O=GeoML/OU=Client/CN=client"
  -new -key key.pem -out client.csr

  # 10. åˆ›å»ºå®¢æˆ·ç«¯æ‰©å±•æ–‡ä»¶
  cat > client-extfile.cnf <<EOF
  extendedKeyUsage = clientAuth
  EOF

  # 11. ä½¿ç”¨CAç­¾å‘å®¢æˆ·ç«¯è¯ä¹¦
  openssl x509 -req -days 3650 -sha256 -in client.csr -CA ca.pem -CAkey
  ca-key.pem -out cert.pem -extfile client-extfile.cnf -CAcreateserial

  # 12. éªŒè¯è¯ä¹¦æ˜¯å¦æ­£ç¡®ç”Ÿæˆ
  echo "éªŒè¯CAè¯ä¹¦å’Œç§é’¥åŒ¹é…ï¼š"
  openssl x509 -noout -modulus -in ca.pem | openssl md5
  openssl rsa -noout -modulus -in ca-key.pem | openssl md5

  echo "éªŒè¯æœåŠ¡å™¨è¯ä¹¦ï¼š"
  openssl verify -CAfile ca.pem server-cert.pem

  echo "éªŒè¯å®¢æˆ·ç«¯è¯ä¹¦ï¼š"
  openssl verify -CAfile ca.pem cert.pem

  echo "æŸ¥çœ‹æœåŠ¡å™¨è¯ä¹¦SANï¼š"
  openssl x509 -in server-cert.pem -text -noout | grep -A 3 "Subject Alternative
   Name"

  # 13. æ¸…ç†ä¸´æ—¶æ–‡ä»¶
  rm server.csr client.csr server-extfile.cnf client-extfile.cnf

  # è®¾ç½®æƒé™
  chmod 400 *-key.pem key.pem
  chmod 444 *.pem

  ca.pem, cert.pem, key.pem æ”¾ç½®åˆé€‚çš„ä½ç½®

  âº # 1. åˆ›å»ºæˆ–ç¼–è¾‘Dockerå®ˆæŠ¤è¿›ç¨‹é…ç½®
  sudo mkdir -p /etc/docker
  sudo bash -c 'cat > /etc/docker/daemon.json <<EOF
  {
    "hosts": ["fd://", "tcp://0.0.0.0:2376"],
    "tls": true,
    "tlscert": "/etc/docker/certs/server-cert.pem",
    "tlskey": "/etc/docker/certs/server-key.pem",
    "tlsverify": true,
    "tlscacert": "/etc/docker/certs/ca.pem"
  }
  EOF'

  # 2. åˆ›å»ºsystemdæœåŠ¡è¦†ç›–æ–‡ä»¶
  sudo mkdir -p /etc/systemd/system/docker.service.d
  sudo bash -c 'cat >
  /etc/systemd/system/docker.service.d/override.conf <<EOF
  [Service]
  ExecStart=
  ExecStart=/usr/bin/dockerd
  EOF'

  # 3. é‡æ–°åŠ è½½systemdå¹¶é‡å¯Docker
  sudo systemctl daemon-reload
  sudo systemctl restart docker

  # 4. éªŒè¯Docker TLSæ˜¯å¦å¯ç”¨
  sudo systemctl status docker
  sudo netstat -tlnp | grep :2376

  æ­¥éª¤3: å¤åˆ¶å®¢æˆ·ç«¯è¯ä¹¦åˆ°ä½ çš„åº”ç”¨æœºå™¨

  # 3. è®¾ç½®æ­£ç¡®çš„æƒé™
  sudo chown -R $(whoami):$(whoami) /tls/docker/certs
  chmod 444 /tls/docker/certs/ca.pem /tls/docker/certs/cert.pem
  chmod 400 /tls/docker/certs/key.pem

  2. æ›´æ–°ä½ çš„åº”ç”¨é…ç½®

  åœ¨ä½ çš„ .env æ–‡ä»¶ä¸­ï¼š

  # Docker TLSé…ç½®
  DOCKER_MS_HOST=tcp://ä½ çš„DockeræœåŠ¡å™¨IP:2376
  DOCKER_MS_TLS_VERIFY=true
  DOCKER_MS_CERT_PATH=/tls/docker/certs
  DOCKER_MS_TIMEOUT=60

  3. æµ‹è¯•TLSè¿æ¥

  # åœ¨åº”ç”¨æœåŠ¡å™¨ä¸Šæµ‹è¯•è¿æ¥
  docker --tlsverify \
      --tlscacert=/tls/docker/certs/ca.pem \
      --tlscert=/tls/docker/certs/cert.pem \
      --tlskey=/tls/docker/certs/key.pem \
      -H=tcp://ä½ çš„DockeræœåŠ¡å™¨IP:2376 \
      version
```
